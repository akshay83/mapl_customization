[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Payment Entry",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "\n<div style=\"position: relative; top:0.0cm\">\n\t<div style=\"width:20.0cm;height:9.0cm;\">\n\t\t<span style=\"top: {{ 1.0 }}cm; left: {{ 9.0 }}cm;\n\t\t\tborder-bottom: solid 1px;border-top:solid 1px; position: absolute;\">\n\t\t\t\tAcc. Payee\n\t\t</span>\n\t\t<span style=\"top:1.0 cm; left:15.0cm;\n\t\t\tposition: absolute;\">\n\t\t\t{{ frappe.utils.formatdate(doc.reference_date) or '' }}\n\t\t</span>\n\t\t<span style=\"top:5.0cm;left:4.0cm;\n\t\t\tposition: absolute;\">\n\t\t\t{{ doc.account_no or '' }}\n\t\t</span>\n\t\t<span style=\"top:2.0cm;left: 3.0cm;\n\t\t\tposition: absolute;\">\n\t\t\t{{doc.party_name}}\n\t\t</span>\n\t\t<span style=\"top:3.0cm; left:4.0cm;\n\t\t\tposition: absolute; display: block; width: 15.0cm;\n\t\t\tline-height:0.5cm; word-wrap: break-word;\">\n\t\t\t\t{{frappe.utils.money_in_words(doc.base_paid_amount or doc.base_received_amount)}}\n\t\t</span>\n\t\t<span style=\"top:3.5cm;left: 16.0cm;\n\t\t\tposition: absolute;\">\n\t\t\t{{doc.get_formatted(\"base_paid_amount\") or doc.get_formatted(\"base_received_amount\")}}\n\t\t</span>\n\t\t<span style=\"top:6.0cm;left: 15.0cm;\n\t\t\tposition: absolute;\">\n\t\t\t{{doc.company}}\n\t\t</span>\n\t</div>\n</div>",
  "line_breaks": 0,
  "modified": "2017-03-03 18:49:03.263000",
  "module": "Accounts",
  "name": "ICICI Bank",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "    .print-format-container {\n        position: absolute !important;\n        height:100%;\n        width:100%;\n    }\n    .print-preview {\n        position: relative !important;\n    }\n",
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 63.0.3239.84 -->\n{% set orientation = \"Portrait\" %}\n{% set display_rows_per_page = 8 %}\n\n{% set row_height = \"auto\" %}\n{% set div_page_height = \"100%\" %}\n{% set div_max_page_height = \"100%\" %}\n{% set page_size = {} %}\n{% if page_size.update({\"min_page_height\":\"8.26in\"}) %}{% endif %}\n{% if page_size.update({\"min_page_width\":\"11.69in\"}) %}{% endif %}\n{% if page_size.update({\"max_page_height\":\"8.26in\"}) %}{% endif %}\n{% if page_size.update({\"max_page_width\":\"11.69in\"}) %}{% endif %}\n{% if page_size.update({\"preferred_page_width\":\"11.69in\"}) %}{% endif %}\n{% if page_size.update({\"preferred_page_height\":\"8.26in\"}) %}{% endif %}\n{% set header_height = \"initial\" %}\n{% set max_header_height = \"initial\" %}\n{% set footer_height = \"initial\" %}\n{% set max_footer_height = \"initial\" %}\n{% set body_height = \"initial\" %}\n{% set max_body_height = \"100%\" %}\n\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set page_padding = \"1cm\" %}\n\n{% set global_default_font = \"Monospace\" %}\n\n{% set column_widths = {} %}\n{% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\n{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\n{% if column_widths.update({\"description_column_width\":\"35%\"}) %}{% endif %}\n{% if column_widths.update({\"qty_column_width\":\"5%\"}) %}{% endif %}\n{% if column_widths.update({\"amount_column_width\":\"10%\"}) %}{% endif %}\n{% if column_widths.update({\"rate_column_width\":\"10%\"}) %}{% endif %}\n\n{% set tax_line_counter = {'tl':1} %}\n{% set tax_line_max_length = 8 %}\n{% set tax_analysis_div_width = \"50%\" %}\n{% set tax_analysis_row_left = \"60%\" %} \n{% set tax_analysis_row_right = \"40%\" %}\n\n{% set taxes_as_columns = true %}\n{% set print_tax_analysis = false %}\n{% if column_widths.update({\"tax_rate_column_width\":\"6%\"}) %}{% endif %}        \n{% if column_widths.update({\"tax_amount_column_width\":\"8%\"}) %}{% endif %}        \n\n{% set key_index = {} %}\n{% set abbr = \" - \"+frappe.db.get_value(\"Company\", doc.company, \"abbr\") %}\n\n{% macro set_orientation_size() %}\n\t{% if orientation != \"Landscape\" %}\n\t\t{% if page_size.update({\"min_page_height\":\"11.69in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"min_page_width\":\"8.26in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"max_page_height\":\"11.69in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"max_page_width\":\"8.26in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"preferred_page_width\":\"8.26in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"preferred_page_height\":\"11.69in\"}) %}{% endif %}\n    {% endif %} \n{% endmacro %}\n\n{% macro set_column_widths() %}\n\t{% set tax_columns = {'ln':0} %}\n    {% if taxes_as_columns %}\n    \t{% for taxes in doc.taxes %}\n\t    \t{% if taxes.charge_type != 'Actual' %}\n\t        \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\n\t        {% endif %}\n    \t{% endfor %}\n    {% endif %}\n    {% if tax_columns.ln == 0 %}\n\t    {% if column_widths.update({\"serial_no_column_width\":\"4%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"9%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"description_column_width\":\"50%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"qty_column_width\":\"7%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"amount_column_width\":\"15%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"rate_column_width\":\"15%\"}) %}{% endif %}\n        {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \n    {% else %}\n\t    {% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\t\t\n\t\t{% if column_widths.update({\"qty_column_width\":\"4%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"amount_column_width\":\"12%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"rate_column_width\":\"12%\"}) %}{% endif %}\n    \t{% if tax_columns.ln == 1 %}\n        \t{% if column_widths.update({\"description_column_width\":\"39%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"tax_rate_column_width\":\"5%\"}) %}{% endif %}        \n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}        \n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \n        {% endif %}\n    \t{% if tax_columns.ln == 2 %}\n        \t{% if column_widths.update({\"description_column_width\":\"32%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"tax_rate_column_width\":\"5%\"}) %}{% endif %}        \n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}  \n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"amount_column_width\":\"11%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"rate_column_width\":\"11%\"}) %}{% endif %}            \n        {% endif %}        \n    {% endif %}\n{% endmacro %}\n\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\n{% endif %}\n{% set count_page_break = {'pages':0} %}\n{% for row in doc.items %}\n\t{% if (row.page_break) %}\n    \t{% if count_page_break.update({\"pages\":count_page_break.pages+1}) %}{% endif %}\n    {% endif %}\n{% endfor %}\n{% if (total_pages_as_per_rows > count_page_break.pages) %}\n\t{% if count_page_break.update({\"pages\":0}) %}{% endif %}\n{% endif %}\n{% set total_pages_as_per_rows = total_pages_as_per_rows + count_page_break.pages %}\n\n\n{{ set_orientation_size() }}\n{{ set_column_widths() }}\n\n<!-- DONT EDIT STYLE BELOW -->\n<style>\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    @-moz-document url-prefix() {\n    \t.print-format {\n\t        height: 99% !important;\n        }\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;        \n    }\n    \n    .print-format-gutter {\n        height: 100%;\n    }\n    .description_div br {\n       display: none;\n    }\n    .customer-details div {\n        font-size: 12px !important;\n        line-height: 15px !important;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ page_size.min_page_height }} !important;\n            max-width: {{ page_size.max_page_width }} !important;\n            padding: {{ page_padding }};\n            background-color: white;\n            margin: auto;\n            display: flex;\n\t\t\tflex-direction: column;\n            width: 100%;\n        }\n    }\n    @media print {    \n    \thtml{\n\t        height:100%;\n\t        position:relative\n\t    }    \n    \t@page {\n            size: {{ page_size.preferred_page_width }} {{ page_size.preferred_page_height }} {{ orientation }};\n            margin: {{ page_padding }};\n        }    \n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            display: flex;\n\t\t\tflex-direction: column;\n        }\n    }\n    @media all {\n \t\tcolcell {\n    \t\tborder-left-style:solid !important;\n            border-left-color:gray !important;\n            border-left-width:1px !important;\n\t\t}\n    }\n</style>\n<!-- DONT EDIT STYLE ABOVE -->\n\n<!---------------------------------------------------------------->\n<!-------- CUSTOM MACROS FOR LOCAL USE --------------------------->\n<!---------------------------------------------------------------->\n\n{% macro tax_analysis_print_format() %}\n <table style=\"height:100%;\">\n \t<tr>\n    \t<th style=\"width:125px;padding:0px !important;width:100%;\">Model (HSN Code)</th>\n\t\t{% for taxes in doc.taxes %}\n        \t{% if taxes.charge_type != 'Actual' %}\n                <th style=\"min-width:45px;padding:0px !important;text-align:right;\">Rate(%)</th>\n        \t\t<th style=\"min-width:70px;padding:0px !important;text-align:right;\">{{ taxes.account_head.split(abbr)[0] }}(Rs)</th>\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\n            {% endif %}\n    \t{% endfor %}\n    </tr>\n    \n    {% set items = doc.items|sort(attribute='item_code') %}\n    {% set current_item = {'ci':items[0].item_code} %}\n    {% for model in items %}\n    \t{% if current_item.ci != model.item_code or loop.first %}\n        \t{% if current_item.update({'ci':model.item_code}) %}{% endif %}\n    \t<tr>\n        \t<td>{{ model.item_code }}({{ frappe.db.get_value(\"Item\", model.item_code, \"gst_hsn_code\") }})</td>\n\t\t{% for tax in doc.taxes %}\n        \t{% if tax.charge_type != 'Actual' %}\n\t\t    \t{% set i = tax.item_wise_tax_detail|json_load %}\n\t\t        {% for key, val in i.items() %}\n\t            \t{% if key == model.item_code %}\n\t\t                <td style=\"text-align:right;\">{{ val[0] }}</td>\n\t\t                {% for i in range(key_index[tax.account_head]) %}\n\t\t                \t{% if loop.last %}\n\t\t                \t  <td style=\"text-align:right;\">{{ val[1] }}</td>\n\t\t                    {% endif %}\n\t\t                {% endfor %}   \n\t                {% endif %}\n\t\t        {% endfor %}\n            {% endif %}\n\t    {% endfor %}\n        {% endif %}\n        </tr>\n    {% endfor %}\n    <tr height=\"100%;\"> \n         <td style=\"width=125px;\"> </td>\n    </tr>            \n  </table>\n{% endmacro %}\n\n{% macro do_subtotals() %}\n    <!-- DIFFRENT VAT & CHARGES PRINT -->\n    {% set suppress_LUT_msg = {'suppress':0} %}\n    {% for t in doc.taxes %}\n        {% if \"IGST\" in t.account_head and t.tax_amount > 1 %}\n            {% if suppress_LUT_msg.update({'suppress':1}) %}{% endif %}\n        {% endif %}\n    {% endfor %}\n    {% if doc.special_invoice == 'SEZ Supply' and  suppress_LUT_msg.suppress == 0 %}    \n      <div style=\"flex:2;font-size:10px;padding-right:30px;\">\n      \tSupply meant for supply to SEZ unit for authorised operations under Bond or Letter of Undertaking without payment of Integrated tax\n      </div>\n    {% endif %}\n    \n    {% set max_line_height = \"15px\" %}\n\t<div style=\"display:flex;justify-content:flex-end;flex-wrap:wrap;flex-direction:column;align-items:flex-end;width:100%;flex:1;\">\n                \n\t\t<!-- SUB TOTAL -->\n\t\t<div style=\"width:100%;\">\n\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\tTaxable Value\n\t\t\t</div>\n\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t{{ doc.get_formatted(\"net_total\") }}\n\t\t\t</div>\n\t\t</div>\n\t    <!-- END SUB TOTAL -->\n                \n\t\t{%- for row in doc.taxes -%}\n            {% if row.tax_amount != 0 %}\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ row.description }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ row.get_formatted(\"tax_amount\", doc) }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>\n            {% endif %}\n\t\t{%- endfor -%}\n        \n        {% if not doc.taxes or doc.total_taxes_and_charges == 0 %}\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\tSGST\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>        \t\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\tCGST\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>        \t\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\tIGST\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>        \t                \n        {% endif %}\n        \n\t</div>\n{% endmacro %}\n\n\n{% macro attach_tax_columns_vertical_lines(is_last) %}\n\t\t<!-- WAS {'height':\"100%\"} -->\n\t\t{% set columnheight = {'height':\"initial\"} %}\n\t\t{% if not is_last %}\n        \t<!-- WAS {'height':\"100%\"} -->\n        \t{% if columnheight.update({'height':\"initial\"}) %} {% endif %}\n        {% endif %}\n        \n\t\t{% set total_len = doc.taxes|length - (doc.taxes|selectattr(\"charge_type\", \"equalto\", \"Actual\")|list)|length %}\n\t\t{% for n in range(1, total_len+1) %}\n                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;\">&nbsp</div> -->\n\t\t\t\t<div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>               \n        {% endfor %}       \n        <div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>       \n        \n\t\t{% if is_last %}\n\t\t\t{% set tax_columns = {'ln':0, 'width':'100%'} %}\n\t\t   \t{% for taxes in doc.taxes %}\n\t\t    \t{% if taxes.charge_type != 'Actual' %}\n\t    \t    \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\n\t\t        {% endif %}\n\t    \t{% endfor %}\n            {% if tax_columns.ln == 1 %}\n            \t{% if tax_columns.update({'width':\"34%\"}) %}{% endif %}\n            {% endif %}\n            {% if tax_columns.ln == 2 %}\n            \t{% if tax_columns.update({'width':\"32%\"}) %}{% endif %}\n            {% endif %}            \n        \t<div style=\"background:white !important;position:absolute;height:auto;width:{{ tax_columns.width }};border-top:1px solid gray;bottom:0;right:0;margin-right:1px;margin-left:1px;border-left:1px solid gray;display:flex;padding-bottom:4px;padding-top:4px;padding-right:1px;\">\n            \t{{ do_subtotals() }}\n        \t</div>\n        {% endif %}\n{% endmacro %}\n\n{% macro attach_tax_columns_headers() %}\n\t\t{% for taxes in doc.taxes %}\n        \t{% if taxes.charge_type != 'Actual' %}\n                <!-- <div style=\"width:{{ column_widths.tax_rate_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/>(%)</div> -->\n        \t\t<div style=\"width:{{ column_widths.tax_amount_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/><span style=\"font-size:10px;\">Amt/Rate(%)</span></div>\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\n            {% endif %}\n       {% endfor %}\n       <div style=\"width:{{ column_widths.total_amount_column_width }};vertical-align:middle !important;padding-right:4px !important;float:left;\">Total<br/>(Rs)</div>\n{% endmacro %}\n\n{% macro attach_tax_columns(model, current_item, first) %}\n    {% set item_details = {} %}\n    {% for item in doc.items %}\n        {% if item_details.update({item.idx:{'item_code':item.item_code,'item_rate':item.rate,'item_qty':item.qty,'net_rate':item.net_rate,'net_amount':item.net_amount}}) %} {% endif %}\n    {% endfor %}\n    \n\t{% set total_amt = {'total':0} %}\n\t{% for tax in doc.taxes %}\n       \t{% if tax.charge_type != 'Actual' %}\n\t    \t{% set i = tax.item_wise_tax_detail |json_load %}\n\t        {% for key, val in i.items() %}\n            \t{% if key == model.item_code %}\n                    \n                   \t{# set value = (val[1] / same_item_total_qty.get(key)|float )|float * same_item_in_different_rows.get(key+('idx:'+model.idx|string), 1)|float #}\n                    {% set value = (model.net_amount * val[0] / 100)|float|round(2) %}\n                    \n\t                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(val[0]) }}</div> -->\n\t                {% for i in range(key_index[tax.account_head]) %}\n\t                \t{% if loop.last %}\n\t                \t  <div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(value) }}<br/><span style=\"font-size:10px;\">{{ frappe.utils.fmt_money(val[0]) }}%</span></div>\n                          {% if total_amt.update({'total':total_amt.total+value}) %} {% endif %}\n\t                    {% endif %}\n\t                {% endfor %}   \n                {% endif %}\n\t        {% endfor %}\n           {% endif %}\n\t{% endfor %}\n   \t<div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n              \t{{ frappe.utils.fmt_money(model.net_amount+total_amt.total) }}\n    </div>                                         \n{% endmacro %}\n\n\n{% macro insert_vertical_lines(is_last) %}\n      <div style=\"flex:1;display:flex;position:relative;\">\n           <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;\"></div>\n           <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>                            \n           <div style=\"width: {{ column_widths.description_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>\n           <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\n           <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\n           <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>                        \n           {% if taxes_as_columns %}\n              \t{{ attach_tax_columns_vertical_lines(is_last) }}\n           {% endif %}                            \n           <div style=\"clear:both;\"></div>\n     </div>  \n{% endmacro %}\n\n\n{% macro print_taxes_charges() -%}\t\n\t<div style=\"display:flex;width:100%;height:100%;flex-grow:1;\">\n\t    {% set taxes_band_width = {'analysis':\"70%\",'subtotal':\"30%\"} %}\n\t    {% if not print_tax_analysis %}\n\t        {% if taxes_band_width.update({'analysis':\"0%\",'subtotal':\"100%\"}) %} {% endif %}\n\t    {% endif %}\n    \n\t\t{% if print_tax_analysis %}    \n\t\t\t<div style=\"width:{{ taxes_band_width.analysis }};padding-right:10px;\">        \n\t\t\t    \t<div style=\"max-width:50px;float:left;\"><B>TAX BREAKUP</B></div>    \n\t\t\t\t       \t{{ tax_analysis_print_format() }}\n\t\t\t</div>                 \n\t    \t<div style=\"width:{{ taxes_band_width.subtotal }};flex-grow:1;background:#eee !important;\">\n\t    \t\t{{ do_subtotals() }}\n\t\t    </div>        \n\t\t{% endif %}                    \n    </div>\n{%- endmacro %}\n\n<!---------------------------------------------------------------->\n<!-------- END OF CUSTOM MACROS FOR LOCAL USE -------------------->\n<!---------------------------------------------------------------->\n\n<!-- Macro for Header -->\n{% macro setheader() -%}\n{% set header_column_width=20 %}\n{% set value_column_width=80 %}\n<div style=\"width: 100%;height:100%;\">\n\t<div style=\"width:100%;overflow: hidden\">\n    <div style=\"width: 100%;height:100%\">\n\t\t<div style=\"display:flex;flex-direction:row;\">\n\t\t<div style=\"display:flex;flex-direction:column;flex:1;\">\n        {% if letter_head and not no_letterhead %}\n            <div style=\"width: 100%;padding-bottom: 3px !important;\">\n                {{ letter_head }}\t\n            </div>\n        <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\n        {% endif %}\n        {% set customer_details = frappe.get_doc(\"Customer\", doc.customer) %}\n                <div style=\"height: 85px;max-height: 85px;overflow: hidden;background: #eee !important;flex:1\">\n                    <div style=\"width: 100%;\">\n\t\t\t        \t<div style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;background:white !important;\">\n\t\t\t\t           \t<div style=\"width:100%;font-size:9px;\">\n\t\t\t                \t<div style=\"float:right;\">\n\t\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\n\t\t\t                            <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Triplicate for Supplier</span>\n\t\t\t                    </div>\n\t\t\t                    <div style=\"float:right;\">\n\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Duplicate for Transporter</span>\n\t\t\t                    </div>                                \n\t\t\t                \t<div style=\"float:right;\">\n\t\t\t                    \t<span style=\"font-family:wingdings;\">o</span>\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Original For Recipient</span>\n\t\t\t                    </div>                                \n\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t                </div>\n\t\t\t            </div>               \n                        <div style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;\">\n                            <div style=\"width: 30%;color: black;font-size: 9px;text-transform: uppercase;text-align: left;vertical-align: middle !important; padding-left: 5px !important;float:left;\">\n\t                    \t\tTax Payable on Reverse Charge: <b>NO</b>                               \n                                <br/>Page {{ total_pages|length }} of {{ total_pages_as_per_rows }}                                \n                            </div>\t\t\t\t\t\n                            <div style=\"width: 40%;color: black;text-align: center;vertical-align: middle !important;float:left;\">\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"Tax Invoice\" }}</B></span>\n                            </div>\t\t\t\t\t\n                            <div style=\"width: 30%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important; padding-right: 5px !important;float:left;\">\n                                <B>{{ doc.reporting_name or doc.name }}<br>Date: {{ doc.get_formatted(\"posting_date\") }}</br> </B>\n                            </div>\t\t\t\t\t\n\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n                        </div>\n                    </div>\n                </div>\n\t\t\t</div>\t\t\t\t\n\t\t\t</div>\n\t\t\t<div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\n            <div style=\"height:100%;\" class=\"customer-details\">\n            <div style=\"width: 100%;padding: 1px !important;\">\n                <div style=\"border-collapse: collapse;width: 100%;margin-top:2px;line-height:15px;\">\n                        <div style=\"width: 50%;vertical-align: middle !important;float:left;\">\n                            <div style=\"width: 100%;font-size:14px;\">\n                                <div> \n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\n                                        Name\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\n                                    \t{# set sal = frappe.db.get_value(\"Customer\", doc.customer, \"salutation\") #}\n                                        <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\n                                    </div>\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n                                </div>\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" %}\n                                \t<div>\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t                                    \t&nbsp\n\t                                    </div>\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                        \n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \n\t                                    </div>\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t                                </div>                                                                \n\t\t\t\t\t\t\t\t{% endif %}                                    \n                                {% if customer_details.company_name %}\n\t                                <div>\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t                                    \t&nbsp\n\t                                    </div>\n                                    \t<div style=\"width: {{ value_column_width }}%;float:left;\">\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\n\t                                    </div>\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n    \t                            </div>\n                                {% endif %}\n                            </div>\n                        </div>\n                    \t<div style=\"width:50%;vertical-align:middle !important;float:left;\">\n                        \t{% set san =  frappe.db.get_value(\"Address\", doc.shipping_address_name, \"address_name\") %}\n                    \t\t<div style=\"width:100%;font-size:14px;\">\n                                <div> \n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\n                                        Name\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\n                                    \t{% if san %} \n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ san }}</B></span>\n                                        {% else %}\n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\n                                        {% endif %}\n                                    </div>\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n                                </div>\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" and not san %}\n                                \t<div>\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t                                    \t&nbsp\n\t                                    </div>\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                        \n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \n\t                                    </div>\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t                                </div>                                                                \t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t{% endif %}                                                                    \n                                {% if customer_details.company_name %}\n                                \t<div>\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t                                    \t&nbsp\n\t                                    </div>\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\n    \t                                </div>\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t                                </div>                            \n                                {% endif %}\n\t\t                    </div>\n\t                    </div>  \n\t\t\t\t\t\t<div style=\"clear:both;\"></div>                                    \t\n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\n                            <div style=\"width: 100%;font-size:12px;\">\n                                <div> \n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\n                                        <span style=\"color:red;\">Billing Address</span>\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;float:left;\">\n                                        <B>{{ doc.address_display }}</B>\n                                    </div>\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n                                </div>\n\t\t\t                    <div>\n\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left\">\n\t\t\t\t                        \t<span style=\"color:red;\">Contact No</span>\n\t\t\t                        </div>\n\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\n\t\t\t                            {% if not doc.contact_person %}\n\t\t\t                                {% set contact_filters = [\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                            %}\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t{% for c in contact_list %}\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t    <b>{{ p.phone }}</b>\n                                    \t        {% endfor %}\n                                    \t    {% endfor %}\n                                    \t{% else %}\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\n                                            \t<b>{{ p.phone }}</b>\n                                    \t    {% endfor %}\n                                    \t{% endif %}\n\t\t\t                        </div>\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t                    </div>    \n\t\t\t\t                {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer, \"pan\") %}                \n\t\t\t\t                {% if customer_pan %}\n\t\t\t\t                <div>\n\t\t\t\t                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t\t\t\t                    \t<span style=\"color:red;\">PAN No</span>\n\t\t\t\t                    </div>\n\t\t\t\t                    <div style=\"width: {{ value_column_width }}%;float:left;\">\n\t\t\t\t                    \t<b>{{ customer_pan }}</b>\n\t\t\t\t                    </div>\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t\t                </div>\n\t\t\t\t                {% endif %}                                \n                            </div>\n                        </div>\n                        {% if doc.shipping_address_name %}                        \n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\n                            <div style=\"width: 100%;font-size:12px;\">\n                                <div> \n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\n                                        <span style=\"color:red;\">Delivery Address</span>\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\n                                        <B>{{ doc.shipping_address }}</B>\n                                    </div>\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n                                </div>\n                                {% if doc.customer_vehicle_no %}\n\t\t\t                    \t<div>\n\t\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t\t\t\t\t                        \t<span style=\"color:red;\">Vehicle No</span>\n\t\t\t\t                        </div>\n\t\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\n\t                                    \t<b>{{ doc.customer_vehicle_no }}</b>                            \n\t\t\t\t                        </div>\n\t\t\t\t                    </div>          \n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n                                {% endif %}\n                            </div>\n                        </div>\n                        {%- endif %}\n\t\t\t\t\t\t<div style=\"clear:both;\"></div>                 \t\n                <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\n\t                <div colspan=2 style=\"width:100%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                    \t<div style=\"width:100%;display:flex;\">\n\t               \t\t{% if doc.hypothecation %}                    \t    \n\t               \t\t    <div style=\"width:100%;font-size:12px;float:left;\">\n                                <div style=\"width:100%;\">\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\n    \t                       \t\t\t\tHypothecation: \n\t                       \t\t\t    </div>\n\t                   \t\t\t\t    <div style=\"overflow:hidden;padding-left:10px;\">\n    \t                       \t\t\t\t<b>{{ doc.hypothecation }}</b>\n\t                       \t\t\t    </div>                        \n                                </div>\n\t               \t\t\t\t{% if doc.reference %}\n                                <div style=\"width:100%;\">\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\n    \t                       \t\t\t\tHYP Reference: \n\t                       \t\t\t    </div>\n\t                   \t\t\t\t    <div style=\"padding-left:10px;float:left;\">\n    \t                       \t\t\t\t<b>{{ doc.reference }}</b>\n\t                       \t\t\t    </div>                        \n                                </div>\n                                {% endif %}\n\t                    \t</div>                                                        \n\t              \t\t{% endif %} \n\t              \t\t{% if doc.po_no %}\n    \t               \t\t<div style=\"width:100%;font-size:12px;\">\n                                <div style=\"width:100%;\">\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\n    \t                       \t\t\t\tPurchase Order No: \n\t                       \t\t\t    </div>\n\t                   \t\t\t\t    <div style=\"overflow:hidden;padding-left:10px;\">\n    \t                       \t\t\t\t<b>{{ doc.po_no }}</b>\n\t                       \t\t\t    </div>                        \n                                </div>\n                                <div style=\"width:100%;\">\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\n    \t                       \t\t\t\tPurchase Order Date: \n\t                       \t\t\t    </div>\n\t                   \t\t\t\t    <div style=\"float:left;padding-left:10px;\">\n    \t                       \t\t\t\t<b>{{ doc.get_formatted(\"po_date\") }}</b>\n\t                           \t\t\t</div>                        \n                                </div>\n                            </div>\n\t              \t\t{% endif %}                       \n                       </div>\n\t                </div>                    \n                </div> \n            </div>\n        </div>\n    </div>\n    </div>\n    <div style=\"width:100%;height: 40px !important;bottom: 0;position: sticky;margin-top:2px;font-size: 11px;text-transform:uppercase;\">\n    <!-- <div style=\"height: 100%;width: 100%;word-wrap:break-word;\"> -->\n        <!-- Column Headings -->\n    \t<div style=\"width: 100%;background: #eee !important;min-height: 15%;height: 40px;font-weight: 600;border-bottom: 1px solid #eee;text-align:center;display:flex;align-items:center;border-bottom:1px solid gray;\">\n            <div style=\"width: {{ column_widths.serial_no_column_width }};vertical-align:middle !important;\">Sr</div>\n            <div style=\"width: {{ column_widths.hsn_no_column_width }};vertical-align:middle !important;\">HSN<br/>Code</div>\n            <div style=\"width: {{ column_widths.description_column_width }};vertical-align:middle !important;\">Item Name</div>\n            <div style=\"width: {{ column_widths.qty_column_width }};vertical-align:middle !important;\">Qty</div>\n            <div style=\"width: {{ column_widths.rate_column_width }};vertical-align:middle !important;\">Rate</div>\n            <div style=\"width: {{ column_widths.amount_column_width }};vertical-align:middle !important;\">Amount</div>\n            {% if taxes_as_columns %}\n            \t{{ attach_tax_columns_headers() }}\n            {% endif %}                        \n        </div>\n    <!-- </div> -->\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;display: flex;flex-direction:column;flex:1;\">\n\t\t<!-- CONTINUED BAND -->\n\t\t{% if not islast %}\n\t\t<div style=\"width: 100%;padding-top: 10px;padding-bottom:10px;\">\n\t\t\t<div style=\"width: 100%;\">\n\t        \t<div style=\"text-align:right;\">\n\t\t                <b>Continued ... </b>\n\t\t        </div>\n            </div>\n\t\t</div>\n\t\t{% endif %}\n        <!-- END CONTINUED BAND -->\n                \n        <!-- TAXES BAND -->\n\t\t{% if islast  and doc.taxes|length > 0 %}\n\t\t<div style=\"width: 100%;padding-top:2px;display:flex;flex-direction:column;\">\n\t\t\t\t{{ print_taxes_charges() }}\n        </div>\n\t\t{% endif %}\n        <!-- END TAXES BAND -->\n\n\t\t<!-- TOTAL BAND -->\n\t\t{% if islast %}\n        <div style=\"width: 100%;min-height:35px;background:#eee !important;font-size:11px;\">\n        \t<div style=\"float:left;width:60%;height:100%;padding-top:5px;\">\n\t\t\t\t\t{{ frappe.utils.money_in_words(doc.grand_total) }}\n\t\t\t</div>\n            <div style=\"width:40%;font-size:14px;vertical-align: middle !important;text-align:right;float:left;height:100%;padding-top:5px;padding-right:1px;\">\n                \t<span style=\"text-transform:uppercase;\">Total</span> <b>{{ doc.get_formatted(\"grand_total\") }}</b>\n            </div>\n        </div>\n\t\t{% endif %}\n        <!-- END TOTAL BAND -->\n        \n        \n     {% set lower_header_height = \"60%\" %}\n     {% if not (islast and doc.taxes|length > 0) %}\n         {% set lower_header_height = \"60%\" %}\n     {% endif %}\n     <div style=\"width: 100%;flex:1;\">\n     \t\t<hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;height:1px !important;\"></hr>\n            <div style=\"display:flex;flex:1;flex-direction:row;\">\n\t            <div style=\"padding-right:5px;flex:.6;flex-grow:.7;\">\n\t\t\t\t\t\t<div style=\"width:100%;font-size:10px;background: #eee !important;\">\n                        \t<b>Terms & Conditions</b>\n                        </div>\t\t\t\t\t   \n\t\t\t\t\t\t<div style=\"font-size: 9px;\">\n\t\t\t\t\t\t\t{{ doc.terms or \"\" }}\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t            <div style=\"margin-left:10px;overflow:hidden;font-size:11px;display:flex;flex-direction:column;flex:.30;\">\n                \t<div style=\"width:100%;\">\n                    \t<div style=\"width:100%;background:#eee !important;padding-left:5px;\">\n\t                    \t<span style=\"font-size:10px;\"><b>Company's Registration Details</b></span>\n                        </div>\n\t\t\t\t\t\t<div style=\"padding-left:5px;\">\n\t\t\t\t\t\t\t{{ frappe.db.get_value(\"Company\", doc.company, \"registration_details\") or \"\" }} \n\t\t\t\t\t\t</div>          \n                    </div>\n                    <div style=\"padding-top:10px;flex:1;\">\n                    \t<div style=\"background:#eee !important;width:100%;padding-left:5px;\">\n                    \t\t<b>Transportation Details</b>\n                        </div>\n                        <div style=\"padding-left:5px;\">\n                        \tVehicle No: {{ doc.vehicle_no or \"\" }}\n                        \t<br/>Date & Time of Supply: {{ doc.date_time_of_supply or \"\" }}\n                        \t<br/>Place of Supply: {{ doc.place_of_supply or \"\" }}\n                       </div>\n                    </div>\n\t            </div>\n\t\t\t\t{% if doc.irn or doc.qrcode_image %}\n\t\t\t\t\t<div style=\"flex:.10;padding:5px;flex-grow:.2;\">\n\t\t\t\t\t\t<img src=\"{{ doc.qrcode_image }}\">\n\t\t\t\t\t</div>\n\t\t\t\t{% endif %}\n            </div>\n            {% if doc.irn or doc.qrcode_image %}\n                <div style=\"width:100%;background: #eee;\">\n                    IRN No: {{ doc.irn }}\n                </div>\n            {% endif %}\n     </div>\n     <div style=\"width: 100%;bottom:0px;font-size:12px;\">    \n        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;height:1px !important;\"></hr></div>\n     \t<div style=\"width:100%;min-height:60px;display:flex;flex-direction:column;\">\n\t        <div style=\"height: 35%;background: #eee !important;flex:.50;display:flex;\">\n                <div style=\"height: 20%;width: 33%; text-align: left;\">\n                      <!-- Intentionally Left Blank -->\n                </div>\n\t            <div style=\"height: 20%;width: 34%; text-align: center;\">\n\t                <!-- Intentionally Left Blank -->\n\t            </div>                                            \n\t            <div style=\"height: 100%;width: 33%; text-align: right;padding-bottom:25px !important;\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </div>\n\t        </div>\n\t        <div style=\"background: #eee !important;padding-bottom:2px;flex:.50;display:flex;\">\n\t            <div style=\"height: 20%;width: 33%; text-align: left;padding-left: 10px !important;\">\n\t                Receivers Signature\n\t            </div>            \n\t            <div style=\"height: 20%;width: 34%; text-align: center;\">\n\t                E. & O.E.\n\t            </div>                            \n\t            <div style=\"height: 20%;width: 33%; text-align: right;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Manager</span>\n\t            </div>\n\t        </div>            \n         </div>\n     </div>\n    \n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n{% macro print_serialno(itemcode, serialnos) %}\n       {% if serialnos != None -%}\n           \t<div style=\"color:brown;font-size:11px;margin-left:5px;\">\n           \t{% set item_is_vehicle = frappe.db.get_value(\"Item\",itemcode,\"is_vehicle\") %}\n            {% if item_is_vehicle %}\n                  \tChassis No: \n            {% else %}\n                    Serial No:\n            {% endif %}                                                                                                \n            {%- for serial in serialnos.split('\\n') -%}   \n                {% if serial != '' %}\n                   {# set serialdoc = frappe.get_doc(\"Serial No\",serial|trim) #}\n\t               <p style=\"display:inline;\">\n\t                      \t{# serialdoc.serial_no #}\n\t                      \t{{ serial }}\n\t               </p>\n\t\t        {%- endif %}\n\t\t    {%- endfor %}\n            </div>\n\t\t{%- endif %}\t\n{% endmacro %}\n\n\n{% macro do_body() -%}\n\t\t\t\t<!-- Inner Body Container -->\n\t            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\n\n\t\t\t\t    {# set items = doc.items|sort(attribute='item_code') #}\n                    {% set items = doc.items %}\n                    {% set item_index = {'index':0} %}\n                   \n                    {%- for row in items -%}\n\n                        {% if loop.index % 2 == 0 -%}\n                        <!-- Do Something / Alternative Rows -->\t   \n                        {%- endif %}\n\n                        <div style=\"min-height: {{ row_height }};height: {{ row_height }};border-bottom:1px solid #eee;overflow:hidden;display:flex;width:100%;\">\n                            <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;display:table-cell;\">\n                            \t\t{{ loop.index }} \n                            </div>\n                            <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\">\n                            \t\t{{ row.gst_hsn_code }} \n                            </div>                            \n                            <div style=\"width: {{ column_widths.description_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\"> \n                            \t<div style=\"height: {{ row_height }};\">\n                                    {% if row.brand %}\n\t                                <div style=\"display:inline;\">\n\t                                    {{ row.brand }} \n\t                                </div>\n                                    {% endif %}\n\t                                <div style=\"display:inline;\">\n\t                                \t{{ row.item_name }}\n\t\t                            </div>\n                                    <div style=\"display:inline;\">\n                                    \t<div class=\"description_div\" style=\"color:blue;margin-left:5px;\">\n                                    \t\t<I>{{ row.description }}</I>\n                                        </div>\n                                    </div>\n                                                                       \n                                    <!-- SALES INVOICE ROW SERIAL NO -->\n                                    {{ print_serialno(row.item_code, row.serial_no) }}\n                                    <!-- SALES INVOICE ROW SERIAL NO -->\n                                    \n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\n                                    {% if doc.packed_items %}\n                                       <div style=\"margin-left:10px;\">\n                                    \t{% for packs in doc.packed_items %}\n                                        \t{% if packs.parent_item == row.item_code %}\n                                            <div>\n\t\t\t\t                                <div style=\"display:inline;\">\n\t\t\t\t                                \t{{ packs.item_name }}\n\t\t\t\t\t                            </div>\n\t\t\t                                    <div style=\"display:inline;\">\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.description }} </span></I>\n\t\t\t                                    </div>\n\t\t\t                                    <div style=\"display:inline;\">\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.get_formatted(\"qty\", doc) }} {{ packs.uom or packs.stock_uom }} </span></I>\n\t\t\t                                    </div>          \n                                                {{ print_serialno(packs.item_code, packs.serial_no) }}\n\t\t                                    </div>\t\n                                            {% endif %}\n                                        {% endfor %}\n                                      </div>\n                                    {% endif %}\n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\n                                    \n                                    <!-- PRINT REMARKS -->\n                                    {% if row.remarks %}\n                                    <span style=\"font-size:9px;\">                                    \n                                        <div style=\"width:100%;\">\n                                        \t<div style=\"float:left;margin-left:5px;\">\n                                        \t\tRemarks:\n                                            </div>\n                                            <div style=\"width:85%;float:left;\">\n                                            \t{{ row.remarks }}\n                                            </div>\n                                       </div>\n                                    </span>                                       \n                                    {% endif %}\n                                    \n                                </div>\n                            </div>\n                            \n                            <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n                                \t{{ row.get_formatted(\"qty\", doc) }} {{ row.uom or row.stock_uom }}\n                            </div>\n                            <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n                                \t{{ frappe.utils.fmt_money(row.net_rate) }}\n                            </div>\n                            <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n                                \t{{ frappe.utils.fmt_money(row.net_amount) }}\n                            </div>     \n            \t\t\t\t{% if taxes_as_columns %}\n            \t\t\t\t\t{{ attach_tax_columns(row,current_item,loop.first) }}\n            \t\t\t\t{% endif %}                                                                                    \n                            <div style=\"clear:both;\"></div>\n                        </div>\n\n                    {% if item_index.update({'index':item_index.index+1}) %}{% endif %}\n                    \n\t                <!-- Page Break Logic Here -->\n\t                {% if ((item_index.index % display_rows_per_page == 0  and item_index.index < doc.items|length and item_index.index != 0) or row.page_break) and total_pages|length < total_pages_as_per_rows  %}\n\t\t                <!-- Fill Empty Space -->\n                        {{ insert_vertical_lines(false) }}\n                        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\n                        \n\t\t\t\t\t\t<!-- Need to Inner Body Container Used Above -->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- Page Break -->\n\t\t\t\t\t\t\t{{ insert_page_break(true) }}\n\t\t\t\t\t\t\t{% if item_index.update({'index':0}) %}{% endif %}\n                            \n\t\t\t\t\t\t\t<!-- Inner Body Container -->\n                            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\n\t                {% endif %}\n                    <!-- End Page Break Logic -->\n                \n                {% endfor %}\n\n                <!-- Fill Empty Space -->\n                {{ insert_vertical_lines(true) }}\n\t\t\t\t<div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\n                \n                <!-- End Inner Body Container -->\n                </div>\n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <!-- <div style=\"height: 100%\"></div> -->\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\n\t\t\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \n\t\t\t\t\t{{ setfooter(false) }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \n\n\t\t\t\t<!-- New Body Container -->\n\t\t\t\t<div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\n\n\t{% endif %}\n{%- endmacro %}\n\n<!-- Set Global Default font -->\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n    <!-- Set Header -->\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\n\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n\n</div>\n<!-- End Font -->\n</span>\n<script>\n    console.log(\"Hello from Print Format\");\n    \n</script>\n",
  "line_breaks": 0,
  "modified": "2023-02-02 17:45:36.928885",
  "module": "Accounts",
  "name": "Sales Invoice Standard",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Payment Entry",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "{% set display_rows_per_page = 3 %}\n{% set row_height = 40 %}\n{% set div_page_height = \"5.25in\" %}\n{% set div_max_page_height = \"5.25in\" %}\n{% set min_page_height = \"5.25in\" %}\n{% set min_page_width = \"8.3in\" %}\n{% set max_page_height = \"11.69in\" %}\n{% set max_page_width = \"8.3in\" %}\n{% set preferred_page_height = \"11.69in\" %}\n{% set preferred_page_width = \"8.3in\" %}\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set header_height = \"45%\" %}\n{% set footer_height = \"20%\" %}\n{% set body_height = \"initial\" %}\n{% set page_padding = \"1cm\" %}\n\n\n\n<style>\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;\n    }\n    .print-format-gutter {\n        height: 100%;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ min_page_height }} !important;\n            max-width: {{ max_page_width }} !important;\n            padding: {{ page_padding }};\n            background-color: white;\n            margin: auto;\n            display: table !important;\n            width: 100%;\n        }\n        .print-format.print-format-preview > .page-preview {\n            position: absolute;\n        }\n    }\n    @media print {   \n    \thtml{\n\t        height:100%;\n\t        position:relative\n\t    }    \n    \t@page {\n            //size: A5 landscape;\n            margin: {{ page_padding }};\n        }\n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            max-height: {{ max_page_height }}\n            display: table;\n        }\n        body .img {\n            width: auto !important;\n            height: auto !important;\n            max-width: auto !important;\n        }\n    }\n</style>\n\n\n\n<!-- Macro for Header -->\n{% macro setheader() -%}\n<div style=\"width: 100%;height:100%;\">\n    <table style=\"width: 100%;height:100%\">\n        {% if letter_head and not no_letterhead -%}\n        <tr>\n            <td colspan=\"100%\" style=\"width: 100%;padding-bottom: 3px !important;background:white !important;\">\n                {{ letter_head }}\t\n            </td>\n        </tr>\n        <tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></td></tr>\n        {%- endif %}\n        <tr style=\"height:100%;\">\n            <td colspan=\"100%\" style=\"width: 100%;padding: 0px !important;\">\n                <div style=\"height:65px;max-height: 65px;overflow: hidden;padding-top:3px;background: #eee !important;padding-bottom: 3px;\">\n                    <table style=\"width: 100%;height:100%;\">\n                        <tr>\n                            <td style=\"height: 100%;width: 20%;color: black;font-size: 12px;text-transform: uppercase;text-align: left;vertical-align: middle !important;padding-left:5px !important;\">\n                                <B>{{ doc.reporting_name or doc.name }}</B>\n                            </td>\t\t\t\t\t\n                            <td style=\"width: 60%;color: black;text-align: center;vertical-align: middle !important;\">\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"Receipt\" }}</B></span>\n                            </td>\t\t\t\t\t\n                            <td style=\"height: 100%;width: 20%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important;padding-right:5px !important;\">\n                                <B>Date: {{ doc.get_formatted(\"posting_date\") }}</B>\n                            </td>\t\t\t\t\t\n                        </tr>\n                    </table>\n                </div>\n                <table style=\"border-collapse: collapse;width: 100%;margin-top:10px;margin-left:5px;margin-right:5px;\">\n                    <tr>\n                        <td style=\"width: 40%;vertical-align: center;\">\n                            <table style=\"width: 100%;font-size:13px;\">\n                                <tr> \n                                    <td style=\"width: 14%;\">\n                                        <span style=\"color:red;font-size: 13px;\">Name</span>\n                                    </td>\n                                    <td style=\"width: 100%\">\n                                        <span style=\"font-size: 13px;text-align: left;\"><B> {{ doc.party_name }} </B></span>\n                                    \t{% set coname = frappe.db.get_value(\"Customer\", doc.party, \"company_name\") %}\n                                        {% if coname %}\n                                    \t\t<span style=\"font-size:12px;text-align: left;\"><br/><B>C/O {{ coname }}</B></span>\n                                        {% endif %}                                        \n                                        <span style=\"font-size: 13px;text-align: left;\">\n                                            <br/>Phone:\n\t\t\t                                        {% set contact_filters = [\n                                                            [\"Dynamic Link\", \"link_doctype\", \"=\", doc.party_type],\n                                                            [\"Dynamic Link\", \"link_name\", \"=\", doc.party],\n                                                            [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                                    %}\n                                        \t        {% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t        {% for c in contact_list %}\n                                        \t            {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t            <b>{{ p.phone }}</b>\n                                    \t                {% endfor %}\n                                    \t            {% endfor %}\n                                        </span>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                        <td style=\"width: 100%;\" rowspan=\"100%\">\n                            {% if doc.party_address -%}\n                            <table style=\"width: 100%;font-size:13px;\">\n                                <tr> \n                                    <td style=\"width: 15%\">\n                                        <span style=\"color:red;\">Address</span>\n                                    </td>\n                                    <td style=\"width: 100%\">\n                                        <B>{{ doc.address }}</B>\n                                    </td>\n                                </tr>\n                            </table>\n                            {%- endif %}\n                        </td>                        \n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;position:relative;\">       \n     <div style=\"width: 100%;background: #eee !important;height:60%;max-height:60%;bottom:0px;position:absolute;\">\n\t     <table style=\"width: 100%;height: 100%;\">\n         \t<tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></td></tr>\n\t        <tr style=\"height: 35%;\">\n                <td style=\"width:50%;text-align:left;\"><span style=\"padding-left:10px;\">Cheque Payment(s) are Subject to Realization</span></td> \n\t            <td style=\"height: 100%;width: 100%; text-align: right;\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td style=\"height: 20%;width: 100%; text-align: right;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Manager</span>\n\t            </td>\n\t        </tr>\n\t    </table>\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n{% macro do_body() -%}\t\t\n\t<table style=\"width:100%;height:100%;margin-top:20px;margin-left:5px;margin-right:5px;\">\n    \t<tr>\n        \t<td style=\"width:70%;padding-bottom: 20px !important;\">\n            \tReceived with Thanks <b> {{ doc.in_words }} </b>\n            </td>\n        \t<td style=\"width:30%;height:100%;vertical-align:middle !important;text-align:right;padding-right:20px !important;\" rowspan=\"100%\">\n            \t<span style=\"font-size:16px;font-weight:800;\"> {{ doc.get_formatted(\"paid_amount\") }} </span>\n            </td>            \n        </tr>\n        \t{% set base_mode = frappe.db.get_value(\"Mode of Payment\", doc.mode_of_payment, \"base_mode\") %}\n        \t<tr><td style=\"padding-top:40px !important;\">Mode of Payment: <b>{{ base_mode }}</b></td></tr>\n            {% if doc.base_mode != \"Cash\" %}\n            \t{% if doc.reference_no %}\n            \t\t<tr><td>Instrument/Batch No: {{ doc.reference_no }}</td></tr>\n                {% endif %}\n                {% if doc.cheque_bank %}\n                \t<tr><td>Instrument Bank : {{ doc.cheque_bank }}</td></tr>\n                {% endif %}\n                {% if doc.reference_date %}\n                \t<tr><td>Instrument Date: {{ doc.get_formatted(\"reference_date\") }}</td></tr>\n                {% endif %}\n            {% endif %}\n    </table>\n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <div style=\"height: 100%\"></div>\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;\">\n\t\t        {{ setfooter(false) }}\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;\">\n\n\t\t        <!-- New Body Container -->\n\t\t        <div style=\"width:100%;height: 100%;\">\t\n\n\t{% endif %}\n{%- endmacro %}\n\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\n\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n\t<!-- Dummy Div for Background -->\n    <div style=\"height:100%;width:100%;display:flex;flex-direction:column;flex:1;\">\n\n    <!-- Set Header -->\n    <div style=\"background: {{ header_background }};padding-bottom:20px;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex-grow:1;\">\n\n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;\">\n\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n    \n    </div>\n\n</div>\n",
  "line_breaks": 0,
  "modified": "2022-02-28 18:21:11.329674",
  "module": "Accounts",
  "name": "Receipt Print Format",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Quotation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 57.0.2987.133 -->\n{% set display_rows_per_page = 8 %}\n{% set row_height = \"auto\" %}\n{% set div_page_height = \"100%\" %}\n{% set div_max_page_height = \"100%\" %}\n{% set min_page_height = \"11.69in\" %}\n{% set min_page_width = \"8.26in\" %}\n{% set max_page_height = \"11.69in\" %}\n{% set max_page_width = \"8.26in\" %}\n{% set preferred_page_height = \"11.69in\" %}\n{% set preferred_page_width = \"8.26in\" %}\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set header_height = \"initial\" %}\n{% set max_header_height = \"initial\" %}\n{% set footer_height = \"initial\" %}\n{% set max_footer_height = \"initial\" %}\n{% set body_height = \"initial\" %}\n{% set max_body_height = \"100%\" %}\n{% set page_padding = \"1cm\" %}\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\n{% endif %}\n<!-- FLAG to Enable/Disable Tax Analysis -->\n{% set print_tax_analysis = true %}\n{% set global_default_font = \"Monospace\" %}\n\n{% set serial_no_column_width = \"4%\" %}\n{% if doc.is_inclusive_of_taxes==1 %}\n    {% set description_column_width = \"34%\" %}\n{% else %}\n    {% set description_column_width = \"48%\" %}\n{% endif %}\n{% set item_tax_column_width = \"10%\" %}\n{% set qty_column_width = \"10%\" %}\n{% set rate_column_width = \"14%\" %}\n{% set amount_column_width = \"14%\" %}     \n\n\n{% set tax_line_counter = {'tl':1} %}\n{% set tax_line_max_length = 8 %}\n{% set tax_analysis_div_width = \"50%\" %}\n{% set tax_analysis_row_left = \"60%\" %} \n{% set tax_analysis_row_right = \"40%\" %}\n{% set table_border = \"1px solid gray !important\" %}\n\n<!-- DONT EDIT STYLE BELOW -->\n<style>\n    html{\n        height:100%;\n        position:relative\n    }\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;        \n    }\n    .print-format-gutter {\n        height: 100%;\n    }\n    .comp-reg br {\n    \tdisplay: none;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ min_page_height }};\n            max-width: {{ max_page_width }};\n            padding: {{ page_padding }};\n            background-color: white;\n            box-shadow: 0px 0px 9px rgba(0,0,0,0.5);\n            margin: auto;\n            display: table;\n            width: 100%;\n        }\n    }\n    @media print {    \n    \t@page {\n            size: {{ preferred_page_width }} {{ preferred_page_height }} portrait;\n            margin: {{ page_padding }};\n        }    \n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            display: table;\n        }\n    }\n    @media all {\n \t\ttable.body-table tbody tr td {\n    \t\tborder-left-style:solid !important;\n            border-left-color:gray !important;\n            border-left-width:1px !important;\n\t\t}\n        table.body-table tbody tr td:nth-child(1) {\n        \tborder: none !important;\n        }    \n    }\n</style>\n<!-- DONT EDIT STYLE ABOVE -->\n<!-- Macro for Header -->\n{% macro setheader() -%}\n{% set header_column_width=20 %}\n{% set value_column_width=80 %}\n<div style=\"width: 100%;height:100%;\">\n\t<div style=\"width:100%;overflow: hidden\">\n    <table style=\"width: 100%;height:100%\">\n        {% if letter_head and not no_letterhead -%}\n        <tr>\n            <td colspan=\"100%\" style=\"width: 100%;padding-bottom: 3px !important;\">\n                {{ letter_head }}\t\n            </td>\n        </tr>\n        {% endif %}\n        <tr>\n        \t<td>\n                <div class=\"comp-reg\">\n\t\t\t\t\t<span style=\"font-size: 10px;\">\n\t\t\t\t\t\t{{ frappe.db.get_value(\"Company\", doc.company, \"registration_details\") or \"\" }} \n\t\t\t\t\t</span>                    \n                </div>            \n            </td>\n        </tr>\n        <tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;margin-top:10px !important;\"></hr></td></tr>\n        <tr>\n        \t<td colspan=\"100%\" style=\"padding-top:5px !important;padding-bottom:5px !important;text-align:center;\">\n            \t<span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"QUOTATION\" }}</B></span>\n            </td>\n        </tr>\n        <tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;margin-bottom:5px !important;\"></hr></td></tr>\n        \n        <tr>\n        \t<td style=\"width: 60%;padding-bottom: 3px !important;padding-top:5px !important;\">\n                  <table style=\"width: 100%;font-size:12px;\">\n                       <tr> \n                          <td style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;\">\n                               Name\n                          </td>\n                          <td style=\"width: {{ value_column_width }}%;padding-top:5px !important;\">\n                               <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ doc.customer_name }}</B></span>\n                          </td>\n                       </tr>\n                       <tr>\n\t\t\t\t\t\t  <td style=\"width: {{ header_column_width }}%;\">\n                               \t<!-- Intentionally Left Blank -->\n                          </td>\n                          <td style=\"width: {{ value_column_width }}%;\">\n                             \t{% set coname = frappe.db.get_value(\"Customer\", doc.customer, \"company_name\") %}\n                                {% if coname %}\n                               \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ coname }}</B></span>\n                                {% endif %}\n                         </td>\n                       </tr>\n                       <tr>\n                          <td style=\"width: {{ header_column_width }}%\">\n                                <span style=\"color:red;\">Address</span>\n                          </td>\n                          <td style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;\">\n                                <B>{{ doc.address_display }}</B>\n                          </td>\n                       </tr>\n                       <tr>\n\t\t\t              <td style=\"width: {{ header_column_width }}%;\">\n\t\t\t\t               \t<span style=\"color:red;\">Contact No</span>\n\t\t\t              </td>\n\t\t\t              <td style=\"width: {{ value_column_width }}%;\">\n\t\t\t                            {% if not doc.contact_person %}\n\t\t\t                                {% set contact_filters = [\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                            %}\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t{% for c in contact_list %}\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t    <b>{{ p.phone }}</b>\n                                    \t        {% endfor %}\n                                    \t    {% endfor %}\n                                    \t{% else %}\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\n                                            \t<b>{{ p.phone }}</b>\n                                    \t    {% endfor %}\n                                    \t{% endif %}\n\t\t\t              </td>\n\t\t\t\t\t\t</tr>                    \n                 </table>            \t\n            </td>\n            <td style=\"width: 40%;padding-bottom: 3px !important;padding-top:5px !important;font-size:12px;\">\n            \t<div><B>Reference: {{ doc.name }}</B></div>\n                <div><B>Quote Date: {{ doc.get_formatted(\"transaction_date\") }}</B></div>\n                <div><B>Valid Till: {{ doc.get_formatted(\"valid_till\") }}</B></div>\n            </td>\n        </tr>\n        <tr>\n        \t<td colspan=\"100%\" style=\"width: 100%;padding-bottom: 3px !important;padding-top:15px !important;font-size:12px;\">\n            \t{{ doc.introductory_information }}\n            </td>\n       \t</tr>\n    </table>\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;display: flex;flex-direction:column;padding-top:20px;\">\n\t\t<!-- CONTINUED BAND -->\n\t\t{% if not islast %}\n\t\t<div style=\"width: 100%;padding-top: 20px;padding-bottom:20px;\">\n\t\t\t<table style=\"width: 100%;\">\n\t        \t<tr>\n\t\t            <td style=\"text-align:right;\" colspan=\"100%\">\n\t\t                <b>Continued ... </b>\n\t\t            </td>\n\t\t        </tr>\n\t\t\t</table>\n\t\t</div>\n\t\t{% endif %}\n        <!-- END CONTINUED BAND -->\n        <div style=\"width:100%;display:flex;\">\n\t        <div style=\"width:60%;padding-left:20px;padding-right:20px;\">\n\t\t\t\t<span style=\"font-size:10px;\"><b>Terms & Conditions</b></span>\t\t\t\t\t   \n\t\t\t\t<span style=\"font-size: 10px;\">\n\t\t\t\t\t{{ doc.terms or \"\" }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t        {% if doc.show_bank_details and doc.bank %}\n\t              <div style=\"padding-left:10px;padding-right:30px;\">\n\t              \t{% set bank_det = frappe.get_doc('Bank Detail', doc.bank) %}\n\t                <div style=\"font-size:11px;\"><B>Bank Details</B></div>\n\t                <div style=\"padding-left:10px;\">\n\t\t                <div style=\"font-size:10px;padding-top:3px;\">\n\t\t                \t<B>Bank Name:</B>{{ bank_det.bank_name }} <BR><B>Account Name:</B>{{ bank_det.account_holder_name }} <BR><B>Account No:</B>{{ bank_det.account_number }}\n\t\t                </div>\n\t\t                <div style=\"font-size:10px;\">\n\t\t                \t{% if bank_det.ifsc_code %}\n\t\t                    \t<B>IFSC Code:</B>{{ bank_det.ifsc_code }}\n\t\t                    {% endif %}\n\t\t                    {% if bank_det.micr_code %}\n\t\t                    \t<BR><B>MICR Code:</B>{{ bank_det.micr_code }}\n\t\t                    {% endif %}\n\t\t                    {% if bank_det.swift_code %}\n\t\t                    \t<BR><B>SWIFT Code:</B>{{ bank_det.swift_code }}\n\t\t                    {% endif %}\n\t\t                </div>                \n\t                </div>\n\t              </div>\n\t        {% endif %}      \n        </div>\n        <div style=\"width:100%;padding-top:10px;padding-bottom:10px;\">\n\t\t\t<span style=\"font-size: 12px;\">\n\t\t\t\t{{ doc.closing_comments or \"\" }}\n\t\t\t</span>\n\t\t</div>\n        \n        \n     <div style=\"width: 100%;font-size:12px;padding-right:20px;\">    \n     \t<table style=\"width:100%;min-height:60px;\">\n\t        <tr style=\"height: 35%;\">\n\t            <td style=\"height: 100%;width: 50%; text-align:left;padding-top:20px !important;padding-bottom:30px !important;\">\n\t                <span style=\"padding-right:10px;\">With Regards</span>\n\t            </td>\n\t        </tr>\n\t        <tr style=\"padding-bottom:2px;\">\n\t            <td style=\"height: 20%;width: 50%; text-align:left;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </td>\n\t        </tr>            \n\t        <tr style=\"padding-bottom:2px;\">\n\t            <td style=\"height: 20%;width: 50%; text-align:left;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Authorized Signatory</span>\n\t            </td>\n\t        </tr>\n         </table>\n     </div>\n    \n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n{% macro do_body() -%}\n\t<div style=\"width:100%;text-align:center;padding-top:20px;\">\n\t<table style=\"text-align:left;margin:0 auto;width:100%;font-size:12px;\">\n        <!-- Column Headings -->\n    \t<tr style=\"width: 100%;background: #eee !important;min-height: 15%;height: 25px;font-weight: 600;border-bottom: 1px solid #eee;\">\n            <td style=\"width: {{ serial_no_column_width }};vertical-align:middle !important;padding-left:4px !important;\">Sr</td>\n            <td style=\"width: {{ description_column_width }};vertical-align:middle !important;padding-left:4px !important;\">Item Name</td>\n            <td style=\"width: {{ item_tax_column_width }};vertical-align:middle !important;padding-left:4px !important;\">Tax</td>\n            <td style=\"width: {{ qty_column_width }};vertical-align:middle !important;padding-right:4px !important;\" class=\"text-right\">Qty</td>\n            {% if doc.is_inclusive_of_taxes==1 %}\n                <td style=\"width: {{ rate_column_width }};vertical-align:middle !important;padding-right:4px !important;\" class=\"text-right\">Rate W/o Tax</td>\n                <td style=\"width: {{ amount_column_width }};vertical-align:middle !important;padding-right:4px !important;\" class=\"text-right\">Amount W/o Tax</td>\n                <td style=\"width: {{ amount_column_width }};vertical-align:middle !important;padding-right:4px !important;\" class=\"text-right\">Amount with Taxes</td>\n            {% else %}\n                <td style=\"width: {{ rate_column_width }};vertical-align:middle !important;padding-right:4px !important;\" class=\"text-right\">Rate</td>\n                <td style=\"width: {{ amount_column_width }};vertical-align:middle !important;padding-right:4px !important;\" class=\"text-right\">Amount</td>\n            {% endif %}\n        </tr>\n    \t{% for row in doc.items %}\n        \t<tr>\n            \t<td style=\"width: {{ serial_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                       \t<div style=\"height: {{ row_height }};\">\n                       \t\t{{ row.idx }} \n                        </div>\n                </td>\n                <td style=\"width: {{ description_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                      \t<div style=\"height: {{ row_height }};\">\n                           {% if row.brand %}\n    \t                       \t<p style=\"display:inline;\">\n\t                               {{ row.brand }} \n\t                            </p>\n                           {% endif %}\n                           <p style=\"display:inline;\">\n\t                          \t{{ row.item_name }}\n                           </p>\n                           <p style=\"display:inline;\">\n                              \t<div style=\"color:blue;margin-left:5px;\">\n                               \t\t<I>{{ row.description }}</I>                                      \n                                </div>\n                           </p>\n                               {% if row.item_code and row.item_code != row.item_name %}\n                                   <br>Item Code: {{ row.item_code}}</br>\n                               {% endif %}\n                         </div>\n                 </td>\n                 <td style=\"width: {{ item_tax_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                     <div style=\"height: {{ row_height }};\">\n                        {{ row.item_tax_template }}\n                    </div>\n                 </td>\n                 <td style=\"width: {{ qty_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                       \t<div style=\"height: {{ row_height }};\">\n                            \t{{ row.get_formatted(\"qty\", doc) }} {{ row.uom or row.stock_uom }}\n                        </div>\n                 </td>\n                 <td style=\"width: {{ rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                      \t<div style=\"height: {{ row_height }};\">\n                             \t{{ row.get_formatted(\"base_net_rate\", doc) }}\n                        </div>\n                 </td>\n                 <td style=\"width: {{ amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                       \t<div style=\"height: {{ row_height }};\">\n                             \t{{ row.get_formatted(\"base_net_amount\", doc) }}\n                        </div>\n                 </td>                            \n                {% if doc.is_inclusive_of_taxes==1 %}\n                    <td style=\"width: {{ amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border:{{ table_border }};\">\n                       \t<div style=\"height: {{ row_height }};\">\n                             \t{{ row.get_formatted(\"amount\", doc) }}\n                        </div>\n                    </td>\n                {% endif %}\n            </tr>\n        {% endfor %}\n    </table>\n    \t<div>\n\t    \t{% if not doc.is_inclusive_of_taxes %}\n\t        \t(Rates Exclusive of Respective Taxes)\n\t        {% endif %}\n        </div>\n    </div>\n    \n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <div style=\"height: 100%\"></div>\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};overflow: hidden;display:grid;\">\n\t\t\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t\t\t{{ setfooter(false) }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex;flex-direction:column;\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;display:grid;\"> \n\n\t\t        <!-- New Body Container -->\n\t\t        <div style=\"width:100%;height: 100%;\">\t\n\n\t{% endif %}\n{%- endmacro %}\n\n<!-- Set Global Default font -->\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex;flex-direction:column;\">\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n    <!-- Set Header -->\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;display:grid;\"> \n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};overflow: hidden;display:grid;\">\n\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n\n</div>\n<!-- End Font -->\n</span>",
  "line_breaks": 0,
  "modified": "2023-01-15 19:15:07.486643",
  "module": "Selling",
  "name": "Quotation Standard",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 57.0.2987.133 -->\n{% set display_rows_per_page = 8 %}\n{% set row_height = \"auto\" %}\n{% set div_page_height = \"100%\" %}\n{% set div_max_page_height = \"100%\" %}\n{% set min_page_height = \"11.69in\" %}\n{% set min_page_width = \"8.26in\" %}\n{% set max_page_height = \"11.69in\" %}\n{% set max_page_width = \"8.26in\" %}\n{% set preferred_page_height = \"11.69in\" %}\n{% set preferred_page_width = \"8.26in\" %}\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set header_height = \"initial\" %}\n{% set max_header_height = \"initial\" %}\n{% set footer_height = \"initial\" %}\n{% set max_footer_height = \"initial\" %}\n{% set body_height = \"initial\" %}\n{% set max_body_height = \"100%\" %}\n{% set page_padding = \"1cm\" %}\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\n{% endif %}\n<!-- FLAG to Enable/Disable Tax Analysis -->\n{% set print_tax_analysis = true %}\n{% set global_default_font = \"Monospace\" %}\n{% set serial_no_column_width = \"4%\" %}\n{% set hsn_no_column_width = \"10%\" %}\n{% set description_column_width = \"48%\" %}\n{% set qty_column_width = \"10%\" %}\n{% set rate_column_width = \"14%\" %}\n{% set amount_column_width = \"14%\" %}        \n{% set tax_line_counter = {'tl':1} %}\n{% set tax_line_max_length = 8 %}\n{% set tax_analysis_div_width = \"50%\" %}\n{% set tax_analysis_row_left = \"60%\" %} \n{% set tax_analysis_row_right = \"40%\" %}\n\n\n<!-- DONT EDIT STYLE BELOW -->\n<style>\n    html{\n        height:100%;\n        position:relative\n    }\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    @-moz-document url-prefix() {\n    \t.print-format {\n\t        height: 99% !important;\n        }\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;        \n    }\n    .print-format-gutter {\n        height: 100%;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ min_page_height }} !important;\n            max-width: {{ max_page_width }} !important;\n            padding: {{ page_padding }};\n            background-color: white;\n            box-shadow: 0px 0px 9px rgba(0,0,0,0.5);\n            margin: auto;\n            display: table !important;\n            width: 100%;\n        }\n    }\n    @media print {    \n    \t@page {\n            size: {{ preferred_page_width }} {{ preferred_page_height }} portrait;\n            margin: {{ page_padding }};\n        }    \n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            display: table;\n        }\n    }\n    @media all {\n \t\ttable.body-table tbody tr td {\n    \t\tborder-left-style:solid !important;\n            border-left-color:gray !important;\n            border-left-width:1px !important;\n\t\t}\n        table.body-table tbody tr td:nth-child(1) {\n        \tborder: none !important;\n        }    \n    }\n</style>\n<!-- DONT EDIT STYLE ABOVE -->\n\n{% macro vehicle_letter_head() %}\n    <div style=\"width:100%;\">\n        {{ render_template(frappe.db.get_value(\"Letter Head\", \"Geeta Bhawan\", \"content\"),doc) }}\n    </div>\n{% endmacro %}\n\n\n<!-- Macro for Header -->\n{% macro setheader() -%}\n{% set header_column_width=20 %}\n{% set value_column_width=80 %}\n<div style=\"width: 100%;height:100%;\">\n\t<div style=\"width:100%;overflow: hidden\">\n    <div style=\"width: 100%;height:100%\">\n        {% if letter_head and not no_letterhead %}\n            <div style=\"width: 100%;padding-bottom: 3px !important;\">\n                {{ vehicle_letter_head() }}\t\n            </div>\n        <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\n        {% endif %}\n        {% set customer_details = frappe.get_doc(\"Customer\", doc.customer) %}\n        <div style=\"height:100%;\">\n            <div style=\"width: 100%;padding: 1px !important;\">\n                <div style=\"height: 50px;max-height: 50px;overflow: hidden;padding-top:3px;background: #eee !important;\">\n                    <div style=\"width: 100%;height:100%;\">\n                            <div style=\"height: 100%;width: 30%;color: black;font-size: 9px;text-transform: uppercase;text-align: left;vertical-align: middle !important; padding-left: 5px !important;float:left;\">\n                                Page {{ total_pages|length }} of {{ total_pages_as_per_rows }}\n                            </div>\t\t\t\t\t\n                            <div style=\"width: 40%;color: black;text-align: center;vertical-align: middle !important;float:left;\">\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>SALE CERTIFICATE</B></span>\n                                <br/>[See Rule-47 (A) & D]\n                            </div>\t\t\t\t\t\n                            <div style=\"height: 100%;width: 30%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important; padding-right: 5px !important;float:left;\">\n                                <B>Date: {{ doc.get_formatted(\"posting_date\") }}</B>\n                            </div>\t\t\n                            <div style=\"clear:both;\"></div>\n                    </div>\n                </div>\n                <div style=\"font-size:14px;margin-left:5px;margin-top:10px;\">\n                \tCertified that has been delivered by us:\n                </div>\n                <div style=\"border-collapse: collapse;width: 100%;margin-top:20px;line-height:15px;margin-left:10px;\">\n                    <div>\n                        <div style=\"width: 50%;vertical-align: middle !important;\">\n                            <div style=\"width: 100%;font-size:14px;\">\n                            \t<div>\n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\n                                        Name\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\n                                        <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\n                                    </div>\n                                    <div style=\"clear:both;\"></div>\n                                 </div>\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" %}\n                                <div>\n                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n                                    \t<!-- Intentionally Left Blank -->\n                                        &nbsp;\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                    \t                                        \n                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>\n                                    </div>\n                                    <div style=\"clear:both;\"></div>\n                                 </div>\n                                {% endif %}                                \n                                {% if customer_details.company_name %}\n                                <div>\n                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n                                    \t<!-- Intentionally Left Blank -->\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;\">\n                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\n                                    </div>\n                                    <div style=\"clear:both;\"></div>\n                                </div>\n                                {% endif %}                                 \n                            </div>\n                        </div>\n                    \t<div style=\"vertical-align:middle !important;\">\n                    \t\t<div style=\"width:100%;font-size:12px;\">\n                    \t\t\t{% if customer_details.pan_no %}\n                                <div>\n\t                    \t\t\t\t<div style=\"width: {{ header_column_width }}%;color:red;float:left;\">\n\t                        \t\t\t\tPAN \n\t                        \t\t\t</div>\n\t                    \t\t\t\t<div style=\"width: {{ value_column_width }}%;float:left;\">\n\t                        \t\t\t\t<b>{{ customer_details.pan_no }}</b>\n\t                        \t\t\t</div>               \n                                        <div style=\"clear:both;\"></div>\n                                </div>\n                    \t\t\t{% endif %}\n                    \t\t\t{% if customer_details.tax_id %}\n\t                    \t\t\t<div>\n\t                    \t\t\t\t<div style=\"width: {{ header_column_width }}%;color:red;float:left;\">\n\t                        \t\t\t\tVAT \n\t                        \t\t\t</div>\n\t                    \t\t\t\t<div style=\"width: {{ value_column_width }}%;float:left;\">\n\t\t\t\t                        \t<b>{{ customer_details.tax_id }}</b>\n\t\t\t\t                        </div>                        \n                                        <div style=\"clear:both;\"></div>\n\t\t\t\t                    </div>\n\t\t\t                    {% endif %}   \n\t\t                    </div>\n\t                    </div>                        \n                    </div>\n                    <div>\t\n                    \t{% if doc.shipping_address_name and doc.shipping_address_name != doc.customer_address %}\n                        \t<div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\n                        {% else %}                        \n                        \t<div style=\"width: 100%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\n                        {% endif %}\n                            <div style=\"width: 100%;font-size:12px;\">\n                                <div> \n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\n                                        <span style=\"color:red;\">Billing Address\n                                        {% if not doc.shipping_address_name %}\n                                        \t<br/>cum Delivery Address\n                                        {% endif %}\n                                        </span>\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;float:left;\">\n                                        <B>{{ doc.address_display }}</B>\n                                    </div>\n                                    <div style=\"clear:both;\"></div>\n                                </div>\n\t\t\t                    <div>\n\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left;\">\n\t\t\t\t                        \t<span style=\"color:red;\">Contact No</span>\n\t\t\t                        </div>\n\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\n\t\t\t                            {% if not doc.contact_person %}\n\t\t\t                                {% set contact_filters = [\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                            %}\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t{% for c in contact_list %}\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t    <b>{{ p.phone }}</b>\n                                    \t        {% endfor %}\n                                    \t    {% endfor %}\n                                    \t{% else %}\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\n                                            \t<b>{{ p.phone }}</b>\n                                    \t    {% endfor %}\n                                    \t{% endif %}\n\t\t\t                        </div>\n                                    <div style=\"clear:both;\"></div>\n\t\t\t                    </div>                    \n                            </div>\n                        </div>\n                        {% if doc.shipping_address_name and doc.shipping_address_name != doc.customer_address %}                        \n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\n                            <div style=\"width: 100%;font-size:12px;\">\n                                <div> \n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\n                                        <span style=\"color:red;\">Delivery Address</span>\n                                    </div>\n                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\n                                        <B>{{ doc.shipping_address }}</B>\n                                    </div>\n                                    <div style=\"clear:both;\"></div>\n                                </div>\n                            </div>\n                        </div>\n                        {%- endif %}\n                        <div style=\"clear:both;\"></div>\n                    </div>\n                <div style=\"width:100%;\"><hr style=\"margin-top: 0px;margin-bottom: 0px;padding-bottom:3px !important;\"></hr></div>\n                <div>                \n\t                <div style=\"width:100%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n\t               \t\t<div style=\"width:100%;font-size:12px;\">\n\t               \t\t\t{% if doc.hypothecation %}\n\t                  \t\t\t<div>\n\t                   \t\t\t\t<div style=\"width: 100%;\">\n\t                       \t\t\t\tThe Vehicle is held under agreement of H/P./Lease/Hypothecation with: <b>{{ doc.hypothecation }}</b>\n\t                       \t\t\t</div>                        \n\t                   \t\t\t</div>\n\t              \t\t\t{% endif %}\n\t                    </div>\n\t                </div>\n                </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;position:relative;display: flex;flex-direction:column;\">\n     {% set lower_header_height = \"60%\" %}\n     {% if not (islast and doc.taxes|length > 0) %}\n         {% set lower_header_height = \"60%\" %}\n     {% endif %}\n     <div style=\"width: 100%;bottom:0px;position:absolute;font-size:12px;\">    \n        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\n     \t<table style=\"width:100%;min-height:60px;\">\n\t        <tr style=\"height: 35%;background: #eee !important;\">\n                <td style=\"height: 20%;width: 50%; text-align: left;\">\n                      <!-- Intentionally Left Blank -->\n                </td>\n\t            <td style=\"height: 100%;width: 50%; text-align: right;padding-bottom:25px !important;\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </td>\n\t        </tr>\n\t        <tr style=\"background: #eee !important;padding-bottom:2px;\">\n\t            <td style=\"height: 20%;width: 50%; text-align: left;padding-left: 10px !important;\">\n\t                <!-- Intentionally Left Black -->\n\t            </td>            \n\t            <td style=\"height: 20%;width: 50%; text-align: right;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Manager</span>\n\t            </td>\n\t        </tr>\n         </table>\n     </div>\n    \n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n{% macro print_serialno(itemcode, serialnos) %}\n       {% if serialnos != None -%}\n           \t<div style=\"color:brown;font-size:11px;margin-left:5px;\">\n           \t{% set item_is_vehicle = frappe.db.get_value(\"Item\",itemcode,\"is_vehicle\") %}\n            {% if item_is_vehicle %}\n                  \tChassis No: \n            {% else %}\n                    Serial No:\n            {% endif %}                                                                                                \n            {%- for serial in serialnos.split('\\n') -%}   \n                {% if serial != '' %}\n                   {% set serialdoc = frappe.get_doc(\"Serial No\",serial) %}\n\t               <p style=\"display:inline;\">\n\t                      \t{{ serialdoc.serial_no }}\n\t               </p>\n\t               {% if serialdoc.is_vehicle %}\n                   \t\t <br/>\n                   \t\t Engine No: {{ serialdoc.engine_no }} \n\t\t\t\t\t\t <br/>                   \n\t\t               \t Key No: {{ serialdoc.key_no }}                         \n\t\t\t\t   {% endif %}\n\t\t        {%- endif %}\n\t\t    {%- endfor %}\n            </div>\n\t\t{%- endif %}\t\n{% endmacro %}\n\n\n{% macro do_body() -%}\n\n{% set serial_no = frappe.get_doc(\"Serial No\", doc.items[0].serial_no|trim) %}\n{% set item = frappe.get_doc(\"Item\", doc.items[0].item_code) %}\n\n<div style=\"width:100%;height:100%;padding-left:10px;padding-top:20px;font-size:12px;padding-right:10px;\">\nThe Details of the Vehicle are given as below:\n<div style=\"width:100%;height:100%;padding-top:20px;padding-left:15px;line-height:30px;\">\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">1. Class of Vehicle</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.regd_vehicle_name or item.item_code }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t{% set manufacturers_name = frappe.db.get_value(\"Manufacturer\",item.manufacturer,\"full_name\") %}\n    \t<div style=\"width:40%;float:left;\">2. Makers Name</div>\n    \t<div style=\"width:60%;float:left;\">: {{ manufacturers_name }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">3. Chassis Number</div>\n    \t<div style=\"width:60%;float:left;\">: {{ serial_no.name }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">4. Engine Number</div>\n    \t<div style=\"width:60%;float:left;\">: {{ serial_no.engine_no }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">5. Horse Power / Cubic Capacity</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.engine_cc }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">6. Fuel Used</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.fuel_used }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">7. No. of Cylinders</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.no_of_cylinders }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">8. Year of Manufacture</div>\n    \t<div style=\"width:60%;float:left;\">: {{ serial_no.year_of_manufacture }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">9. Seating Capacity</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.seating_capacity }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">10. Unleaden Weight</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.unleaden_weight }}</div>\n    </div>\n    \n    <div style=\"width:100%;\">\n    \t<div> 11. Maximum axle Weight and Number & description of Tyres (Incase of Transport Vehicle)</div>\n        <div style=\"width:100%; padding-left:25px;font-size:11px;\">\n    \t\t<div style=\"width:20%;float:left;\">(a) Front Axle</div>\n    \t\t<div style=\"width:30%;float:left;\">: N.A.</div>\n\t    \t<div style=\"width:20%;float:left;\">(b) Rear Axle</div>\n\t    \t<div style=\"width:30%;float:left;\">: N.A.</div>\n    \t</div>     \n        <div style=\"width:100%; padding-left:25px;font-size:11px;\">\n    \t\t<div style=\"width:20%;float:left;\">(c) Any other Axle</div>\n    \t\t<div style=\"width:30%;float:left;\">: N.A.</div>\n\t    \t<div style=\"width:20%;float:left;\">(d) Tandem Axle</div>\n\t    \t<div style=\"width:30%;float:left;\">: N.A.</div>\n    \t</div>             \n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">12. Color of Body</div>\n    \t<div style=\"width:60%;float:left;\">: {{ serial_no.color }}</div>\n    </div>\n\n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">13. Type of Body</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.type_of_body }}</div>\n    </div>\n    \n\t<div style=\"width:100%;\">\n    \t<div style=\"width:40%;float:left;\">14. Gross Vehicle Weight</div>\n    \t<div style=\"width:60%;float:left;\">: {{ item.gross_vehicle_weight }}</div>\n    </div>\n\n</div>\n\n</div>\n\n\n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <div style=\"height: 100%\"></div>\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;display:grid;min-height:75px;\">\n\t\t\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t\t\t{{ setfooter(false) }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:grid;\"> \n\n\t\t        <!-- New Body Container -->\n\t\t        <div style=\"width:100%;height: 100%;\">\t\n\n\t{% endif %}\n{%- endmacro %}\n\n{% if doc.items[0].is_vehicle == 1 and doc.b2b_vehicles == 0 %}\n\n<!-- Set Global Default font -->\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n    <!-- Set Header -->\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:grid;\"> \n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;display:grid;min-height:75px;\">\n\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n\n</div>\n<!-- End Font -->\n</span>\n\n{% endif %}",
  "line_breaks": 0,
  "modified": "2022-08-04 15:36:15.929065",
  "module": "Accounts",
  "name": "Sale Letter",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "\r\n<!-- TESTED ON CHROME VER 57.0.2987.133 -->\r\n{% set orientation = \"Landscape\" %}\r\n{% set display_rows_per_page = 9 %}\r\n\r\n{% set row_height = \"auto\" %}\r\n{% set div_page_height = \"100%\" %}\r\n{% set div_max_page_height = \"100%\" %}\r\n{% set page_size = {} %}\r\n{% if page_size.update({\"min_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% if page_size.update({\"min_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"max_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% if page_size.update({\"max_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"preferred_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"preferred_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% set header_height = \"initial\" %}\r\n{% set max_header_height = \"initial\" %}\r\n{% set footer_height = \"initial\" %}\r\n{% set max_footer_height = \"initial\" %}\r\n{% set body_height = \"initial\" %}\r\n{% set max_body_height = \"100%\" %}\r\n\r\n{% set footer_background = \"transparent\" %}\r\n{% set header_background = \"transparent\" %}\r\n{% set body_background = \"transparent\" %}\r\n{% set page_padding = \"1cm\" %}\r\n\r\n{% set global_default_font = \"Monospace\" %}\r\n\r\n{% set column_widths = {} %}\r\n{% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\r\n{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\r\n{% if column_widths.update({\"description_column_width\":\"35%\"}) %}{% endif %}\r\n{% if column_widths.update({\"qty_column_width\":\"5%\"}) %}{% endif %}\r\n{% if column_widths.update({\"amount_column_width\":\"10%\"}) %}{% endif %}\r\n{% if column_widths.update({\"rate_column_width\":\"10%\"}) %}{% endif %}\r\n\r\n{% set tax_line_counter = {'tl':1} %}\r\n{% set tax_line_max_length = 8 %}\r\n{% set tax_analysis_div_width = \"50%\" %}\r\n{% set tax_analysis_row_left = \"60%\" %} \r\n{% set tax_analysis_row_right = \"40%\" %}\r\n\r\n{% set taxes_as_columns = true %}\r\n{% set print_tax_analysis = false %}\r\n{% if column_widths.update({\"tax_rate_column_width\":\"6%\"}) %}{% endif %}        \r\n{% if column_widths.update({\"tax_amount_column_width\":\"8%\"}) %}{% endif %}        \r\n\r\n{% set key_index = {} %}\r\n{% set abbr = \" - \"+frappe.db.get_value(\"Company\", doc.company, \"abbr\") %}\r\n\r\n{% macro set_orientation_size() %}\r\n\t{% if orientation != \"Landscape\" %}\r\n\t\t{% if page_size.update({\"min_page_height\":\"11.69in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"min_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"max_page_height\":\"11.69in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"max_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"preferred_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"preferred_page_height\":\"11.69in\"}) %}{% endif %}\r\n    {% endif %} \r\n{% endmacro %}\r\n\r\n{% macro set_column_widths() %}\r\n\t{% set tax_columns = {'ln':0} %}\r\n    {% if taxes_as_columns %}\r\n    \t{% for taxes in doc.taxes %}\r\n\t    \t{% if taxes.charge_type != 'Actual' %}\r\n\t        \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\r\n\t        {% endif %}\r\n    \t{% endfor %}\r\n    {% endif %}\r\n    {% if tax_columns.ln == 0 %}\r\n\t    {% if column_widths.update({\"serial_no_column_width\":\"4%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"9%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"description_column_width\":\"50%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"qty_column_width\":\"7%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"amount_column_width\":\"15%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"rate_column_width\":\"15%\"}) %}{% endif %}\r\n    {% else %}\r\n\t    {% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\t\t\r\n\t\t{% if column_widths.update({\"qty_column_width\":\"3%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"amount_column_width\":\"12%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"rate_column_width\":\"15%\"}) %}{% endif %}\r\n    \t{% if tax_columns.ln == 1 %}\r\n        \t{% if column_widths.update({\"description_column_width\":\"37%\"}) %}{% endif %}\r\n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}        \r\n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \r\n        {% endif %}\r\n    \t{% if tax_columns.ln == 2 %}\r\n        \t{% if column_widths.update({\"description_column_width\":\"30%\"}) %}{% endif %}\t\t\t\r\n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}  \r\n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %}\r\n\t\t\t{% if column_widths.update({\"amount_column_width\":\"11%\"}) %}{% endif %}\r\n\t\t\t{% if column_widths.update({\"rate_column_width\":\"14%\"}) %}{% endif %}            \r\n        {% endif %}        \r\n    {% endif %}\r\n{% endmacro %}\r\n\r\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\r\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\r\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\r\n{% endif %}\r\n\r\n\r\n{{ set_orientation_size() }}\r\n{{ set_column_widths() }}\r\n\r\n<!-- DONT EDIT STYLE BELOW -->\r\n<style>\r\n    body{\r\n        min-height:100% /* force the BODY element to match the height of the HTML element */\r\n    }\r\n    .print-format td {\r\n        padding: 0px !important;\r\n    }\r\n    @-moz-document url-prefix() {\r\n    \t.print-format {\r\n\t        height: 99% !important;\r\n        }\r\n    }\r\n    .print-format {\r\n        height: 100%;\r\n        background-color: initial;\r\n        box-shadow: initial;\r\n        max-width: initial;\r\n        min-height: initial;\r\n        margin: initial;\r\n        padding: initial !important;        \r\n    }\r\n    \r\n    .print-format-gutter {\r\n        height: 100%;\r\n    }\r\n    .description_div br {\r\n       display: none;\r\n    }\r\n    .customer-details div {\r\n        font-size: 12px !important;\r\n        line-height: 15px !important;\r\n    }\r\n    @media screen {\r\n        .page-preview {\r\n            min-height: {{ page_size.min_page_height }} !important;\r\n            max-width: {{ page_size.max_page_width }} !important;\r\n            padding: {{ page_padding }};\r\n            background-color: white;\r\n            box-shadow: 0px 0px 9px rgba(0,0,0,0.5);\r\n            margin: auto;\r\n            display: flex !important;\r\n\t\t\tflex-direction: column;\r\n            width: 100%;\r\n        }\r\n    }\r\n    @media print {    \r\n    \thtml{\r\n\t        height:100%;\r\n\t        position:relative\r\n\t    }    \r\n    \t@page {\r\n            size: {{ page_size.preferred_page_width }} {{ page_size.preferred_page_height }} {{ orientation }};\r\n            margin: {{ page_padding }};\r\n        }    \r\n        body {\r\n            height: 100%;\r\n            -webkit-print-color-adjust: exact !important;\r\n        }\r\n        .page-preview {\r\n            height: 100%;\r\n            width: 100%;\r\n            display: flex;\r\n\t\t\tflex-direction: column;\r\n        }\r\n    }\r\n    @media all {\r\n \t\tcolcell {\r\n    \t\tborder-left-style:solid !important;\r\n            border-left-color:gray !important;\r\n            border-left-width:1px !important;\r\n\t\t}\r\n    }\r\n</style>\r\n<!-- DONT EDIT STYLE ABOVE -->\r\n\r\n<!---------------------------------------------------------------->\r\n<!-------- CUSTOM MACROS FOR LOCAL USE --------------------------->\r\n<!---------------------------------------------------------------->\r\n\r\n{% macro vehicle_letter_head() %}\r\n    <div style=\"width:100%;\">\r\n        {{ render_template(frappe.db.get_value(\"Letter Head\", \"Geeta Bhawan\", \"content\"),doc) }}\r\n    </div>\r\n{% endmacro %}\r\n\r\n{% macro vehicle_terms() %}\r\n<div>\r\n\t<ul>\r\n\t\t<li>Goods once sold will not be taken back.</li>\r\n\t\t<li>Interest @18% per annum would be applicable if payment is not made within 7 days.</li>\r\n\t\t<li>The Firm is not responsible for Breakage / Theft in transit.</li>\r\n\t\t<li>Proof of Identity is required for payments above Rs 7,500/- by Card.</li>\r\n\t\t<li>Warranty as per Manufacturer's Terms and Conditions</li>\r\n\t</ul>\r\n</div>\r\n{% endmacro %}\r\n\r\n{% macro tax_analysis_print_format() %}\r\n <table style=\"height:100%;\">\r\n \t<tr>\r\n    \t<th style=\"width:125px;padding:0px !important;width:100%;\">Model (HSN Code)</th>\r\n\t\t{% for taxes in doc.taxes %}\r\n        \t{% if taxes.charge_type != 'Actual' %}\r\n                <th style=\"min-width:45px;padding:0px !important;text-align:right;\">Rate(%)</th>\r\n        \t\t<th style=\"min-width:70px;padding:0px !important;text-align:right;\">{{ taxes.account_head.split(abbr)[0] }}(Rs)</th>\r\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\r\n            {% endif %}\r\n    \t{% endfor %}\r\n    </tr>\r\n    \r\n    {% set items = doc.items|sort(attribute='item_code') %}\r\n    {% set current_item = {'ci':items[0].item_code} %}\r\n    {% for model in items %}\r\n    \t{% if current_item.ci != model.item_code or loop.first %}\r\n        \t{% if current_item.update({'ci':model.item_code}) %}{% endif %}\r\n    \t<tr>\r\n        \t<td>{{ model.item_code }}({{ frappe.db.get_value(\"Item\", model.item_code, \"gst_hsn_code\") }})</td>\r\n\t\t{% for tax in doc.taxes %}\r\n        \t{% if tax.charge_type != 'Actual' %}\r\n\t\t    \t{% set i = tax.item_wise_tax_detail |json_load %}\r\n\t\t        {% for key, val in i.items() %}\r\n\t            \t{% if key == model.item_code %}\r\n\t\t                <td style=\"text-align:right;\">{{ val[0] }}</td>\r\n\t\t                {% for i in range(key_index[tax.account_head]) %}\r\n\t\t                \t{% if loop.last %}\r\n\t\t                \t  <td style=\"text-align:right;\">{{ val[1] }}</td>\r\n\t\t                    {% endif %}\r\n\t\t                {% endfor %}   \r\n\t                {% endif %}\r\n\t\t        {% endfor %}\r\n            {% endif %}\r\n\t    {% endfor %}\r\n        {% endif %}\r\n        </tr>\r\n    {% endfor %}\r\n    <tr height=\"100%;\"> \r\n         <td style=\"width=125px;\"> </td>\r\n    </tr>            \r\n  </table>\r\n{% endmacro %}\r\n\r\n{% macro do_subtotals() %}\r\n    <!-- DIFFRENT VAT & CHARGES PRINT -->\r\n    {% set max_line_height = \"15px\" %}\r\n\t<div style=\"display:flex;justify-content:flex-end;flex-wrap:wrap;flex-direction:column;align-items:flex-end;width:100%;\">\r\n                \r\n\t\t<!-- SUB TOTAL -->\r\n\t\t<div style=\"width:100%;\">\r\n\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\tTaxable Value\r\n\t\t\t</div>\r\n\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t{{ doc.get_formatted(\"net_total\") }}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t    <!-- END SUB TOTAL -->\r\n                \r\n\t\t{%- for row in doc.taxes -%}\r\n            {% if row.tax_amount != 0 %}\r\n\t\t\t\t<div style=\"width:100%;\">\r\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;height: auto;overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ row.description }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;height: auto;overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ row.get_formatted(\"tax_amount\", doc) }}\r\n\t\t\t\t\t</div>\r\n                    <div style=\"clear:both;\"></div>\r\n\t\t\t\t</div>\r\n            {% endif %}\r\n\t\t{%- endfor -%}\r\n\t</div>\r\n{% endmacro %}\r\n\r\n\r\n{% macro attach_tax_columns_vertical_lines(is_last) %}\r\n\t\t<!-- WAS {'height':\"100%\"} -->\r\n\t\t{% set columnheight = {'height':\"initial\"} %}\r\n\t\t{% if not is_last %}\r\n        \t<!-- WAS {'height':\"100%\"} -->\r\n        \t{% if columnheight.update({'height':\"initial\"}) %} {% endif %}\r\n        {% endif %}\r\n        \r\n\t\t{% set total_len = doc.taxes|length - (doc.taxes|selectattr(\"charge_type\", \"equalto\", \"Actual\")|list)|length %}\r\n\t\t{% for n in range(1, total_len+1) %}\r\n                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;\">&nbsp</div> -->\r\n\t\t\t\t<div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>               \r\n        {% endfor %}       \r\n        <div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>       \r\n        \r\n\t\t{% if is_last %}\r\n\t\t\t{% set tax_columns = {'ln':0} %}\r\n\t\t   \t{% for taxes in doc.taxes %}\r\n\t\t    \t{% if taxes.charge_type != 'Actual' %}\r\n\t    \t    \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\r\n\t\t        {% endif %}\r\n\t    \t{% endfor %}\r\n            {% if tax_columns.ln == 1 %}\r\n            \t{% if tax_columns.update({'width':\"38%\"}) %}{% endif %}\r\n            {% endif %}\r\n            {% if tax_columns.ln == 2 %}\r\n            \t{% if tax_columns.update({'width':\"38%\"}) %}{% endif %}\r\n            {% endif %}            \r\n        \t<div style=\"background:white !important;position:absolute;height:auto;width:{{ tax_columns.width }};border-top:1px solid gray;bottom:0;right:0;margin-right:1px;margin-left:1px;border-left:1px solid gray;display:flex;padding-bottom:4px;padding-top:4px;padding-right:1px;\">\r\n            \t{{ do_subtotals() }}\r\n        \t</div>\r\n        {% endif %}\r\n{% endmacro %}\r\n\r\n{% macro attach_tax_columns_headers() %}\r\n\t\t{% for taxes in doc.taxes %}\r\n        \t{% if taxes.charge_type != 'Actual' %}\r\n                <!-- <div style=\"width:{{ column_widths.tax_rate_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/>(%)</div> -->\r\n        \t\t<div style=\"width:{{ column_widths.tax_amount_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/><span style=\"font-size:10px;\">Amt/Rate(%)</span></div>\r\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\r\n            {% endif %}\r\n       {% endfor %}\r\n       <div style=\"width:{{ column_widths.total_amount_column_width }};vertical-align:middle !important;padding-right:4px !important;float:left;\">Total<br/>(Rs)</div>\r\n{% endmacro %}\r\n\r\n{% macro attach_tax_columns(model, current_item, first) %}\r\n\t{% set total_amt = {'total':0} %}\r\n\t{% for tax in doc.taxes %}\r\n       \t{% if tax.charge_type != 'Actual' %}\r\n\t    \t{% set i = tax.item_wise_tax_detail |json_load %}\r\n\t        {% for key, val in i.items() %}\r\n            \t{% if key == model.item_code %}\r\n\t                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(val[0]) }}</div> -->\r\n\t                {% for i in range(key_index[tax.account_head]) %}\r\n\t                \t{% if loop.last %}\r\n\t                \t  <div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(val[1]) }}<br/><span style=\"font-size:10px;\">{{ frappe.utils.fmt_money(val[0]) }}%</span></div>\r\n                          {% if total_amt.update({'total':total_amt.total+val[1]}) %} {% endif %}\r\n\t                    {% endif %}\r\n\t                {% endfor %}   \r\n                {% endif %}\r\n\t        {% endfor %}\r\n           {% endif %}\r\n\t{% endfor %}\r\n   \t<div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n              \t{{ frappe.utils.fmt_money(model.net_amount+total_amt.total) }}\r\n    </div>                                         \r\n{% endmacro %}\r\n\r\n\r\n{% macro insert_vertical_lines(is_last) %}\r\n      <div style=\"flex:1;display:flex;position:relative;\">\r\n           <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;\"></div>\r\n           <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>                            \r\n           <div style=\"width: {{ column_widths.description_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>\r\n           <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\r\n           <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\r\n           <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>                        \r\n           {% if taxes_as_columns %}\r\n              \t{{ attach_tax_columns_vertical_lines(is_last) }}\r\n           {% endif %}                            \r\n           <div style=\"clear:both;\"></div>\r\n     </div>  \r\n{% endmacro %}\r\n\r\n\r\n{% macro print_taxes_charges() -%}\t\r\n\t<div style=\"display:flex;width:100%;height:100%;flex-grow:1;\">\r\n\t    {% set taxes_band_width = {'analysis':\"70%\",'subtotal':\"30%\"} %}\r\n\t    {% if not print_tax_analysis %}\r\n\t        {% if taxes_band_width.update({'analysis':\"0%\",'subtotal':\"100%\"}) %} {% endif %}\r\n\t    {% endif %}\r\n    \r\n\t\t{% if print_tax_analysis %}    \r\n\t\t\t<div style=\"width:{{ taxes_band_width.analysis }};padding-right:10px;\">        \r\n\t\t\t    \t<div style=\"max-width:50px;float:left;\"><B>TAX BREAKUP</B></div>    \r\n\t\t\t\t       \t{{ tax_analysis_print_format() }}\r\n\t\t\t</div>                 \r\n\t    \t<div style=\"width:{{ taxes_band_width.subtotal }};flex-grow:1;background:#eee !important;\">\r\n\t    \t\t{{ do_subtotals() }}\r\n\t\t    </div>        \r\n\t\t{% endif %}                    \r\n    </div>\r\n{%- endmacro %}\r\n\r\n<!---------------------------------------------------------------->\r\n<!-------- END OF CUSTOM MACROS FOR LOCAL USE -------------------->\r\n<!---------------------------------------------------------------->\r\n\r\n<!-- Macro for Header -->\r\n{% macro setheader() -%}\r\n{% set header_column_width=20 %}\r\n{% set value_column_width=80 %}\r\n{% set long_header_column_width=25 %}\r\n{% set long_header_value_column_width=75 %}\r\n<div style=\"width: 100%;height:100%;\">\r\n\t<div style=\"width:100%;overflow: hidden\">\r\n    <div style=\"width: 100%;height:100%\">\r\n\t\t<div style=\"display:flex;flex-direction:row;\">\r\n\t\t<div style=\"display:flex;flex-direction:column;flex:1;\">\r\n        {% if letter_head and not no_letterhead %}\r\n            <div style=\"width: 100%;padding-bottom: 3px !important;\">\r\n                {{ vehicle_letter_head() }}\t\r\n            </div>\r\n        <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\r\n        {% endif %}\r\n        {% set customer_details = frappe.get_doc(\"Customer\", doc.customer) %}\r\n                <div style=\"height: 85px;max-height: 85px;overflow: hidden;background: #eee !important;flex:1\">\r\n                    <div style=\"width: 100%;\">\r\n\t\t\t        \t<div style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;background:white !important;\">\r\n\t\t\t\t           \t<div style=\"width:100%;font-size:9px;\">\r\n\t\t\t                \t<div style=\"float:right;\">\r\n\t\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\r\n\t\t\t                            <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Triplicate for Supplier</span>\r\n\t\t\t                    </div>\r\n\t\t\t                    <div style=\"float:right;\">\r\n\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\r\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Duplicate for Transporter</span>\r\n\t\t\t                    </div>                                \r\n\t\t\t                \t<div style=\"float:right;\">\r\n\t\t\t                    \t<span style=\"font-family:wingdings;\">o</span>\r\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Original For Recipient</span>\r\n\t\t\t                    </div>                                \r\n\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t\t                </div>\r\n\t\t\t            </div>               \r\n                        <div style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;\">\r\n                            <div style=\"width: 30%;color: black;font-size: 9px;text-transform: uppercase;text-align: left;vertical-align: middle !important; padding-left: 5px !important;float:left;\">\r\n\t                    \t\tTax Payable on Reverse Charge: <b>NO</b>                               \r\n                                <br/>Page {{ total_pages|length }} of {{ total_pages_as_per_rows }}                                \r\n                            </div>\t\t\t\t\t\r\n                            <div style=\"width: 40%;color: black;text-align: center;vertical-align: middle !important;float:left;\">\r\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"Tax Invoice\" }}</B></span>\r\n                            </div>\t\t\t\t\t\r\n                            <div style=\"width: 30%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important; padding-right: 5px !important;float:left;\">\r\n                                <B>{{ doc.reporting_name or doc.name }}<br>Date: {{ doc.get_formatted(\"posting_date\") }}</br> </B>\r\n                            </div>\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\t\t\t</div>\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\r\n        <div style=\"height:100%;\" class=\"customer-details\">\r\n            <div style=\"width: 100%;padding: 1px !important;\">\r\n                <div style=\"border-collapse: collapse;width: 100%;margin-top:2px;line-height:15px;\">\r\n                        <div style=\"width: 50%;vertical-align: middle !important;float:left;\">\r\n                            <div style=\"width: 100%;font-size:14px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\r\n                                        Name\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\r\n                                    \t{# set sal = frappe.db.get_value(\"Customer\", doc.customer, \"salutation\") #}\r\n                                        <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" %}\r\n                                \t<div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                        \r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \r\n\t                                    </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t                                </div>                                                                \r\n\t\t\t\t\t\t\t\t{% endif %}                                    \r\n                                {% if customer_details.company_name %}\r\n\t                                <div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n                                    \t<div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\r\n\t                                    </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n    \t                            </div>\r\n                                {% endif %}\r\n                            </div>\r\n                        </div>\r\n                    \t<div style=\"width:50%;vertical-align:middle !important;float:left;\">\r\n                        \t{% set san =  frappe.db.get_value(\"Address\", doc.shipping_address_name, \"address_name\") %}\r\n                    \t\t<div style=\"width:100%;font-size:14px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\r\n                                        Name\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\r\n                                    \t{% if san %} \r\n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ san }}</B></span>\r\n                                        {% else %}\r\n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\r\n                                        {% endif %}\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" and not san %}\r\n                                \t<div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                        \r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \r\n\t                                    </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t                                </div>                                                                \t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t{% endif %}                                                                    \r\n                                {% if customer_details.company_name %}\r\n                                \t<div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\r\n    \t                                </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t                                </div>                            \r\n                                {% endif %}\r\n\t\t                    </div>\r\n\t                    </div>  \r\n\t\t\t\t\t\t<div style=\"clear:both;\"></div>                                    \t\r\n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\r\n                            <div style=\"width: 100%;font-size:12px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\r\n                                        <span style=\"color:red;\">Billing Address</span>\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;float:left;\">\r\n                                        <B>{{ doc.address_display }}</B>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n\t\t\t                    <div>\r\n\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left\">\r\n\t\t\t\t                        \t<span style=\"color:red;\">Contact No</span>\r\n\t\t\t                        </div>\r\n\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t\t\t                            {% if not doc.contact_person %}\r\n\t\t\t                                {% set contact_filters = [\r\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\r\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\r\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\r\n                                            %}\r\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\r\n                                        \t{% for c in contact_list %}\r\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\r\n                                            \t    <b>{{ p.phone }}</b>\r\n                                    \t        {% endfor %}\r\n                                    \t    {% endfor %}\r\n                                    \t{% else %}\r\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\r\n                                            \t<b>{{ p.phone }}</b>\r\n                                    \t    {% endfor %}\r\n                                    \t{% endif %}\r\n\t\t\t                        </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t\t                    </div>    \r\n                                {% if customer_details.aadhar_card_no %}\r\n                                \t<div>\r\n\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t\t\t\t                        \t<span style=\"color:red;\">Aadhar No</span>\r\n\t\t\t                        </div>\r\n\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n                                    \t<b>{{ customer_details.aadhar_card_no }}</b>\r\n\t\t\t                        </div>                                    \t\r\n                                    <div style=\"clear:both;\"></div>\r\n                                    </div>\r\n                                {% endif %}\r\n\t\t\t\t                {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer, \"pan\") %}                \r\n                            </div>\r\n                        </div>\r\n                        {% if doc.shipping_address_name %}                        \r\n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\r\n                            <div style=\"width: 100%;font-size:12px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\r\n                                        <span style=\"color:red;\">Delivery Address</span>\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n                                        <B>{{ doc.shipping_address }}</B>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n                                {% if doc.customer_vehicle_no %}\r\n\t\t\t                    \t<div>\r\n\t\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t\t\t\t\t                        \t<span style=\"color:red;\">Vehicle No</span>\r\n\t\t\t\t                        </div>\r\n\t\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t                                    \t<b>{{ doc.customer_vehicle_no }}</b>                            \r\n\t\t\t\t                        </div>\r\n\t\t\t\t                    </div>          \r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                {% endif %}\r\n\t\t\t\t                {% if customer_pan %}\r\n\t\t\t\t                <div>\r\n\t\t\t\t                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t\t\t\t                    \t<span style=\"color:red;\">PAN No</span>\r\n\t\t\t\t                    </div>\r\n\t\t\t\t                    <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t\t\t\t                    \t<b>{{ customer_pan }}</b>\r\n\t\t\t\t                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t\t\t                </div>\r\n\t\t\t\t                {% endif %}                                \r\n                                {% if doc.items[0].is_electric_vehicle == 1 %}\r\n                                \t<div>\r\n\t\t\t\t                    \t<div style=\"width: {{ long_header_column_width }}%;float:left;\">\r\n\t\t\t\t\t                        \t<span style=\"color:red;\">Dealer FAME II Code</span>\r\n\t\t\t\t                        </div>\r\n\t\t\t\t                        <div style=\"width: {{ long_header_value_column_width }}%;float:left;\">                                    \r\n\t                                    \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ frappe.db.get_value(\"Item\", doc.items[0].item_code, \"fame_code\") }}</B></span>\r\n                                        </div>\r\n                                \t</div>\r\n                                    <div style=\"clear:both;\"></div>\r\n                                {% endif %}\r\n                            </div>\r\n                        </div>\r\n                        {%- endif %}\r\n\t\t\t\t\t\t<div style=\"clear:both;\"></div>                 \t\r\n                <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\r\n\t                <div colspan=2 style=\"width:100%;padding-bottom: 3px !important;padding-top: 3px !important;\">\r\n                    \t<div style=\"width:100%;display:flex;\">\r\n\t               \t\t{% if doc.hypothecation %}                    \t    \r\n\t               \t\t    <div style=\"width:100%;font-size:12px;float:left;\">\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tHypothecation: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"overflow:hidden;padding-left:10px;\">\r\n    \t                       \t\t\t\t<b>{{ doc.hypothecation }}</b>\r\n\t                       \t\t\t    </div>                        \r\n                                </div>\r\n\t               \t\t\t    {% if doc.reference %}\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tHYP Reference: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"padding-left:10px;float:left;\">\r\n    \t                       \t\t\t\t<b>{{ doc.reference }}</b>\r\n\t                       \t\t\t    </div>                        \r\n                                </div>\r\n                                {% endif %}\r\n\t                        </div>\r\n\t              \t\t{% endif %} \t                    \r\n\t              \t\t{% if doc.po_no %}\r\n    \t               \t\t<div style=\"width:100%;font-size:12px;\">\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tPurchase Order No: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"overflow:hidden;padding-left:10px;\">\r\n    \t                       \t\t\t\t<b>{{ doc.po_no }}</b>\r\n\t                       \t\t\t    </div>                        \r\n                                </div>\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tPurchase Order Date: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"float:left;padding-left:10px;\">\r\n    \t                       \t\t\t\t<b>{{ doc.get_formatted(\"po_date\") }}</b>\r\n\t                           \t\t\t</div>                        \r\n                                </div>\r\n                            </div>\r\n\t              \t\t{% endif %}                       \r\n                       </div>\r\n\t                </div>                    \r\n                </div> \r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n    <div style=\"width:100%;height: 40px !important;bottom: 0;position: sticky;margin-top:2px;font-size: 11px;text-transform:uppercase;\">\r\n    <!-- <div style=\"height: 100%;width: 100%;word-wrap:break-word;\"> -->\r\n        <!-- Column Headings -->\r\n    \t<div style=\"width: 100%;background: #eee !important;min-height: 15%;height: 40px;font-weight: 600;border-bottom: 1px solid #eee;text-align:center;display:flex;align-items:center;border-bottom:1px solid gray;\">\r\n            <div style=\"width: {{ column_widths.serial_no_column_width }};vertical-align:middle !important;\">Sr</div>\r\n            <div style=\"width: {{ column_widths.hsn_no_column_width }};vertical-align:middle !important;\">HSN<br/>Code</div>\r\n            <div style=\"width: {{ column_widths.description_column_width }};vertical-align:middle !important;\">Item Name</div>\r\n            <div style=\"width: {{ column_widths.qty_column_width }};vertical-align:middle !important;\">Qty</div>\r\n            <div style=\"width: {{ column_widths.rate_column_width }};vertical-align:middle !important;\">Rate</div>\r\n            <div style=\"width: {{ column_widths.amount_column_width }};vertical-align:middle !important;\">Amount</div>\r\n            {% if taxes_as_columns %}\r\n            \t{{ attach_tax_columns_headers() }}\r\n            {% endif %}                        \r\n        </div>\r\n    <!-- </div> -->\r\n    </div>\r\n</div>\r\n{%- endmacro %}\r\n<!-- End Macro -->\r\n\r\n\r\n<!-- Footer Macro -->\r\n{% macro setfooter(islast) -%}\r\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \r\n Would Anchor Table to the Bottom of DIV -->\r\n<div style=\"height:100%;width:100%;display: flex;flex-direction:column;flex:1;\">\r\n\t\t<!-- CONTINUED BAND -->\r\n\t\t{% if not islast %}\r\n\t\t<div style=\"width: 100%;padding-top: 20px;padding-bottom:20px;\">\r\n\t\t\t<table style=\"width: 100%;\">\r\n\t        \t<tr>\r\n\t\t            <td style=\"text-align:right;\" colspan=\"100%\">\r\n\t\t                <b>Continued ... </b>\r\n\t\t            </td>\r\n\t\t        </tr>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t\t{% endif %}\r\n        <!-- END CONTINUED BAND -->\r\n                \r\n        <!-- TAXES BAND -->\r\n\t\t{% if islast  and doc.taxes|length > 0 %}\r\n\t\t<div style=\"width: 100%;padding-top:2px;display:flex;flex-direction:column;\">\r\n\t\t\t\t{{ print_taxes_charges() }}\r\n        </div>\r\n\t\t{% endif %}\r\n        <!-- END TAXES BAND -->\r\n\r\n\t\t<!-- TOTAL BAND -->\r\n\t\t{% if islast %}\r\n        <div style=\"width: 100%;min-height:35px;background:#eee !important;font-size:11px;\">\r\n        \t<div style=\"float:left;width:60%;height:100%;padding-top:5px;\">\r\n\t\t\t\t\t{{ frappe.utils.money_in_words(doc.grand_total) }}\r\n\t\t\t</div>\r\n            <div style=\"width:40%;font-size:14px;vertical-align: middle !important;text-align:right;float:left;height:100%;padding-top:5px;padding-right:1px;\">\r\n                \t<span style=\"text-transform:uppercase;\">Total</span> <b>{{ doc.get_formatted(\"grand_total\") }}</b>\r\n            </div>\r\n        </div>\r\n\t\t{% endif %}\r\n        <!-- END TOTAL BAND -->\r\n        \r\n        \r\n     {% set lower_header_height = \"60%\" %}\r\n     {% if not (islast and doc.taxes|length > 0) %}\r\n         {% set lower_header_height = \"60%\" %}\r\n     {% endif %}\r\n     <div style=\"width: 100%;flex:1;\">\r\n     \t\t<hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr>\r\n            <div style=\"display: flex;flex-direction: row;\">\r\n\t            <div style=\"width:65%;float: left;padding-right:5px;flex:.6;\">\r\n\t\t\t\t\t\t<div style=\"width:100%;font-size:10px;background: #eee !important;\">\r\n                        \t<b>Terms & Conditions</b>\r\n                        </div>\t\t\t\t\t   \r\n\t\t\t\t\t\t<div style=\"font-size: 10px;\">\r\n\t\t\t\t\t\t\t{{ vehicle_terms() }}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t            <div style=\"margin-left:10px;overflow:hidden;font-size:11px;flex:.3;\">\r\n                \t<div>\r\n                    \t<div style=\"width:100%;background:#eee !important;padding-left:5px;\">\r\n\t                    \t<span style=\"font-size:10px;\"><b>Company's Registration Details</b></span>\r\n                        </div>\r\n\t\t\t\t\t\t<div style=\"padding-left:5px;\">\r\n\t\t\t\t\t\t\t{{ frappe.db.get_value(\"Company\", doc.company, \"registration_details\") or \"\" }} \r\n\t\t\t\t\t\t</div>          \r\n                    </div>\r\n                    <div style=\"padding-top:10px;padding-bottom:10px;\">\r\n                    \t<div style=\"background:#eee !important;width:100%;padding-left:5px;\">\r\n                    \t\t<b>Transportation Details</b>\r\n                        </div>\r\n                        <div style=\"padding-left:5px;\">\r\n                        \tVehicle No: {{ doc.vehicle_no or \"\" }}\r\n                        \t<br/>Date & Time of Supply: {{ doc.date_time_of_supply or \"\" }}\r\n                        \t<br/>Place of Supply: {{ doc.place_of_supply or \"\" }}\r\n                       </div>\r\n                    </div>\r\n\t            </div>\r\n\t\t\t\t{% if doc.irn or doc.qrcode_image %}\r\n\t\t\t\t\t<div style=\"flex:.1;padding:5px;flex-grow:.2;\">\r\n\t\t\t\t\t\t<img src=\"{{ doc.qrcode_image }}\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{% endif %}\r\n            </div>\r\n            {% if doc.irn or doc.qrcode_image %}\r\n                <div style=\"width:100%;background: #eee;\">\r\n                    IRN No: {{ doc.irn }}\r\n                </div>\r\n            {% endif %}\r\n     </div>\r\n     <div style=\"width: 100%;bottom:0px;font-size:12px;\">    \r\n        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\r\n     \t<table style=\"width:100%;min-height:60px;\">\r\n\t        <tr style=\"height: 35%;background: #eee !important;\">\r\n                <td style=\"height: 20%;width: 33%; text-align: left;\">\r\n                      <!-- Intentionally Left Blank -->\r\n                </td>\r\n\t            <td style=\"height: 20%;width: 34%; text-align: center;\">\r\n\t                <!-- Intentionally Left Blank -->\r\n\t            </td>                                            \r\n\t            <td style=\"height: 100%;width: 33%; text-align: right;padding-bottom:25px !important;\">\r\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\r\n\t            </td>\r\n\t        </tr>\r\n\t        <tr style=\"background: #eee !important;padding-bottom:2px;\">\r\n\t            <td style=\"height: 20%;width: 33%; text-align: left;padding-left: 10px !important;\">\r\n\t                Receivers Signature\r\n\t            </td>            \r\n\t            <td style=\"height: 20%;width: 34%; text-align: center;\">\r\n\t                E. & O.E.\r\n\t            </td>                            \r\n\t            <td style=\"height: 20%;width: 33%; text-align: right;\" colspan=\"100%\">\r\n\t                <span style=\"padding-right:10px;\">Manager</span>\r\n\t            </td>\r\n\t        </tr>            \r\n         </table>\r\n     </div>\r\n    \r\n</div>\r\n{%- endmacro %}\r\n<!-- End Macro -->\r\n\r\n{% macro print_serialno(itemcode, serialnos) %}\r\n       {% if serialnos != None -%}\r\n           \t<div style=\"color:black;font-size:11px;margin-left:5px;\">\r\n           \t{% set item_is_vehicle = frappe.db.get_value(\"Item\",itemcode,\"is_vehicle\") %}\r\n            {% set serial_length = serialnos.split('\\n')|length %}\r\n            {%- for serial in serialnos.split('\\n') -%}   \r\n                {% if serial != '' %}\r\n            \t\t{% if item_is_vehicle %}\r\n\t\t                  \tChassis No: \r\n\t\t            {% else %}\r\n\t\t                    Serial No:\r\n\t\t            {% endif %}                                                                                                                            \r\n                   {% set serialdoc = frappe.get_doc(\"Serial No\",serial) %}\r\n\t               <p style=\"display:inline;\">\r\n\t                      \t{{ serialdoc.serial_no }}\r\n\t               </p>\r\n\t               {% if serialdoc.is_vehicle %}\r\n\t\t\t\t\t\t {% if serialdoc.engine_no %}\r\n\t\t\t\t\t\t\t<br/>\r\n                            {% if serialdoc.is_electric_vehicle == 0 %} Engine No: {% else %} Motor No: {% endif %} {{ serialdoc.engine_no }} \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t {% endif %}\r\n\t\t\t\t\t\t {% if serialdoc.key_no %}\r\n\t\t\t\t\t\t\t<br/>                   \r\n\t\t\t\t\t\t\tKey No: {{ serialdoc.key_no }}  \r\n\t\t\t\t\t\t {% endif %}\r\n                         <br/>\r\n                         Color: {{ serialdoc.color }}\r\n                         {% if serial_length > 2 and loop.index < serial_length-1 %}\r\n                         \t<hr style=\"margin-top:1px !important; margin-bottom:1px !important;border-top:1px dotted;border-color:gray;margin-right:3px !important;margin-left:1px !important;\">\r\n                         {% endif %}\r\n\t\t\t\t   {% endif %}\r\n\t\t        {%- endif %}\r\n\t\t    {%- endfor %}\r\n            </div>\r\n\t\t{%- endif %}\t\r\n{% endmacro %}\r\n\r\n\r\n{% macro do_body() -%}\r\n\t\t\t\t<!-- Inner Body Container -->\r\n\t            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\r\n\r\n\t\t\t\t    {# set items = doc.items|sort(attribute='item_code') #}\r\n                    {% set items = doc.items %}\r\n                   \r\n                    {%- for row in items -%}\r\n\r\n                        {% if loop.index % 2 == 0 -%}\r\n                        <!-- Do Something / Alternative Rows -->\t   \r\n                        {%- endif %}\r\n\r\n                        <div style=\"min-height: {{ row_height }};height: {{ row_height }};border-bottom:1px solid #eee;overflow:hidden;display:flex;width:100%;\">\r\n                            <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;display:table-cell;\">\r\n                            \t\t{{ loop.index }} \r\n                            </div>\r\n                            <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\">\r\n                            \t\t{{ row.gst_hsn_code }}\r\n                                    {% if row.is_vehicle == 1 %} \r\n                                    \t<br/>{{ frappe.db.get_value(\"Serial No\",row.serial_no.split('\\n')[0],\"purchase_date\") | date_to_code }}\r\n                                    {% endif %}\r\n                            </div>              \r\n                            <div style=\"width: {{ column_widths.description_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\"> \r\n                            \t<div style=\"height: {{ row_height }};\">\r\n\t                                <div>                                    \t\r\n\t                                \t{{ row.item_code }}\r\n\t\t                            </div>                                    \r\n                                    {% if row.is_vehicle == 1 %}                                     \r\n                                    \t{% set regd_vehicle_name = frappe.db.get_value(\"Item\", row.item_code, \"regd_vehicle_name\") %}\r\n                                        {% if regd_vehicle_name %}\r\n\t                                \t\t<div>                                    \t\r\n\t\t                                \t\t{{ regd_vehicle_name }}\r\n\t\t\t                            \t</div>\r\n                                        {% endif %}\r\n                                    {% endif %}                                    \r\n                                                                       \r\n                                    <!-- SALES INVOICE ROW SERIAL NO -->\r\n                                    {{ print_serialno(row.item_code, row.serial_no) }}\r\n                                    {% if row.is_vehicle == 1 %}\r\n                                    \t<div style=\"color:black;font-size:11px;margin-left:5px;\">\r\n                                        {% if row.battery_type %}\r\n                                            Battery Chemistry: {{ row.battery_chemistry }}\r\n                                        {% endif %}                                                                                \r\n\t\t\t\t\t\t\t\t\t\t{% if row.battery_serial_no %}\t\t\t\t\t\t\t\t\t\t\r\n                                        \t<br/>                                        \r\n\t\t\t\t\t\t\t\t\t\t\tBattery No: {{ row.battery_serial_no }}\r\n\t\t\t\t\t\t\t\t\t\t{% endif %}\r\n                                        {% if row.service_book_no %}\r\n                                        \t<br/>                                        \r\n                                        \tService Book No: {{ row.service_book_no }}\r\n                                        {% endif %}\r\n                                        {% if row.controller_no %}\r\n                                        \t<br/>\r\n                                            Controller No: {{ row.controller_no }}\r\n                                        {% endif %}                                        \r\n                                        {% if row.battery_manufacturer %}\r\n                                        \t<br/>\r\n                                            Battery Manufacturer: {{ frappe.db.get_value(\"Manufacturer\", row.battery_manufacturer, \"full_name\") }}\r\n                                        {% endif %}\r\n                                        {% if row.battery_manufacturer %}\r\n                                        \t<br/>\r\n                                            Battery Type: {{ row.battery_type }}\r\n                                        {% endif %}\r\n                                        {% if row.charger_no %}\r\n                                        \t<br/>                                        \r\n                                        \tCharger No: {{ row.charger_no }}\r\n                                        {% endif %}                                                                                \r\n                                        </div>\r\n                                    {% endif %}\r\n                                    <!-- SALES INVOICE ROW SERIAL NO -->\r\n                                    \r\n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\r\n                                    {% if doc.packed_items %}\r\n                                       <div style=\"margin-left:10px;\">\r\n                                    \t{% for packs in doc.packed_items %}\r\n                                        \t{% if packs.parent_item == row.item_code %}\r\n                                            <div>\r\n\t\t\t\t                                <div style=\"display:inline;\">\r\n\t\t\t\t                                \t{{ packs.item_name }}\r\n\t\t\t\t\t                            </div>\r\n\t\t\t                                    <div style=\"display:inline;\">\r\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.description }} </span></I>\r\n\t\t\t                                    </div>\r\n\t\t\t                                    <div style=\"display:inline;\">\r\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.get_formatted(\"qty\", doc) }} {{ packs.uom or packs.stock_uom }} </span></I>\r\n\t\t\t                                    </div>          \r\n                                                {{ print_serialno(packs.item_code, packs.serial_no) }}\r\n\t\t                                    </div>\t\r\n                                            {% endif %}\r\n                                        {% endfor %}\r\n                                      </div>\r\n                                    {% endif %}\r\n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\r\n                                    \r\n                                    <!-- PRINT REMARKS -->\r\n                                    {% if row.remarks %}\r\n                                    <span style=\"font-size:9px;\">                                    \r\n                                        <div style=\"width:100%;\">\r\n                                        \t<div style=\"float:left;margin-left:5px;\">\r\n                                        \t\tRemarks:\r\n                                            </div>\r\n                                            <div style=\"width:85%;float:left;\">\r\n                                            \t{{ row.remarks }}\r\n                                            </div>\r\n                                       </div>\r\n                                    </span>                                       \r\n                                    {% endif %}\r\n                                    \r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n                                \t{{ row.get_formatted(\"qty\", doc) }} {{ row.uom or row.stock_uom }}\r\n                            </div>\r\n                            <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n                            \t\t{% if doc.discount_amount > 0 and doc.apply_discount_on == \"Net Total\" %}\r\n                                    \t<div>{{ frappe.utils.fmt_money(row.rate) }}</div>\r\n                                        <div>Discount: -{{ frappe.utils.fmt_money(doc.discount_amount) }}</div>\r\n                                        <div>Net Rate: {{ frappe.utils.fmt_money(row.net_rate) }}</div>\r\n                                    {% else %}\r\n                                    \t{{ frappe.utils.fmt_money(row.net_rate) }}\r\n                                    {% endif %}\r\n                            </div>\r\n                            <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n                                \t{{ frappe.utils.fmt_money(row.net_amount) }}\r\n                            </div>     \r\n            \t\t\t\t{% if taxes_as_columns %}\r\n            \t\t\t\t\t{{ attach_tax_columns(row,current_item,loop.first) }}\r\n            \t\t\t\t{% endif %}                                                                                    \r\n                            <div style=\"clear:both;\"></div>\r\n                        </div>\r\n\r\n\t                <!-- Page Break Logic Here -->\r\n\t                {% if loop.index % display_rows_per_page == 0  and loop.index < doc.items|length %}\r\n\t\t                <!-- Fill Empty Space -->\r\n                        {{ insert_vertical_lines(false) }}\r\n                        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\r\n                        \r\n\t\t\t\t\t\t<!-- Need to Inner Body Container Used Above -->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<!-- Page Break -->\r\n\t\t\t\t\t\t\t{{ insert_page_break(true) }}\r\n                            \r\n\t\t\t\t\t\t\t<!-- Inner Body Container -->\r\n\t\t\t            \t<div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\r\n\t                {% endif %}\r\n                    <!-- End Page Break Logic -->\r\n                \r\n                {% endfor %}\r\n\r\n                <!-- Fill Empty Space -->\r\n                {{ insert_vertical_lines(true) }}\r\n\t\t\t\t<div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\r\n                \r\n                <!-- End Inner Body Container -->\r\n                </div>\r\n{%- endmacro %}\r\n\r\n<!--------------------------------------------------------------------------------------------------->\r\n<!-- Don't Edit the Following Blocks -->\r\n<!-- Instead Use The Macros Above -->\r\n<!--------------------------------------------------------------------------------------------------->\r\n\r\n\r\n{% macro insert_page_break(test_condition) -%}\r\n\t{% if test_condition %} \r\n\r\n\t\t                <!-- Fill Empty Space -->\r\n\t\t                <!-- <div style=\"height: 100%\"></div> -->\r\n\r\n\t\t\t<!-- End Body Container -->\r\n\t\t        </div>\r\n\r\n\t\t    <!-- End Main Body Div -->  \r\n\t\t    </div>\r\n\r\n\t\t    <!-- Set Footer -->\r\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\r\n\t\t\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \r\n\t\t\t\t\t{{ setfooter(false) }}\r\n\t\t\t\t</div>\r\n\t\t    </div>\r\n\r\n\r\n\t\t<!-- End Main Div -->\r\n\t\t</div>\r\n\r\n\r\n\t\t<!-- PAGE BREAK -->\r\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\r\n\r\n\t\t<!-- Logic to Count Total Number of Pages -->\r\n\t\t{% if total_pages.append('1') %} {% endif %}\t\r\n\r\n\t\t<!-- Start Another Main Div Tag -->\r\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">    \r\n\r\n\t\t    <!-- Set New Header -->\r\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\r\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\r\n\t\t\t\t\t{{ setheader() }}\r\n\t\t\t\t</div>\r\n\t\t    </div>\r\n\r\n\r\n\t\t    <!-- Start a New Body -->\r\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \r\n\r\n\t\t\t\t<!-- New Body Container -->\r\n\t\t\t\t<div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\r\n\r\n\t{% endif %}\r\n{%- endmacro %}\r\n\r\n<!-- Set Global Default font -->\r\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\r\n\r\n<!-- Main Div Tag -->\r\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\r\n\t<!-- Logic to Count Total Number of Pages -->\r\n\t{% set total_pages = [1] %}\r\n\r\n    <!-- Set Header -->\r\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\r\n\t\t<div style=\"width: 100%;height:100%;\">\r\n\t\t\t{{ setheader() }}\r\n\t\t</div>\r\n    </div>\r\n\r\n    <!-- Set Body -->\r\n    <!-- Main Body Tag -->\r\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \r\n        <!-- Body Container -->\r\n        <div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\r\n        \r\n        \t{{ do_body() }}\r\n\t\r\n        <!-- End Body Container Div -->\r\n        </div>\r\n\r\n        <!-- End Main Body Div -->            \r\n    </div>\r\n\r\n\r\n    <!-- Set last Footer -->\r\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\r\n\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \r\n\t\t\t{{ setfooter(true) }}\r\n\t\t</div>\r\n    </div>\r\n\r\n</div>\r\n<!-- End Font -->\r\n</span>",
  "line_breaks": 0,
  "modified": "2022-04-15 19:49:32.224101",
  "module": "Accounts",
  "name": "Vehicle Invoice",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 63.0.3239.84 -->\n{% set orientation = \"Portrait\" %}\n{% set display_rows_per_page = 8 %}\n\n{% set row_height = \"auto\" %}\n{% set div_page_height = \"100%\" %}\n{% set div_max_page_height = \"100%\" %}\n{% set page_size = {} %}\n{% if page_size.update({\"min_page_height\":\"8.26in\"}) %}{% endif %}\n{% if page_size.update({\"min_page_width\":\"11.69in\"}) %}{% endif %}\n{% if page_size.update({\"max_page_height\":\"8.26in\"}) %}{% endif %}\n{% if page_size.update({\"max_page_width\":\"11.69in\"}) %}{% endif %}\n{% if page_size.update({\"preferred_page_width\":\"11.69in\"}) %}{% endif %}\n{% if page_size.update({\"preferred_page_height\":\"8.26in\"}) %}{% endif %}\n{% set header_height = \"initial\" %}\n{% set max_header_height = \"initial\" %}\n{% set footer_height = \"initial\" %}\n{% set max_footer_height = \"initial\" %}\n{% set body_height = \"initial\" %}\n{% set max_body_height = \"100%\" %}\n\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set page_padding = \"1cm\" %}\n\n{% set global_default_font = \"Monospace\" %}\n\n{% set column_widths = {} %}\n{% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\n{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\n{% if column_widths.update({\"description_column_width\":\"35%\"}) %}{% endif %}\n{% if column_widths.update({\"qty_column_width\":\"5%\"}) %}{% endif %}\n{% if column_widths.update({\"amount_column_width\":\"10%\"}) %}{% endif %}\n{% if column_widths.update({\"rate_column_width\":\"10%\"}) %}{% endif %}\n\n{% set tax_line_counter = {'tl':1} %}\n{% set tax_line_max_length = 8 %}\n{% set tax_analysis_div_width = \"50%\" %}\n{% set tax_analysis_row_left = \"60%\" %} \n{% set tax_analysis_row_right = \"40%\" %}\n\n{% set taxes_as_columns = true %}\n{% set print_tax_analysis = false %}\n{% if column_widths.update({\"tax_rate_column_width\":\"6%\"}) %}{% endif %}        \n{% if column_widths.update({\"tax_amount_column_width\":\"8%\"}) %}{% endif %}        \n\n{% set key_index = {} %}\n{% set abbr = \" - \"+frappe.db.get_value(\"Company\", doc.company, \"abbr\") %}\n\n{% macro set_orientation_size() %}\n\t{% if orientation != \"Landscape\" %}\n\t\t{% if page_size.update({\"min_page_height\":\"11.69in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"min_page_width\":\"8.26in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"max_page_height\":\"11.69in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"max_page_width\":\"8.26in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"preferred_page_width\":\"8.26in\"}) %}{% endif %}\n\t\t{% if page_size.update({\"preferred_page_height\":\"11.69in\"}) %}{% endif %}\n    {% endif %} \n{% endmacro %}\n\n{% macro set_column_widths() %}\n\t{% set tax_columns = {'ln':0} %}\n    {% if taxes_as_columns %}\n    \t{% for taxes in doc.taxes %}\n\t    \t{% if taxes.charge_type != 'Actual' %}\n\t        \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\n\t        {% endif %}\n    \t{% endfor %}\n    {% endif %}\n    {% if tax_columns.ln == 0 %}\n\t    {% if column_widths.update({\"serial_no_column_width\":\"4%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"9%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"description_column_width\":\"50%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"qty_column_width\":\"7%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"amount_column_width\":\"15%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"rate_column_width\":\"15%\"}) %}{% endif %}\n        {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \n    {% else %}\n\t    {% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\t\t\n\t\t{% if column_widths.update({\"qty_column_width\":\"4%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"amount_column_width\":\"12%\"}) %}{% endif %}\n\t\t{% if column_widths.update({\"rate_column_width\":\"12%\"}) %}{% endif %}\n    \t{% if tax_columns.ln == 1 %}\n        \t{% if column_widths.update({\"description_column_width\":\"39%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"tax_rate_column_width\":\"5%\"}) %}{% endif %}        \n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}        \n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \n        {% endif %}\n    \t{% if tax_columns.ln == 2 %}\n        \t{% if column_widths.update({\"description_column_width\":\"32%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"tax_rate_column_width\":\"5%\"}) %}{% endif %}        \n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}  \n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"amount_column_width\":\"11%\"}) %}{% endif %}\n\t\t\t{% if column_widths.update({\"rate_column_width\":\"11%\"}) %}{% endif %}            \n        {% endif %}        \n    {% endif %}\n{% endmacro %}\n\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\n{% endif %}\n{% set count_page_break = {'pages':0} %}\n{% for row in doc.items %}\n\t{% if (row.page_break) %}\n    \t{% if count_page_break.update({\"pages\":count_page_break.pages+1}) %}{% endif %}\n    {% endif %}\n{% endfor %}\n{% if (total_pages_as_per_rows > count_page_break.pages) %}\n\t{% if count_page_break.update({\"pages\":0}) %}{% endif %}\n{% endif %}\n{% set total_pages_as_per_rows = total_pages_as_per_rows + count_page_break.pages %}\n\n\n{{ set_orientation_size() }}\n{{ set_column_widths() }}\n\n<!-- DONT EDIT STYLE BELOW -->\n<style>\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    @-moz-document url-prefix() {\n    \t.print-format {\n\t        height: 99% !important;\n        }\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;        \n    }\n    \n    .print-format-gutter {\n        height: 100%;\n    }\n    .description_div br {\n       display: none;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ page_size.min_page_height }} !important;\n            max-width: {{ page_size.max_page_width }} !important;\n            padding: {{ page_padding }};\n            background-color: white;\n            margin: auto;\n            display: flex;\n\t\t\tflex-direction: column;\n            width: 100%;\n        }\n    }\n    @media print {    \n    \thtml{\n\t        height:100%;\n\t        position:relative\n\t    }    \n    \t@page {\n            size: {{ page_size.preferred_page_width }} {{ page_size.preferred_page_height }} {{ orientation }};\n            margin: {{ page_padding }};\n        }    \n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            display: flex;\n\t\t\tflex-direction: column;\n        }\n    }\n    @media all {\n \t\tcolcell {\n    \t\tborder-left-style:solid !important;\n            border-left-color:gray !important;\n            border-left-width:1px !important;\n\t\t}\n    }\n</style>\n<!-- DONT EDIT STYLE ABOVE -->\n\n<!---------------------------------------------------------------->\n<!-------- CUSTOM MACROS FOR LOCAL USE --------------------------->\n<!---------------------------------------------------------------->\n\n{% macro tax_analysis_print_format() %}\n <table style=\"height:100%;\">\n \t<tr>\n    \t<th style=\"width:125px;padding:0px !important;width:100%;\">Model (HSN Code)</th>\n\t\t{% for taxes in doc.taxes %}\n        \t{% if taxes.charge_type != 'Actual' %}\n                <th style=\"min-width:45px;padding:0px !important;text-align:right;\">Rate(%)</th>\n        \t\t<th style=\"min-width:70px;padding:0px !important;text-align:right;\">{{ taxes.account_head.split(abbr)[0] }}(Rs)</th>\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\n            {% endif %}\n    \t{% endfor %}\n    </tr>\n    \n    {% set items = doc.items|sort(attribute='item_code') %}\n    {% set current_item = {'ci':items[0].item_code} %}\n    {% for model in items %}\n    \t{% if current_item.ci != model.item_code or loop.first %}\n        \t{% if current_item.update({'ci':model.item_code}) %}{% endif %}\n    \t<tr>\n        \t<td>{{ model.item_code }}({{ frappe.db.get_value(\"Item\", model.item_code, \"gst_hsn_code\") }})</td>\n\t\t{% for tax in doc.taxes %}\n        \t{% if tax.charge_type != 'Actual' %}\n\t\t    \t{% set i = tax.item_wise_tax_detail|json_load %}\n\t\t        {% for key, val in i.items() %}\n\t            \t{% if key == model.item_code %}\n\t\t                <td style=\"text-align:right;\">{{ val[0] }}</td>\n\t\t                {% for i in range(key_index[tax.account_head]) %}\n\t\t                \t{% if loop.last %}\n\t\t                \t  <td style=\"text-align:right;\">{{ val[1] }}</td>\n\t\t                    {% endif %}\n\t\t                {% endfor %}   \n\t                {% endif %}\n\t\t        {% endfor %}\n            {% endif %}\n\t    {% endfor %}\n        {% endif %}\n        </tr>\n    {% endfor %}\n    <tr height=\"100%;\"> \n         <td style=\"width=125px;\"> </td>\n    </tr>            \n  </table>\n{% endmacro %}\n\n{% macro do_subtotals() %}\n    <!-- DIFFRENT VAT & CHARGES PRINT -->\n    {% set suppress_LUT_msg = {'suppress':0} %}\n    {% for t in doc.taxes %}\n        {% if \"IGST\" in t.account_head and t.tax_amount > 1 %}\n            {% if suppress_LUT_msg.update({'suppress':1}) %}{% endif %}\n        {% endif %}\n    {% endfor %}\n    {% if doc.special_invoice == 'SEZ Supply' and  suppress_LUT_msg.suppress == 0 %}    \n      <div style=\"flex:2;font-size:10px;padding-right:30px;\">\n      \tSupply meant for supply to SEZ unit for authorised operations under Bond or Letter of Undertaking without payment of Integrated tax\n      </div>\n    {% endif %}\n    \n    {% set max_line_height = \"15px\" %}\n\t<div style=\"display:flex;justify-content:flex-end;flex-wrap:wrap;flex-direction:column;align-items:flex-end;width:100%;flex:1;\">\n                \n\t\t<!-- SUB TOTAL -->\n\t\t<div style=\"width:100%;\">\n\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\tTaxable Value\n\t\t\t</div>\n\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t{{ doc.get_formatted(\"net_total\") }}\n\t\t\t</div>\n\t\t</div>\n\t    <!-- END SUB TOTAL -->\n                \n\t\t{%- for row in doc.taxes -%}\n            {% if row.tax_amount != 0 %}\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ row.description }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ row.get_formatted(\"tax_amount\", doc) }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>\n            {% endif %}\n\t\t{%- endfor -%}\n        \n        {% if not doc.taxes or doc.total_taxes_and_charges == 0 %}\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\tSGST\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>        \t\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\tCGST\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>        \t\n\t\t\t\t<div style=\"width:100%;\">\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\tIGST\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\n\t\t\t\t\t</div>\n                    <div style=\"clear:both;\"></div>\n\t\t\t\t</div>        \t                \n        {% endif %}\n        \n\t</div>\n{% endmacro %}\n\n\n{% macro attach_tax_columns_vertical_lines(is_last) %}\n\t\t<!-- WAS {'height':\"100%\"} -->\n\t\t{% set columnheight = {'height':\"initial\"} %}\n\t\t{% if not is_last %}\n        \t<!-- WAS {'height':\"100%\"} -->\n        \t{% if columnheight.update({'height':\"initial\"}) %} {% endif %}\n        {% endif %}\n        \n\t\t{% set total_len = doc.taxes|length - (doc.taxes|selectattr(\"charge_type\", \"equalto\", \"Actual\")|list)|length %}\n\t\t{% for n in range(1, total_len+1) %}\n                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;\">&nbsp</div> -->\n\t\t\t\t<div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>               \n        {% endfor %}       \n        <div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>       \n        \n\t\t{% if is_last %}\n\t\t\t{% set tax_columns = {'ln':0, 'width':'100%'} %}\n\t\t   \t{% for taxes in doc.taxes %}\n\t\t    \t{% if taxes.charge_type != 'Actual' %}\n\t    \t    \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\n\t\t        {% endif %}\n\t    \t{% endfor %}\n            {% if tax_columns.ln == 1 %}\n            \t{% if tax_columns.update({'width':\"34%\"}) %}{% endif %}\n            {% endif %}\n            {% if tax_columns.ln == 2 %}\n            \t{% if tax_columns.update({'width':\"32%\"}) %}{% endif %}\n            {% endif %}            \n        \t<div style=\"background:white !important;position:absolute;height:auto;width:{{ tax_columns.width }};border-top:1px solid gray;bottom:0;right:0;margin-right:1px;margin-left:1px;border-left:1px solid gray;display:flex;padding-bottom:4px;padding-top:4px;padding-right:1px;\">\n            \t{{ do_subtotals() }}\n        \t</div>\n        {% endif %}\n{% endmacro %}\n\n{% macro attach_tax_columns_headers() %}\n\t\t{% for taxes in doc.taxes %}\n        \t{% if taxes.charge_type != 'Actual' %}\n                <!-- <div style=\"width:{{ column_widths.tax_rate_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/>(%)</div> -->\n        \t\t<div style=\"width:{{ column_widths.tax_amount_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/><span style=\"font-size:10px;\">Amt/Rate(%)</span></div>\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\n            {% endif %}\n       {% endfor %}\n       <div style=\"width:{{ column_widths.total_amount_column_width }};vertical-align:middle !important;padding-right:4px !important;float:left;\">Total<br/>(Rs)</div>\n{% endmacro %}\n\n{% macro attach_tax_columns(model, current_item, first) %}\n    {% set item_details = {} %}\n    {% for item in doc.items %}\n        {% if item_details.update({item.idx:{'item_code':item.item_code,'item_rate':item.rate,'item_qty':item.qty,'net_rate':item.net_rate,'net_amount':item.net_amount}}) %} {% endif %}\n    {% endfor %}\n    \n\t{% set total_amt = {'total':0} %}\n\t{% for tax in doc.taxes %}\n       \t{% if tax.charge_type != 'Actual' %}\n\t    \t{% set i = tax.item_wise_tax_detail |json_load %}\n\t        {% for key, val in i.items() %}\n            \t{% if key == model.item_code %}\n                    \n                   \t{# set value = (val[1] / same_item_total_qty.get(key)|float )|float * same_item_in_different_rows.get(key+('idx:'+model.idx|string), 1)|float #}\n                    {% set value = (model.net_amount * val[0] / 100)|float|round(2) %}\n                    \n\t                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(val[0]) }}</div> -->\n\t                {% for i in range(key_index[tax.account_head]) %}\n\t                \t{% if loop.last %}\n\t                \t  <div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(value) }}<br/><span style=\"font-size:10px;\">{{ frappe.utils.fmt_money(val[0]) }}%</span></div>\n                          {% if total_amt.update({'total':total_amt.total+value}) %} {% endif %}\n\t                    {% endif %}\n\t                {% endfor %}   \n                {% endif %}\n\t        {% endfor %}\n           {% endif %}\n\t{% endfor %}\n   \t<div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n              \t{{ frappe.utils.fmt_money(model.net_amount+total_amt.total) }}\n    </div>                                         \n{% endmacro %}\n\n\n{% macro insert_vertical_lines(is_last) %}\n      <div style=\"flex:1;display:flex;position:relative;\">\n           <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;\"></div>\n           <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>                            \n           <div style=\"width: {{ column_widths.description_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>\n           <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\n           <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\n           <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>                        \n           {% if taxes_as_columns %}\n              \t{{ attach_tax_columns_vertical_lines(is_last) }}\n           {% endif %}                            \n           <div style=\"clear:both;\"></div>\n     </div>  \n{% endmacro %}\n\n\n{% macro print_taxes_charges() -%}\t\n\t<div style=\"display:flex;width:100%;height:100%;flex-grow:1;\">\n\t    {% set taxes_band_width = {'analysis':\"70%\",'subtotal':\"30%\"} %}\n\t    {% if not print_tax_analysis %}\n\t        {% if taxes_band_width.update({'analysis':\"0%\",'subtotal':\"100%\"}) %} {% endif %}\n\t    {% endif %}\n    \n\t\t{% if print_tax_analysis %}    \n\t\t\t<div style=\"width:{{ taxes_band_width.analysis }};padding-right:10px;\">        \n\t\t\t    \t<div style=\"max-width:50px;float:left;\"><B>TAX BREAKUP</B></div>    \n\t\t\t\t       \t{{ tax_analysis_print_format() }}\n\t\t\t</div>                 \n\t    \t<div style=\"width:{{ taxes_band_width.subtotal }};flex-grow:1;background:#eee !important;\">\n\t    \t\t{{ do_subtotals() }}\n\t\t    </div>        \n\t\t{% endif %}                    \n    </div>\n{%- endmacro %}\n\n<!---------------------------------------------------------------->\n<!-------- END OF CUSTOM MACROS FOR LOCAL USE -------------------->\n<!---------------------------------------------------------------->\n\n<!-- Macro for Header -->\n{% macro setheader() -%}\n{% set header_column_width=20 %}\n{% set value_column_width=80 %}\n<div style=\"width: 100%;height:100%;\">\n\t<div style=\"width:100%;overflow: hidden\">\n    <table style=\"width: 100%;height:100%\">\n        {% if letter_head and not no_letterhead -%}\n        <tr>\n            <td colspan=\"100%\" style=\"width: 100%;padding-bottom: 3px !important;\">\n                {{ letter_head }}\t\n            </td>\n        </tr>\n        <tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></td></tr>\n        {%- endif %}\n        {% set customer_details = frappe.get_doc(\"Customer\", doc.customer) %}\n        <tr style=\"height:100%;\">\n            <td colspan=\"100%\" style=\"width: 100%;padding: 1px !important;\">\n                <div style=\"height: 65px;max-height: 65px;overflow: hidden;background: #eee !important;\">\n                    <table style=\"width: 100%;height:100%;\">\n\t\t\t    \t<tr>\n\t\t\t        \t<td colspan=\"100%\" style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;background:white !important;\">\n\t\t\t\t           \t<div style=\"width:100%;font-size:9px;\">\n\t\t\t                \t<div style=\"float:right;\">\n\t\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\n\t\t\t                            <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Triplicate for Supplier</span>\n\t\t\t                    </div>\n\t\t\t                    <div style=\"float:right;\">\n\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Duplicate for Transporter</span>\n\t\t\t                    </div>                                \n\t\t\t                \t<div style=\"float:right;\">\n\t\t\t                    \t<span style=\"font-family:wingdings;\">o</span>\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Original For Recipient</span>\n\t\t\t                    </div>                                \n\t\t\t                </div>\n\t\t\t            </td>\n        \t\t\t</tr>                    \n                        <tr>\n                            <td style=\"height: 100%;width: 30%;color: black;font-size: 9px;text-transform: uppercase;text-align: left;vertical-align: middle !important; padding-left: 5px !important;\">\n\t                    \t\tTax Payable on Reverse Charge: <b>NO</b>                               \n                                <br/>Page {{ total_pages|length }} of {{ total_pages_as_per_rows }}                                \n                            </td>\t\t\t\t\t\n                            <td style=\"width: 40%;color: black;text-align: center;vertical-align: middle !important;\" rowspan=\"100%\">\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"Tax Invoice\" }}</B></span>\n                            </td>\t\t\t\t\t\n                            <td style=\"height: 100%;width: 30%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important; padding-right: 5px !important;\">\n                                <B>{{ doc.reporting_name or doc.name }}<br>Date: {{ doc.get_formatted(\"posting_date\") }}</br> </B>\n                            </td>\t\t\t\t\t\n                        </tr>\n                    </table>\n                </div>\n                <table style=\"border-collapse: collapse;width: 100%;margin-top:2px;line-height:15px;\">\n                    <tr>\n                        <td style=\"width: 50%;vertical-align: middle !important;\">\n                            <table style=\"width: 100%;font-size:14px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;\">\n                                        Name\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%;padding-top:5px !important;\">\n                                    \t{# set sal = frappe.db.get_value(\"Customer\", doc.customer, \"salutation\") #}\n                                        <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.company_name }}</B></span>\n                                    </td>\n                                </tr>\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" %}\n                                \t<tr>\n\t                                \t<td style=\"width: {{ header_column_width }}%;\">\n\t                                    \t<!-- Intentionally Left Blank -->\n\t                                    </td>\n\t                                    <td style=\"width: {{ value_column_width }}%;\">                                        \n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \n\t                                    </td>\n\t                                </tr>                                                                \n\t\t\t\t\t\t\t\t{% endif %}                                    \n                                {% if customer_details.company_name %}\n\t                                <tr>\n\t                                \t<td style=\"width: {{ header_column_width }}%;\">\n\t                                    \t<!-- Intentionally Left Blank -->\n\t                                    </td>\n                                    \t<td style=\"width: {{ value_column_width }}%;\">\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.customer_name }}</B></span>\n\t                                    </td>\n    \t                            </tr>\n                                {% endif %}\n                            </table>\n                        </td>\n                    \t<td style=\"vertical-align:middle !important;\">\n                        \t{% set san =  frappe.db.get_value(\"Address\", doc.shipping_address_name, \"address_name\") %}\n                    \t\t<table style=\"width:100%;font-size:14px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;\">\n                                        Name\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%;padding-top:5px !important;\">\n                                    \t{% if san %} \n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ san }}</B></span>\n                                        {% else %}\n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ customer_details.company_name }}</B></span>\n                                        {% endif %}\n                                    </td>\n                                </tr>\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" and not san %}\n                                \t<tr>\n\t                                \t<td style=\"width: {{ header_column_width }}%;\">\n\t                                    \t<!-- Intentionally Left Blank -->\n\t                                    </td>\n\t                                    <td style=\"width: {{ value_column_width }}%;\">                                        \n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \n\t                                    </td>\n\t                                </tr>                                                                \n\t\t\t\t\t\t\t\t{% endif %}                                                                    \n                                {% if customer_details.company_name %}\n                                \t<tr>\n\t                                \t<td style=\"width: {{ header_column_width }}%;\">\n\t                                    \t<!-- Intentionally Left Blank -->\n\t                                    </td>\n\t                                    <td style=\"width: {{ value_column_width }}%;\">\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ doc.customer_name }}</B></span>\n    \t                                </td>\n\t                                </tr>                            \n                                {% endif %}\n\t\t                    </table>\n\t                    </td>                        \n                    </tr>\n                    <tr>                    \t\n                        \t<td style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                            <table style=\"width: 100%;font-size:12px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%\">\n                                        <span style=\"color:red;\">Billing Address</span>\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;\">\n                                        <B>{{ doc.address_display }}</B>\n                                    </td>\n                                </tr>\n\t\t\t                    <tr>\n\t\t\t                    \t<td style=\"width: {{ header_column_width }}%;\">\n\t\t\t\t                        \t<span style=\"color:red;\">Contact No</span>\n\t\t\t                        </td>\n\t\t\t                        <td style=\"width: {{ value_column_width }}%;\">\n\t\t\t                            {% if not doc.contact_person %}\n\t\t\t                                {% set contact_filters = [\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                            %}\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t{% for c in contact_list %}\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t    <b>{{ p.phone }}</b>\n                                    \t        {% endfor %}\n                                    \t    {% endfor %}\n                                    \t{% else %}\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\n                                            \t<b>{{ p.phone }}</b>\n                                    \t    {% endfor %}\n                                    \t{% endif %}\n\t\t\t                        </td>\n\t\t\t                    </tr>    \n\t\t\t\t                {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer, \"pan\") %}                \n\t\t\t\t                {% if customer_pan %}\n\t\t\t\t                <tr>\n\t\t\t\t                \t<td style=\"width: {{ header_column_width }}%\">\n\t\t\t\t                    \t<span style=\"color:red;\">PAN No</span>\n\t\t\t\t                    </td>\n\t\t\t\t                    <td style=\"width: {{ value_column_width }}%\">\n\t\t\t\t                    \t<b>{{ customer_pan }}</b>\n\t\t\t\t                    </td>\n\t\t\t\t                </tr>\n\t\t\t\t                {% endif %}                                \n                            </table>\n                        </td>\n                        {% if doc.shipping_address_name %}                        \n                        <td style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                            <table style=\"width: 100%;font-size:12px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%\">\n                                        <span style=\"color:red;\">Delivery Address</span>\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%\">\n                                        <B>{{ doc.shipping_address }}</B>\n                                    </td>\n                                </tr>\n                                {% if doc.customer_vehicle_no %}\n\t\t\t                    \t<tr>\n\t\t\t\t                    \t<td style=\"width: {{ header_column_width }}%;\">\n\t\t\t\t\t                        \t<span style=\"color:red;\">Vehicle No</span>\n\t\t\t\t                        </td>\n\t\t\t\t                        <td style=\"width: {{ value_column_width }}%;\">\n\t                                    \t<b>{{ doc.customer_vehicle_no }}</b>                            \n\t\t\t\t                        </td>\n\t\t\t\t                    </tr>          \n                                {% endif %}\n                            </table>\n                        </td>\n                        {%- endif %}\n                    </tr>                    \t\n                <tr><td colspan=\"100%\"><hr style=\"margin-top: 0px;margin-bottom: 0px;padding-bottom:3px !important;\"></hr></td></tr>\t\t\n                <tr>                \n\t                <td colspan=2 style=\"width:100%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                    \t<div style=\"width:100%;display:flex;\">\n\t               \t\t<div style=\"width:40%;font-size:12px;float:left;\">\n\t               \t\t\t{% if doc.hypothecation %}\n                            <div style=\"width:100%;\">\n\t                   \t\t\t\t<div style=\"color:red;float:left;\">\n\t                       \t\t\t\tHypothecation: \n\t                       \t\t\t</div>\n\t                   \t\t\t\t<div style=\"overflow:hidden;padding-left:10px;\">\n\t                       \t\t\t\t<b>{{ doc.hypothecation }}</b>\n\t                       \t\t\t</div>                        \n                            </div>\n\t              \t\t\t{% endif %}\n\t               \t\t\t{% if doc.reference %}\n                            <div style=\"width:100%;\">\n\t                   \t\t\t\t<div style=\"color:red;float:left;\">\n\t                       \t\t\t\tHYP Reference: \n\t                       \t\t\t</div>\n\t                   \t\t\t\t<div style=\"padding-left:10px;float:left;\">\n\t                       \t\t\t\t<b>{{ doc.reference }}</b>\n\t                       \t\t\t</div>                        \n                            </div>\n\t              \t\t\t{% endif %} \n\t                    </div>\n\t               \t\t<div style=\"width:60%;font-size:12px;\">\n\t               \t\t\t{% if doc.purchase_order_no %}\n                            <div style=\"width:100%;\">\n\t                   \t\t\t\t<div style=\"color:red;float:left;\">\n\t                       \t\t\t\tPurchase Order No: \n\t                       \t\t\t</div>\n\t                   \t\t\t\t<div style=\"overflow:hidden;padding-left:10px;\">\n\t                       \t\t\t\t<b>{{ doc.purchase_order_no }}</b>\n\t                       \t\t\t</div>                        \n                            </div>\n                            <div style=\"width:100%;\">\n\t                   \t\t\t\t<div style=\"color:red;float:left;\">\n\t                       \t\t\t\tPurchase Order Date: \n\t                       \t\t\t</div>\n\t                   \t\t\t\t<div style=\"float:left;padding-left:10px;\">\n\t                       \t\t\t\t<b>{{ doc.purchase_order_date }}</b>\n\t                       \t\t\t</div>                        \n                            </div>\n\t              \t\t\t{% endif %}\n                       </div>\n                       </div>\n\t                </td>                    \n                </tr>\n                </table> \n            </td>\n        </tr>\n    </table>\n    </div>\n    <div style=\"width:100%;height: 40px !important;bottom: 0;position: sticky;margin-top:2px;font-size: 11px;text-transform:uppercase;\">\n    <!-- <div style=\"height: 100%;width: 100%;word-wrap:break-word;\"> -->\n        <!-- Column Headings -->\n    \t<div style=\"width: 100%;background: #eee !important;min-height: 15%;height: 40px;font-weight: 600;border-bottom: 1px solid #eee;text-align:center;display:flex;align-items:center;border-bottom:1px solid gray;\">\n            <div style=\"width: {{ column_widths.serial_no_column_width }};vertical-align:middle !important;\">Sr</div>\n            <div style=\"width: {{ column_widths.hsn_no_column_width }};vertical-align:middle !important;\">HSN<br/>Code</div>\n            <div style=\"width: {{ column_widths.description_column_width }};vertical-align:middle !important;\">Item Name</div>\n            <div style=\"width: {{ column_widths.qty_column_width }};vertical-align:middle !important;\">Qty</div>\n            <div style=\"width: {{ column_widths.rate_column_width }};vertical-align:middle !important;\">Rate</div>\n            <div style=\"width: {{ column_widths.amount_column_width }};vertical-align:middle !important;\">Amount</div>\n            {% if taxes_as_columns %}\n            \t{{ attach_tax_columns_headers() }}\n            {% endif %}                        \n        </div>\n    <!-- </div> -->\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;display: flex;flex-direction:column;flex:1;\">\n\t\t<!-- CONTINUED BAND -->\n\t\t{% if not islast %}\n\t\t<div style=\"width: 100%;padding-top: 10px;padding-bottom:10px;\">\n\t\t\t<div style=\"width: 100%;\">\n\t        \t<div style=\"text-align:right;\">\n\t\t                <b>Continued ... </b>\n\t\t        </div>\n            </div>\n\t\t</div>\n\t\t{% endif %}\n        <!-- END CONTINUED BAND -->\n                \n        <!-- TAXES BAND -->\n\t\t{% if islast  and doc.taxes|length > 0 %}\n\t\t<div style=\"width: 100%;padding-top:2px;display:flex;flex-direction:column;\">\n\t\t\t\t{{ print_taxes_charges() }}\n        </div>\n\t\t{% endif %}\n        <!-- END TAXES BAND -->\n\n\t\t<!-- TOTAL BAND -->\n\t\t{% if islast %}\n        <div style=\"width: 100%;min-height:35px;background:#eee !important;font-size:11px;\">\n        \t<div style=\"float:left;width:60%;height:100%;padding-top:5px;\">\n\t\t\t\t\t{{ frappe.utils.money_in_words(doc.grand_total) }}\n\t\t\t</div>\n            <div style=\"width:40%;font-size:14px;vertical-align: middle !important;text-align:right;float:left;height:100%;padding-top:5px;padding-right:1px;\">\n                \t<span style=\"text-transform:uppercase;\">Total</span> <b>{{ doc.get_formatted(\"grand_total\") }}</b>\n            </div>\n        </div>\n\t\t{% endif %}\n        <!-- END TOTAL BAND -->\n        \n        \n     {% set lower_header_height = \"60%\" %}\n     {% if not (islast and doc.taxes|length > 0) %}\n         {% set lower_header_height = \"60%\" %}\n     {% endif %}\n     <div style=\"width: 100%;flex:1;\">\n     \t\t<hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;height:1px !important;\"></hr>\n            <div style=\"display:flex;flex:1;flex-direction:row;\">\n\t            <div style=\"flex:1;padding-right:5px;\">\n\t\t\t\t\t\t<div style=\"width:100%;font-size:10px;background: #eee !important;\">\n                        \t<b>Terms & Conditions</b>\n                        </div>\t\t\t\t\t   \n\t\t\t\t\t\t<div style=\"font-size: 10px;\">\n\t\t\t\t\t\t\t{{ doc.terms or \"\" }}\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t            <div style=\"margin-left:10px;overflow:hidden;font-size:11px;display:flex;flex-direction:column;flex:.40;\">\n                \t<div style=\"width:100%;\">\n                    \t<div style=\"width:100%;background:#eee !important;padding-left:5px;\">\n\t                    \t<span style=\"font-size:10px;\"><b>Company's Registration Details</b></span>\n                        </div>\n\t\t\t\t\t\t<div style=\"padding-left:5px;\">\n\t\t\t\t\t\t\t{{ frappe.db.get_value(\"Company\", doc.company, \"registration_details\") or \"\" }} \n\t\t\t\t\t\t</div>          \n                    </div>\n                    <div style=\"padding-top:10px;flex:1;\">\n                    \t<div style=\"background:#eee !important;width:100%;padding-left:5px;\">\n                    \t\t<b>Transportation Details</b>\n                        </div>\n                        <div style=\"padding-left:5px;\">\n                        \tVehicle No: {{ doc.vehicle_no or \"\" }}\n                        \t<br/>Date & Time of Supply: {{ doc.date_time_of_supply or \"\" }}\n                        \t<br/>Place of Supply: {{ doc.place_of_supply or \"\" }}\n                       </div>\n                    </div>\n\t            </div>\n            </div>\n     </div>\n     <div style=\"width: 100%;bottom:0px;font-size:12px;\">    \n        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;height:1px !important;\"></hr></div>\n     \t<div style=\"width:100%;min-height:60px;display:flex;flex-direction:column;\">\n\t        <div style=\"height: 35%;background: #eee !important;flex:.50;display:flex;\">\n                <div style=\"height: 20%;width: 33%; text-align: left;\">\n                      <!-- Intentionally Left Blank -->\n                </div>\n\t            <div style=\"height: 20%;width: 34%; text-align: center;\">\n\t                <!-- Intentionally Left Blank -->\n\t            </div>                                            \n\t            <div style=\"height: 100%;width: 33%; text-align: right;padding-bottom:25px !important;\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </div>\n\t        </div>\n\t        <div style=\"background: #eee !important;padding-bottom:2px;flex:.50;display:flex;\">\n\t            <div style=\"height: 20%;width: 33%; text-align: left;padding-left: 10px !important;\">\n\t                Receivers Signature\n\t            </div>            \n\t            <div style=\"height: 20%;width: 34%; text-align: center;\">\n\t                E. & O.E.\n\t            </div>                            \n\t            <div style=\"height: 20%;width: 33%; text-align: right;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Manager</span>\n\t            </div>\n\t        </div>            \n         </div>\n     </div>\n    \n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n{% macro print_serialno(itemcode, serialnos) %}\n       {% if serialnos != None -%}\n           \t<div style=\"color:brown;font-size:11px;margin-left:5px;\">\n           \t{% set item_is_vehicle = frappe.db.get_value(\"Item\",itemcode,\"is_vehicle\") %}\n            {% if item_is_vehicle %}\n                  \tChassis No: \n            {% else %}\n                    Serial No:\n            {% endif %}                                                                                                \n            {%- for serial in serialnos.split('\\n') -%}   \n                {% if serial != '' %}\n                   {# set serialdoc = frappe.get_doc(\"Serial No\",serial|trim) #}\n\t               <p style=\"display:inline;\">\n\t                      \t{# serialdoc.serial_no #}\n\t                      \t{{ serial }}\n\t               </p>\n\t\t        {%- endif %}\n\t\t    {%- endfor %}\n            </div>\n\t\t{%- endif %}\t\n{% endmacro %}\n\n\n{% macro do_body() -%}\n\t\t\t\t<!-- Inner Body Container -->\n\t            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\n\n\t\t\t\t    {# set items = doc.items|sort(attribute='item_code') #}\n                    {% set items = doc.items %}\n                   \n                    {%- for row in items -%}\n\n                        {% if loop.index % 2 == 0 -%}\n                        <!-- Do Something / Alternative Rows -->\t   \n                        {%- endif %}\n\n                        <div style=\"min-height: {{ row_height }};height: {{ row_height }};border-bottom:1px solid #eee;overflow:hidden;display:flex;width:100%;\">\n                            <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;display:table-cell;\">\n                            \t\t{{ loop.index }} \n                            </div>\n                            <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\">\n                            \t\t{{ row.gst_hsn_code }} \n                            </div>                            \n                            <div style=\"width: {{ column_widths.description_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\"> \n                            \t<div style=\"height: {{ row_height }};\">\n                                    {% if row.brand %}\n\t                                <div style=\"display:inline;\">\n\t                                    {{ row.brand }} \n\t                                </div>\n                                    {% endif %}\n\t                                <div style=\"display:inline;\">\n\t                                \t{{ row.item_name }}\n\t\t                            </div>\n                                    <div style=\"display:inline;\">\n                                    \t<div class=\"description_div\" style=\"color:blue;margin-left:5px;\">\n                                    \t\t<I>{{ row.description }}</I>\n                                        </div>\n                                    </div>\n                                                                       \n                                    <!-- SALES INVOICE ROW SERIAL NO -->\n                                    {{ print_serialno(row.item_code, row.serial_no) }}\n                                    <!-- SALES INVOICE ROW SERIAL NO -->\n                                    \n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\n                                    {% if doc.packed_items %}\n                                       <div style=\"margin-left:10px;\">\n                                    \t{% for packs in doc.packed_items %}\n                                        \t{% if packs.parent_item == row.item_code %}\n                                            <div>\n\t\t\t\t                                <div style=\"display:inline;\">\n\t\t\t\t                                \t{{ packs.item_name }}\n\t\t\t\t\t                            </div>\n\t\t\t                                    <div style=\"display:inline;\">\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.description }} </span></I>\n\t\t\t                                    </div>\n\t\t\t                                    <div style=\"display:inline;\">\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.get_formatted(\"qty\", doc) }} {{ packs.uom or packs.stock_uom }} </span></I>\n\t\t\t                                    </div>          \n                                                {{ print_serialno(packs.item_code, packs.serial_no) }}\n\t\t                                    </div>\t\n                                            {% endif %}\n                                        {% endfor %}\n                                      </div>\n                                    {% endif %}\n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\n                                    \n                                    <!-- PRINT REMARKS -->\n                                    {% if row.remarks %}\n                                    <span style=\"font-size:9px;\">                                    \n                                        <div style=\"width:100%;\">\n                                        \t<div style=\"float:left;margin-left:5px;\">\n                                        \t\tRemarks:\n                                            </div>\n                                            <div style=\"width:85%;float:left;\">\n                                            \t{{ row.remarks }}\n                                            </div>\n                                       </div>\n                                    </span>                                       \n                                    {% endif %}\n                                    \n                                </div>\n                            </div>\n                            \n                            <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n                                \t{{ row.get_formatted(\"qty\", doc) }} {{ row.uom or row.stock_uom }}\n                            </div>\n                            <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n                                \t{{ frappe.utils.fmt_money(row.net_rate) }}\n                            </div>\n                            <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\n                                \t{{ frappe.utils.fmt_money(row.net_amount) }}\n                            </div>     \n            \t\t\t\t{% if taxes_as_columns %}\n            \t\t\t\t\t{{ attach_tax_columns(row,current_item,loop.first) }}\n            \t\t\t\t{% endif %}                                                                                    \n                            <div style=\"clear:both;\"></div>\n                        </div>\n\n\t                <!-- Page Break Logic Here -->\n\t                {% if ((loop.index % display_rows_per_page == 0  and loop.index < doc.items|length) or row.page_break) and total_pages|length < total_pages_as_per_rows  %}\n\t\t                <!-- Fill Empty Space -->\n                        {{ insert_vertical_lines(false) }}\n                        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\n                        \n\t\t\t\t\t\t<!-- Need to Inner Body Container Used Above -->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- Page Break -->\n\t\t\t\t\t\t\t{{ insert_page_break(true) }}\n                            \n\t\t\t\t\t\t\t<!-- Inner Body Container -->\n                            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\n\t                {% endif %}\n                    <!-- End Page Break Logic -->\n                \n                {% endfor %}\n\n                <!-- Fill Empty Space -->\n                {{ insert_vertical_lines(true) }}\n\t\t\t\t<div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\n                \n                <!-- End Inner Body Container -->\n                </div>\n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <!-- <div style=\"height: 100%\"></div> -->\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\n\t\t\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \n\t\t\t\t\t{{ setfooter(false) }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \n\n\t\t\t\t<!-- New Body Container -->\n\t\t\t\t<div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\n\n\t{% endif %}\n{%- endmacro %}\n\n<!-- Set Global Default font -->\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n    <!-- Set Header -->\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\n\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n\n</div>\n<!-- End Font -->\n</span>\n<script>\n    console.log(\"Hello from Print Format\");\n    $(\".print-preview\").css({position:'relative'});\n</script>\n",
  "line_breaks": 0,
  "modified": "2022-03-20 21:00:24.727232",
  "module": "Accounts",
  "name": "Care of Problem",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 63.0.3239.84 -->\r\n{% set orientation = \"Portrait\" %}\r\n{% set display_rows_per_page = 8 %}\r\n\r\n{% set row_height = \"auto\" %}\r\n{% set div_page_height = \"100%\" %}\r\n{% set div_max_page_height = \"100%\" %}\r\n{% set page_size = {} %}\r\n{% if page_size.update({\"min_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% if page_size.update({\"min_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"max_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% if page_size.update({\"max_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"preferred_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"preferred_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% set header_height = \"initial\" %}\r\n{% set max_header_height = \"initial\" %}\r\n{% set footer_height = \"initial\" %}\r\n{% set max_footer_height = \"initial\" %}\r\n{% set body_height = \"initial\" %}\r\n{% set max_body_height = \"100%\" %}\r\n\r\n{% set footer_background = \"transparent\" %}\r\n{% set header_background = \"transparent\" %}\r\n{% set body_background = \"transparent\" %}\r\n{% set page_padding = \"1cm\" %}\r\n\r\n{% set global_default_font = \"Monospace\" %}\r\n\r\n{% set column_widths = {} %}\r\n{% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\r\n{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\r\n{% if column_widths.update({\"description_column_width\":\"35%\"}) %}{% endif %}\r\n{% if column_widths.update({\"qty_column_width\":\"5%\"}) %}{% endif %}\r\n{% if column_widths.update({\"amount_column_width\":\"10%\"}) %}{% endif %}\r\n{% if column_widths.update({\"rate_column_width\":\"10%\"}) %}{% endif %}\r\n\r\n{% set tax_line_counter = {'tl':1} %}\r\n{% set tax_line_max_length = 8 %}\r\n{% set tax_analysis_div_width = \"50%\" %}\r\n{% set tax_analysis_row_left = \"60%\" %} \r\n{% set tax_analysis_row_right = \"40%\" %}\r\n\r\n{% set taxes_as_columns = true %}\r\n{% set print_tax_analysis = false %}\r\n{% if column_widths.update({\"tax_rate_column_width\":\"6%\"}) %}{% endif %}        \r\n{% if column_widths.update({\"tax_amount_column_width\":\"8%\"}) %}{% endif %}        \r\n\r\n{% set key_index = {} %}\r\n{% set abbr = \" - \"+frappe.db.get_value(\"Company\", doc.company, \"abbr\") %}\r\n\r\n{% macro set_orientation_size() %}\r\n\t{% if orientation != \"Landscape\" %}\r\n\t\t{% if page_size.update({\"min_page_height\":\"11.69in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"min_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"max_page_height\":\"11.69in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"max_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"preferred_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"preferred_page_height\":\"11.69in\"}) %}{% endif %}\r\n    {% endif %} \r\n{% endmacro %}\r\n\r\n{% macro set_column_widths() %}\r\n\t{% set tax_columns = {'ln':0} %}\r\n    {% if taxes_as_columns %}\r\n    \t{% for taxes in doc.taxes %}\r\n\t    \t{% if taxes.charge_type != 'Actual' %}\r\n\t        \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\r\n\t        {% endif %}\r\n    \t{% endfor %}\r\n    {% endif %}\r\n    {% if tax_columns.ln == 0 %}\r\n\t    {% if column_widths.update({\"serial_no_column_width\":\"4%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"9%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"description_column_width\":\"50%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"qty_column_width\":\"7%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"amount_column_width\":\"15%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"rate_column_width\":\"15%\"}) %}{% endif %}\r\n        {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \r\n    {% else %}\r\n\t    {% if column_widths.update({\"serial_no_column_width\":\"3%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"hsn_no_column_width\":\"8%\"}) %}{% endif %}\t\t\r\n\t\t{% if column_widths.update({\"qty_column_width\":\"4%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"amount_column_width\":\"12%\"}) %}{% endif %}\r\n\t\t{% if column_widths.update({\"rate_column_width\":\"12%\"}) %}{% endif %}\r\n    \t{% if tax_columns.ln == 1 %}\r\n        \t{% if column_widths.update({\"description_column_width\":\"39%\"}) %}{% endif %}\r\n\t\t\t{% if column_widths.update({\"tax_rate_column_width\":\"5%\"}) %}{% endif %}        \r\n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}        \r\n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %} \r\n        {% endif %}\r\n    \t{% if tax_columns.ln == 2 %}\r\n        \t{% if column_widths.update({\"description_column_width\":\"32%\"}) %}{% endif %}\r\n\t\t\t{% if column_widths.update({\"tax_rate_column_width\":\"5%\"}) %}{% endif %}        \r\n            {% if column_widths.update({\"tax_amount_column_width\":\"10%\"}) %}{% endif %}  \r\n            {% if column_widths.update({\"total_amount_column_width\":\"12%\"}) %}{% endif %}\r\n\t\t\t{% if column_widths.update({\"amount_column_width\":\"11%\"}) %}{% endif %}\r\n\t\t\t{% if column_widths.update({\"rate_column_width\":\"11%\"}) %}{% endif %}            \r\n        {% endif %}        \r\n    {% endif %}\r\n{% endmacro %}\r\n\r\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\r\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\r\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\r\n{% endif %}\r\n{% set count_page_break = {'pages':1} %}\r\n{% for row in doc.items %}\r\n\t{% if (row.page_break) %}\r\n    \t{% if count_page_break.update({\"pages\":count_page_break.pages+1}) %}{% endif %}\r\n    {% endif %}\r\n{% endfor %}\r\n{% if (total_pages_as_per_rows > count_page_break.pages) %}\r\n\t{% if count_page_break.update({\"pages\":total_pages_as_per_rows}) %}{% endif %}\r\n{% else %}\r\n\t{% if count_page_break.update({\"pages\":count_page_break.pages}) %}{% endif %}\r\n{% endif %}\r\n{# set total_pages_as_per_rows = total_pages_as_per_rows + count_page_break.pages #}\r\n{% set total_pages_as_per_rows = count_page_break.pages %}\r\n\r\n\r\n{{ set_orientation_size() }}\r\n{{ set_column_widths() }}\r\n\r\n<!-- DONT EDIT STYLE BELOW -->\r\n<style>\r\n    body{\r\n        min-height:100% /* force the BODY element to match the height of the HTML element */\r\n    }\r\n    .print-format td {\r\n        padding: 0px !important;\r\n    }\r\n    @-moz-document url-prefix() {\r\n    \t.print-format {\r\n\t        height: 99% !important;\r\n        }\r\n    }\r\n    .print-format {\r\n        height: 100%;\r\n        background-color: initial;\r\n        box-shadow: initial;\r\n        max-width: initial;\r\n        min-height: initial;\r\n        margin: initial;\r\n        padding: initial !important;        \r\n    }\r\n    \r\n    .print-format-gutter {\r\n        height: 100%;\r\n    }\r\n    .description_div br {\r\n       display: none;\r\n    }\r\n    @media screen {\r\n        .page-preview {\r\n            min-height: {{ page_size.min_page_height }} !important;\r\n            max-width: {{ page_size.max_page_width }} !important;\r\n            padding: {{ page_padding }};\r\n            background-color: white;\r\n            box-shadow: 0px 0px 9px rgba(0,0,0,0.5);\r\n            margin: auto;\r\n            display: flex;\r\n\t\t\tflex-direction: column;\r\n            width: 100%;\r\n        }\r\n    }\r\n    @media print {    \r\n    \thtml{\r\n\t        height:100%;\r\n\t        position:relative\r\n\t    }    \r\n    \t@page {\r\n            size: {{ page_size.preferred_page_width }} {{ page_size.preferred_page_height }} {{ orientation }};\r\n            margin: {{ page_padding }};\r\n        }    \r\n        body {\r\n            height: 100%;\r\n            -webkit-print-color-adjust: exact !important;\r\n        }\r\n        .page-preview {\r\n            height: 100%;\r\n            width: 100%;\r\n            display: flex;\r\n\t\t\tflex-direction: column;\r\n        }\r\n    }\r\n    @media all {\r\n \t\tcolcell {\r\n    \t\tborder-left-style:solid !important;\r\n            border-left-color:gray !important;\r\n            border-left-width:1px !important;\r\n\t\t}\r\n    }\r\n</style>\r\n<!-- DONT EDIT STYLE ABOVE -->\r\n\r\n<!---------------------------------------------------------------->\r\n<!-------- CUSTOM MACROS FOR LOCAL USE --------------------------->\r\n<!---------------------------------------------------------------->\r\n\r\n{% macro vehicle_letter_head() %}\r\n    <div style=\"width:100%;\">\r\n        {{ render_template(frappe.db.get_value(\"Letter Head\", \"Geeta Bhawan\", \"content\"),doc) }}\r\n    </div>\r\n{% endmacro %}\r\n\r\n{% macro vehicle_terms() %}\r\n<div>\r\n\t<ul>\r\n\t\t<li>Goods once sold will not be taken back.</li>\r\n\t\t<li>Interest @18% per annum would be applicable if payment is not made within 7 days.</li>\r\n\t\t<li>The Firm is not responsible for Breakage / Theft in transit.</li>\r\n\t\t<li>Proof of Identity is required for payments above Rs 7,500/- by Card.</li>\r\n\t\t<li>Warranty as per Manufacturer's Terms and Conditions</li>\r\n\t</ul>\r\n</div>\r\n{% endmacro %}\r\n\r\n\r\n{% macro tax_analysis_print_format() %}\r\n <table style=\"height:100%;\">\r\n \t<tr>\r\n    \t<th style=\"width:125px;padding:0px !important;width:100%;\">Model (HSN Code)</th>\r\n\t\t{% for taxes in doc.taxes %}\r\n        \t{% if taxes.charge_type != 'Actual' %}\r\n                <th style=\"min-width:45px;padding:0px !important;text-align:right;\">Rate(%)</th>\r\n        \t\t<th style=\"min-width:70px;padding:0px !important;text-align:right;\">{{ taxes.account_head.split(abbr)[0] }}(Rs)</th>\r\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\r\n            {% endif %}\r\n    \t{% endfor %}\r\n    </tr>\r\n    \r\n    {% set items = doc.items|sort(attribute='item_code') %}\r\n    {% set current_item = {'ci':items[0].item_code} %}\r\n    {% for model in items %}\r\n    \t{% if current_item.ci != model.item_code or loop.first %}\r\n        \t{% if current_item.update({'ci':model.item_code}) %}{% endif %}\r\n    \t<tr>\r\n        \t<td>{{ model.item_code }}({{ frappe.db.get_value(\"Item\", model.item_code, \"gst_hsn_code\") }})</td>\r\n\t\t{% for tax in doc.taxes %}\r\n        \t{% if tax.charge_type != 'Actual' %}\r\n\t\t    \t{% set i = tax.item_wise_tax_detail|json_load %}\r\n\t\t        {% for key, val in i.items() %}\r\n\t            \t{% if key == model.item_code %}\r\n\t\t                <td style=\"text-align:right;\">{{ val[0] }}</td>\r\n\t\t                {% for i in range(key_index[tax.account_head]) %}\r\n\t\t                \t{% if loop.last %}\r\n\t\t                \t  <td style=\"text-align:right;\">{{ val[1] }}</td>\r\n\t\t                    {% endif %}\r\n\t\t                {% endfor %}   \r\n\t                {% endif %}\r\n\t\t        {% endfor %}\r\n            {% endif %}\r\n\t    {% endfor %}\r\n        {% endif %}\r\n        </tr>\r\n    {% endfor %}\r\n    <tr height=\"100%;\"> \r\n         <td style=\"width=125px;\"> </td>\r\n    </tr>            \r\n  </table>\r\n{% endmacro %}\r\n\r\n{% macro do_subtotals() %}\r\n    <!-- DIFFRENT VAT & CHARGES PRINT -->\r\n    {% if doc.special_invoice == 'SEZ Supply' %}\r\n      <div style=\"flex:2;font-size:10px;padding-right:30px;\">\r\n      \tSupply meant for supply to SEZ unit for authorised operations under Bond or Letter of Undertaking without payment of Integrated tax\r\n      </div>\r\n    {% endif %}\r\n    \r\n    {% set max_line_height = \"15px\" %}\r\n\t<div style=\"display:flex;justify-content:flex-end;flex-wrap:wrap;flex-direction:column;align-items:flex-end;width:100%;flex:1;\">\r\n                \r\n\t\t<!-- SUB TOTAL -->\r\n\t\t<div style=\"width:100%;\">\r\n\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\tTaxable Value\r\n\t\t\t</div>\r\n\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t{{ doc.get_formatted(\"net_total\") }}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t    <!-- END SUB TOTAL -->\r\n                \r\n\t\t{%- for row in doc.taxes -%}\r\n            {% if row.tax_amount != 0 %}\r\n\t\t\t\t<div style=\"width:100%;\">\r\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ row.description }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ row.get_formatted(\"tax_amount\", doc) }}\r\n\t\t\t\t\t</div>\r\n                    <div style=\"clear:both;\"></div>\r\n\t\t\t\t</div>\r\n            {% endif %}\r\n\t\t{%- endfor -%}\r\n        \r\n        {% if not doc.taxes or doc.total_taxes_and_charges == 0 %}\r\n\t\t\t\t<div style=\"width:100%;\">\r\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\tSGST\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\r\n\t\t\t\t\t</div>\r\n                    <div style=\"clear:both;\"></div>\r\n\t\t\t\t</div>        \t\r\n\t\t\t\t<div style=\"width:100%;\">\r\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\tCGST\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\r\n\t\t\t\t\t</div>\r\n                    <div style=\"clear:both;\"></div>\r\n\t\t\t\t</div>        \t\r\n\t\t\t\t<div style=\"width:100%;\">\r\n\t\t\t\t\t<div style=\"width:50%;float:left;padding: 1px !important;padding-left:10px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\tIGST\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text-right\" style=\"width:50%;float:left;padding: 1px !important;padding-right: 2px !important;max-height: {{ max_line_height }};overflow: hidden;\">\r\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, currency=\"\") }}\r\n\t\t\t\t\t</div>\r\n                    <div style=\"clear:both;\"></div>\r\n\t\t\t\t</div>        \t                \r\n        {% endif %}\r\n        \r\n\t</div>\r\n{% endmacro %}\r\n\r\n\r\n{% macro attach_tax_columns_vertical_lines(is_last) %}\r\n\t\t<!-- WAS {'height':\"100%\"} -->\r\n\t\t{% set columnheight = {'height':\"initial\"} %}\r\n\t\t{% if not is_last %}\r\n        \t<!-- WAS {'height':\"100%\"} -->\r\n        \t{% if columnheight.update({'height':\"initial\"}) %} {% endif %}\r\n        {% endif %}\r\n        \r\n\t\t{% set total_len = doc.taxes|length - (doc.taxes|selectattr(\"charge_type\", \"equalto\", \"Actual\")|list)|length %}\r\n\t\t{% for n in range(1, total_len+1) %}\r\n                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;\">&nbsp</div> -->\r\n\t\t\t\t<div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>               \r\n        {% endfor %}       \r\n        <div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;height:{{ columnheight.height }}\">&nbsp</div>       \r\n        \r\n\t\t{% if is_last %}\r\n\t\t\t{% set tax_columns = {'ln':0, 'width':'100%'} %}\r\n\t\t   \t{% for taxes in doc.taxes %}\r\n\t\t    \t{% if taxes.charge_type != 'Actual' %}\r\n\t    \t    \t{% if tax_columns.update({\"ln\":tax_columns.ln + 1}) %} {% endif %}\r\n\t\t        {% endif %}\r\n\t    \t{% endfor %}\r\n            {% if tax_columns.ln == 1 %}\r\n            \t{% if tax_columns.update({'width':\"34%\"}) %}{% endif %}\r\n            {% endif %}\r\n            {% if tax_columns.ln == 2 %}\r\n            \t{% if tax_columns.update({'width':\"32%\"}) %}{% endif %}\r\n            {% endif %}            \r\n        \t<div style=\"background:white !important;position:absolute;height:auto;width:{{ tax_columns.width }};border-top:1px solid gray;bottom:0;right:0;margin-right:1px;margin-left:1px;border-left:1px solid gray;display:flex;padding-bottom:4px;padding-top:4px;padding-right:1px;\">\r\n            \t{{ do_subtotals() }}\r\n        \t</div>\r\n        {% endif %}\r\n{% endmacro %}\r\n\r\n{% macro attach_tax_columns_headers() %}\r\n\t\t{% for taxes in doc.taxes %}\r\n        \t{% if taxes.charge_type != 'Actual' %}\r\n                <!-- <div style=\"width:{{ column_widths.tax_rate_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/>(%)</div> -->\r\n        \t\t<div style=\"width:{{ column_widths.tax_amount_column_width }};vertical-align:middle !important;\">{{ taxes.account_head.split(abbr)[0] }}<br/><span style=\"font-size:10px;\">Amt/Rate(%)</span></div>\r\n                {% if key_index.update({taxes.account_head:loop.index}) %}{% endif %}\r\n            {% endif %}\r\n       {% endfor %}\r\n       <div style=\"width:{{ column_widths.total_amount_column_width }};vertical-align:middle !important;padding-right:4px !important;float:left;\">Total<br/>(Rs)</div>\r\n{% endmacro %}\r\n\r\n{% macro attach_tax_columns(model, current_item, first) %}\r\n    {% set item_details = {} %}\r\n    {% for item in doc.items %}\r\n        {% if item_details.update({item.idx:{'item_code':item.item_code,'item_rate':item.rate,'item_qty':item.qty,'net_rate':item.net_rate,'net_amount':item.net_amount}}) %} {% endif %}\r\n    {% endfor %}\r\n    \r\n\t{% set total_amt = {'total':0} %}\r\n\t{% for tax in doc.taxes %}\r\n       \t{% if tax.charge_type != 'Actual' %}\r\n\t    \t{% set i = tax.item_wise_tax_detail|json_load %}\r\n\t        {% for key, val in i.items() %}\r\n            \t{% if key == model.item_code %}\r\n                    \r\n                   \t{# set value = (val[1] / same_item_total_qty.get(key)|float )|float * same_item_in_different_rows.get(key+('idx:'+model.idx|string), 1)|float #}\r\n                    {% set value = (model.net_amount * val[0] / 100)|float|round(2) %}\r\n                    \r\n\t                <!-- <div style=\"width: {{ column_widths.tax_rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(val[0]) }}</div> -->\r\n\t                {% for i in range(key_index[tax.account_head]) %}\r\n\t                \t{% if loop.last %}\r\n\t                \t  <div style=\"width: {{ column_widths.tax_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray !important;padding-left:2px !important;float:left;display:table-cell;\">{{ frappe.utils.fmt_money(value) }}<br/><span style=\"font-size:10px;\">{{ frappe.utils.fmt_money(val[0]) }}%</span></div>\r\n                          {% if total_amt.update({'total':total_amt.total+value}) %} {% endif %}\r\n\t                    {% endif %}\r\n\t                {% endfor %}   \r\n                {% endif %}\r\n\t        {% endfor %}\r\n           {% endif %}\r\n\t{% endfor %}\r\n   \t<div style=\"width: {{ column_widths.total_amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n              \t{{ frappe.utils.fmt_money(model.net_amount+total_amt.total) }}\r\n    </div>                                         \r\n{% endmacro %}\r\n\r\n\r\n{% macro insert_vertical_lines(is_last) %}\r\n      <div style=\"flex:1;display:flex;position:relative;\">\r\n           <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;\"></div>\r\n           <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>                            \r\n           <div style=\"width: {{ column_widths.description_column_width }};padding-left:4px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;\"></div>\r\n           <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\r\n           <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>\r\n           <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:4px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;\"></div>                        \r\n           {% if taxes_as_columns %}\r\n              \t{{ attach_tax_columns_vertical_lines(is_last) }}\r\n           {% endif %}                            \r\n           <div style=\"clear:both;\"></div>\r\n     </div>  \r\n{% endmacro %}\r\n\r\n\r\n{% macro print_taxes_charges() -%}\t\r\n\t<div style=\"display:flex;width:100%;height:100%;flex-grow:1;\">\r\n\t    {% set taxes_band_width = {'analysis':\"70%\",'subtotal':\"30%\"} %}\r\n\t    {% if not print_tax_analysis %}\r\n\t        {% if taxes_band_width.update({'analysis':\"0%\",'subtotal':\"100%\"}) %} {% endif %}\r\n\t    {% endif %}\r\n    \r\n\t\t{% if print_tax_analysis %}    \r\n\t\t\t<div style=\"width:{{ taxes_band_width.analysis }};padding-right:10px;\">        \r\n\t\t\t    \t<div style=\"max-width:50px;float:left;\"><B>TAX BREAKUP</B></div>    \r\n\t\t\t\t       \t{{ tax_analysis_print_format() }}\r\n\t\t\t</div>                 \r\n\t    \t<div style=\"width:{{ taxes_band_width.subtotal }};flex-grow:1;background:#eee !important;\">\r\n\t    \t\t{{ do_subtotals() }}\r\n\t\t    </div>        \r\n\t\t{% endif %}                    \r\n    </div>\r\n{%- endmacro %}\r\n\r\n<!---------------------------------------------------------------->\r\n<!-------- END OF CUSTOM MACROS FOR LOCAL USE -------------------->\r\n<!---------------------------------------------------------------->\r\n\r\n<!-- Macro for Header -->\r\n{% macro setheader() -%}\r\n{% set header_column_width=20 %}\r\n{% set value_column_width=80 %}\r\n<div style=\"width: 100%;height:100%;\">\r\n\t<div style=\"width:100%;overflow: hidden\">\r\n    <div style=\"width: 100%;height:100%\">\r\n\t\t<div style=\"display:flex;flex-direction:row;\">\r\n\t\t<div style=\"display:flex;flex-direction:column;flex:1;\">\r\n        {% if letter_head and not no_letterhead %}\r\n            <div style=\"width: 100%;padding-bottom: 3px !important;\">\r\n                {{ vehicle_letter_head() }}\t\r\n            </div>\r\n        <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\r\n        {% endif %}\r\n        {% set customer_details = frappe.get_doc(\"Customer\", doc.customer) %}\r\n                <div style=\"height: 85px;max-height: 85px;overflow: hidden;background: #eee !important;flex:1\">\r\n                    <div style=\"width: 100%;\">\r\n\t\t\t        \t<div style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;background:white !important;\">\r\n\t\t\t\t           \t<div style=\"width:100%;font-size:9px;\">\r\n\t\t\t                \t<div style=\"float:right;\">\r\n\t\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\r\n\t\t\t                            <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Triplicate for Supplier</span>\r\n\t\t\t                    </div>\r\n\t\t\t                    <div style=\"float:right;\">\r\n\t\t                    \t\t<span style=\"font-family:wingdings;padding-left:5px;\">o</span>\r\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Duplicate for Transporter</span>\r\n\t\t\t                    </div>                                \r\n\t\t\t                \t<div style=\"float:right;\">\r\n\t\t\t                    \t<span style=\"font-family:wingdings;\">o</span>\r\n\t\t\t                        <span style=\"font-family:ARIAL NARROW;text-transform:uppercase;\">Original For Recipient</span>\r\n\t\t\t                    </div>                                \r\n\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t\t                </div>\r\n\t\t\t            </div>               \r\n                        <div style=\"width: 100%;padding-top: 3px !important;padding-bottom:3px !important;text-align:right;\">\r\n                            <div style=\"width: 30%;color: black;font-size: 9px;text-transform: uppercase;text-align: left;vertical-align: middle !important; padding-left: 5px !important;float:left;\">\r\n\t                    \t\tTax Payable on Reverse Charge: <b>NO</b>                               \r\n                                <br/>Page {{ total_pages|length }} of {{ total_pages_as_per_rows }}                                \r\n                            </div>\t\t\t\t\t\r\n                            <div style=\"width: 40%;color: black;text-align: center;vertical-align: middle !important;float:left;\">\r\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"Tax Invoice\" }}</B></span>\r\n                            </div>\t\t\t\t\t\r\n                            <div style=\"width: 30%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important; padding-right: 5px !important;float:left;\">\r\n                                <B>{{ doc.reporting_name or doc.name }}<br>Date: {{ doc.get_formatted(\"posting_date\") }}</br> </B>\r\n                            </div>\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\t\t\t</div>\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\r\n        <div style=\"height:100%;\" class=\"customer-details\">\r\n            <div style=\"width: 100%;padding: 1px !important;\">\r\n                <div style=\"border-collapse: collapse;width: 100%;margin-top:2px;line-height:15px;\">\r\n                        <div style=\"width: 50%;vertical-align: middle !important;float:left;\">\r\n                            <div style=\"width: 100%;font-size:14px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\r\n                                        Name\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\r\n                                    \t{# set sal = frappe.db.get_value(\"Customer\", doc.customer, \"salutation\") #}\r\n                                        <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" %}\r\n                                \t<div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                        \r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \r\n\t                                    </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t                                </div>                                                                \r\n\t\t\t\t\t\t\t\t{% endif %}                                    \r\n                                {% if customer_details.company_name %}\r\n\t                                <div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n                                    \t<div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\r\n\t                                    </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n    \t                            </div>\r\n                                {% endif %}\r\n                            </div>\r\n                        </div>\r\n                    \t<div style=\"width:50%;vertical-align:middle !important;float:left;\">\r\n                        \t{% set san =  frappe.db.get_value(\"Address\", doc.shipping_address_name, \"address_name\") %}\r\n                    \t\t<div style=\"width:100%;font-size:14px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;float:left;\">\r\n                                        Name\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;padding-top:5px !important;float:left;\">\r\n                                    \t{% if san %} \r\n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ san }}</B></span>\r\n                                        {% else %}\r\n                                        \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ customer_details.salutation or \"\" }} {{ doc.customer_name }}</B></span>\r\n                                        {% endif %}\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n                                {% if customer_details.relation_to and customer_details.relation_to != \"\" and not san %}\r\n                                \t<div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">                                        \r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>{{ customer_details.relation_to }} {{ customer_details.relation_name }}</B></span>                                        \r\n\t                                    </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t                                </div>                                                                \t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t{% endif %}                                                                    \r\n                                {% if customer_details.company_name %}\r\n                                \t<div>\r\n\t                                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t                                    \t&nbsp\r\n\t                                    </div>\r\n\t                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ customer_details.company_name }}</B></span>\r\n    \t                                </div>\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t                                </div>                            \r\n                                {% endif %}\r\n\t\t                    </div>\r\n\t                    </div>  \r\n\t\t\t\t\t\t<div style=\"clear:both;\"></div>                                    \t\r\n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\r\n                            <div style=\"width: 100%;font-size:12px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\r\n                                        <span style=\"color:red;\">Billing Address</span>\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;float:left;\">\r\n                                        <B>{{ doc.address_display }}</B>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n\t\t\t                    <div>\r\n\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left\">\r\n\t\t\t\t                        \t<span style=\"color:red;\">Contact No</span>\r\n\t\t\t                        </div>\r\n\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t\t\t                            {% if not doc.contact_person %}\r\n\t\t\t                                {% set contact_filters = [\r\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\r\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\r\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\r\n                                            %}\r\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\r\n                                        \t{% for c in contact_list %}\r\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\r\n                                            \t    <b>{{ p.phone }}</b>\r\n                                    \t        {% endfor %}\r\n                                    \t    {% endfor %}\r\n                                    \t{% else %}\r\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\r\n                                            \t<b>{{ p.phone }}</b>\r\n                                    \t    {% endfor %}\r\n                                    \t{% endif %}\r\n\t\t\t                        </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t\t                    </div>    \r\n                                {% if customer_details.aadhar_card_no %}\r\n                                \t<div>\r\n\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t\t\t\t                        \t<span style=\"color:red;\">Aadhar No</span>\r\n\t\t\t                        </div>\r\n\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n                                    \t<b>{{ customer_details.aadhar_card_no }}</b>\r\n\t\t\t                        </div>                                    \t\r\n                                    <div style=\"clear:both;\"></div>\r\n                                    </div>\r\n                                {% endif %}\r\n\t\t\t\t                {% set customer_pan = frappe.db.get_value(\"Customer\", doc.customer, \"pan\") %}                \r\n                            </div>\r\n                        </div>\r\n                        {% if doc.shipping_address_name %}                        \r\n                        <div style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;float:left;\">\r\n                            <div style=\"width: 100%;font-size:12px;\">\r\n                                <div> \r\n                                    <div style=\"width: {{ header_column_width }}%;float:left;\">\r\n                                        <span style=\"color:red;\">Delivery Address</span>\r\n                                    </div>\r\n                                    <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n                                        <B>{{ doc.shipping_address }}</B>\r\n                                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                </div>\r\n                                {% if doc.customer_vehicle_no %}\r\n\t\t\t                    \t<div>\r\n\t\t\t\t                    \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t\t\t\t\t                        \t<span style=\"color:red;\">Vehicle No</span>\r\n\t\t\t\t                        </div>\r\n\t\t\t\t                        <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t                                    \t<b>{{ doc.customer_vehicle_no }}</b>                            \r\n\t\t\t\t                        </div>\r\n\t\t\t\t                    </div>          \r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n                                {% endif %}\r\n\t\t\t\t                {% if customer_pan %}\r\n\t\t\t\t                <div>\r\n\t\t\t\t                \t<div style=\"width: {{ header_column_width }}%;float:left;\">\r\n\t\t\t\t                    \t<span style=\"color:red;\">PAN No</span>\r\n\t\t\t\t                    </div>\r\n\t\t\t\t                    <div style=\"width: {{ value_column_width }}%;float:left;\">\r\n\t\t\t\t                    \t<b>{{ customer_pan }}</b>\r\n\t\t\t\t                    </div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t\t\t                </div>\r\n\t\t\t\t                {% endif %}                                \r\n                                {% if doc.items[0].is_electric_vehicle == 1 %}\r\n                                \t<div>\r\n\t\t\t\t                    \t<div style=\"width: {{ long_header_column_width }}%;float:left;\">\r\n\t\t\t\t\t                        \t<span style=\"color:red;\">Dealer FAME II Code</span>\r\n\t\t\t\t                        </div>\r\n\t\t\t\t                        <div style=\"width: {{ long_header_value_column_width }}%;float:left;\">                                    \r\n\t                                    \t<span style=\"text-align: left;text-transform:uppercase;\"><B>{{ frappe.db.get_value(\"Item\", doc.items[0].item_code, \"fame_code\") }}</B></span>\r\n                                        </div>\r\n                                \t</div>\r\n                                    <div style=\"clear:both;\"></div>\r\n                                {% endif %}\r\n                            </div>\r\n                        </div>\r\n                        {%- endif %}\r\n\t\t\t\t\t\t<div style=\"clear:both;\"></div>                 \t\r\n                <div style=\"width:100%;\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\r\n\t                <div colspan=2 style=\"width:100%;padding-bottom: 3px !important;padding-top: 3px !important;\">\r\n                    \t<div style=\"width:100%;display:flex;\">\r\n\t               \t\t{% if doc.hypothecation %}                    \t    \r\n\t               \t\t    <div style=\"width:100%;font-size:12px;float:left;\">\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tHypothecation: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"overflow:hidden;padding-left:10px;\">\r\n    \t                       \t\t\t\t<b>{{ doc.hypothecation }}</b>\r\n\t                       \t\t\t    </div>                        \r\n                                </div>\r\n\t               \t\t\t    {% if doc.reference %}\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tHYP Reference: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"padding-left:10px;float:left;\">\r\n    \t                       \t\t\t\t<b>{{ doc.reference }}</b>\r\n\t                       \t\t\t    </div>                        \r\n                                </div>\r\n\t              \t\t\t    {% endif %}                                \r\n\t                        </div>\r\n\t              \t\t{% endif %} \t                    \r\n\t              \t\t{% if doc.po_no %}\r\n    \t               \t\t<div style=\"width:100%;font-size:12px;\">\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tPurchase Order No: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"overflow:hidden;padding-left:10px;\">\r\n    \t                       \t\t\t\t<b>{{ doc.po_no }}</b>\r\n\t                       \t\t\t    </div>                        \r\n                                </div>\r\n                                <div style=\"width:100%;\">\r\n\t                   \t\t\t\t    <div style=\"color:red;float:left;\">\r\n    \t                       \t\t\t\tPurchase Order Date: \r\n\t                       \t\t\t    </div>\r\n\t                   \t\t\t\t    <div style=\"float:left;padding-left:10px;\">\r\n    \t                       \t\t\t\t<b>{{ doc.get_formatted(\"po_date\") }}</b>\r\n\t                           \t\t\t</div>                        \r\n                                </div>\r\n                            </div>\r\n\t              \t\t{% endif %}                       \r\n                       </div>\r\n\t                </div>                    \r\n                </div> \r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n    <div style=\"width:100%;height: 40px !important;bottom: 0;position: sticky;margin-top:2px;font-size: 11px;text-transform:uppercase;\">\r\n    <!-- <div style=\"height: 100%;width: 100%;word-wrap:break-word;\"> -->\r\n        <!-- Column Headings -->\r\n    \t<div style=\"width: 100%;background: #eee !important;min-height: 15%;height: 40px;font-weight: 600;border-bottom: 1px solid #eee;text-align:center;display:flex;align-items:center;border-bottom:1px solid gray;\">\r\n            <div style=\"width: {{ column_widths.serial_no_column_width }};vertical-align:middle !important;\">Sr</div>\r\n            <div style=\"width: {{ column_widths.hsn_no_column_width }};vertical-align:middle !important;\">HSN<br/>Code</div>\r\n            <div style=\"width: {{ column_widths.description_column_width }};vertical-align:middle !important;\">Item Name</div>\r\n            <div style=\"width: {{ column_widths.qty_column_width }};vertical-align:middle !important;\">Qty</div>\r\n            <div style=\"width: {{ column_widths.rate_column_width }};vertical-align:middle !important;\">Rate</div>\r\n            <div style=\"width: {{ column_widths.amount_column_width }};vertical-align:middle !important;\">Amount</div>\r\n            {% if taxes_as_columns %}\r\n            \t{{ attach_tax_columns_headers() }}\r\n            {% endif %}                        \r\n        </div>\r\n    <!-- </div> -->\r\n    </div>\r\n</div>\r\n{%- endmacro %}\r\n<!-- End Macro -->\r\n\r\n\r\n<!-- Footer Macro -->\r\n{% macro setfooter(islast) -%}\r\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \r\n Would Anchor Table to the Bottom of DIV -->\r\n<div style=\"height:100%;width:100%;display: flex;flex-direction:column;flex:1;\">\r\n\t\t<!-- CONTINUED BAND -->\r\n\t\t{% if not islast %}\r\n\t\t<div style=\"width: 100%;padding-top: 10px;padding-bottom:10px;\">\r\n\t\t\t<div style=\"width: 100%;\">\r\n\t        \t<div style=\"text-align:right;\">\r\n\t\t                <b>Continued ... </b>\r\n\t\t        </div>\r\n            </div>\r\n\t\t</div>\r\n\t\t{% endif %}\r\n        <!-- END CONTINUED BAND -->\r\n                \r\n        <!-- TAXES BAND -->\r\n\t\t{% if islast  and doc.taxes|length > 0 %}\r\n\t\t<div style=\"width: 100%;padding-top:2px;display:flex;flex-direction:column;\">\r\n\t\t\t\t{{ print_taxes_charges() }}\r\n        </div>\r\n\t\t{% endif %}\r\n        <!-- END TAXES BAND -->\r\n\r\n\t\t<!-- TOTAL BAND -->\r\n\t\t{% if islast %}\r\n        <div style=\"width: 100%;min-height:35px;background:#eee !important;font-size:11px;\">\r\n        \t<div style=\"float:left;width:60%;height:100%;padding-top:5px;\">\r\n\t\t\t\t\t{{ frappe.utils.money_in_words(doc.grand_total) }}\r\n\t\t\t</div>\r\n            <div style=\"width:40%;font-size:14px;vertical-align: middle !important;text-align:right;float:left;height:100%;padding-top:5px;padding-right:1px;\">\r\n                \t<span style=\"text-transform:uppercase;\">Total</span> <b>{{ doc.get_formatted(\"grand_total\") }}</b>\r\n            </div>\r\n        </div>\r\n\t\t{% endif %}\r\n        <!-- END TOTAL BAND -->\r\n        \r\n        \r\n     {% set lower_header_height = \"60%\" %}\r\n     {% if not (islast and doc.taxes|length > 0) %}\r\n         {% set lower_header_height = \"60%\" %}\r\n     {% endif %}\r\n     <div style=\"width: 100%;flex:1;\">\r\n     \t\t<hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;height:1px !important;\"></hr>\r\n            <div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t            <div style=\"padding-right:5px;flex:.6;\">\r\n\t\t\t\t\t\t<div style=\"width:100%;font-size:10px;background: #eee !important;\">\r\n                        \t<b>Terms & Conditions</b>\r\n                        </div>\t\t\t\t\t   \r\n\t\t\t\t\t\t<div style=\"font-size: 10px;\">\r\n\t\t\t\t\t\t\t{{ vehicle_terms() }}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t            <div style=\"margin-left:10px;overflow:hidden;font-size:11px;display:flex;flex-direction:column;flex:.3;\">\r\n                \t<div style=\"width:100%;\">\r\n                    \t<div style=\"width:100%;background:#eee !important;padding-left:5px;\">\r\n\t                    \t<span style=\"font-size:10px;\"><b>Company's Registration Details</b></span>\r\n                        </div>\r\n\t\t\t\t\t\t<div style=\"padding-left:5px;\">\r\n\t\t\t\t\t\t\t{{ frappe.db.get_value(\"Company\", doc.company, \"registration_details\") or \"\" }} \r\n\t\t\t\t\t\t</div>          \r\n                    </div>\r\n                    <div style=\"padding-top:10px;flex:1;\">\r\n                    \t<div style=\"background:#eee !important;width:100%;padding-left:5px;\">\r\n                    \t\t<b>Transportation Details</b>\r\n                        </div>\r\n                        <div style=\"padding-left:5px;\">\r\n                        \tVehicle No: {{ doc.vehicle_no or \"\" }}\r\n                        \t<br/>Date & Time of Supply: {{ doc.date_time_of_supply or \"\" }}\r\n                        \t<br/>Place of Supply: {{ doc.place_of_supply or \"\" }}\r\n                       </div>\r\n                    </div>\r\n\t            </div>\r\n            {% if doc.irn or doc.qrcode_image %}\r\n            <div style=\"flex:.1;padding:5px;flex-grow:.2;\">\r\n                <img src=\"{{ doc.qrcode_image }}\">\r\n            </div>\r\n            {% endif %}\r\n        </div>\r\n        {% if doc.irn or doc.qrcode_image %}\r\n            <div style=\"width:100%;background: #eee;\">\r\n                IRN No: {{ doc.irn }}\r\n            </div>\r\n        {% endif %}            \r\n     </div>\r\n     <div style=\"width: 100%;bottom:0px;font-size:12px;\">    \r\n        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;height:1px !important;\"></hr></div>\r\n     \t<div style=\"width:100%;min-height:60px;display:flex;flex-direction:column;\">\r\n\t        <div style=\"height: 35%;background: #eee !important;flex:.50;display:flex;\">\r\n                <div style=\"height: 20%;width: 33%; text-align: left;\">\r\n                      <!-- Intentionally Left Blank -->\r\n                </div>\r\n\t            <div style=\"height: 20%;width: 34%; text-align: center;\">\r\n\t                <!-- Intentionally Left Blank -->\r\n\t            </div>                                            \r\n\t            <div style=\"height: 100%;width: 33%; text-align: right;padding-bottom:25px !important;\">\r\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\r\n\t            </div>\r\n\t        </div>\r\n\t        <div style=\"background: #eee !important;padding-bottom:2px;flex:.50;display:flex;\">\r\n\t            <div style=\"height: 20%;width: 33%; text-align: left;padding-left: 10px !important;\">\r\n\t                Receivers Signature\r\n\t            </div>            \r\n\t            <div style=\"height: 20%;width: 34%; text-align: center;\">\r\n\t                E. & O.E.\r\n\t            </div>                            \r\n\t            <div style=\"height: 20%;width: 33%; text-align: right;\" colspan=\"100%\">\r\n\t                <span style=\"padding-right:10px;\">Manager</span>\r\n\t            </div>\r\n\t        </div>            \r\n         </div>\r\n     </div>\r\n    \r\n</div>\r\n{%- endmacro %}\r\n<!-- End Macro -->\r\n\r\n{% macro print_serialno(itemcode, serialnos) %}\r\n       {% if serialnos != None -%}\r\n           \t<div style=\"color:brown;font-size:11px;margin-left:5px;\">\r\n           \t{% set item_is_vehicle = frappe.db.get_value(\"Item\",itemcode,\"is_vehicle\") %}\r\n            {% if item_is_vehicle %}\r\n                  \tChassis No: \r\n            {% else %}\r\n                    Serial No:\r\n            {% endif %}                                                                                                \r\n            {%- for serial in serialnos.split('\\n') -%}   \r\n                {% if serial != '' %}\r\n                   {% set serialdoc = frappe.get_doc(\"Serial No\",serial|trim) %}\r\n\t               <p style=\"display:inline;\">\r\n\t                      \t{{ serialdoc.serial_no }}\r\n\t               </p>\r\n\t\t        {%- endif %}\r\n\t\t    {%- endfor %}\r\n            </div>\r\n\t\t{%- endif %}\t\r\n{% endmacro %}\r\n\r\n\r\n{% macro do_body() -%}\r\n\t\t\t\t<!-- Inner Body Container -->\r\n\t            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\r\n\r\n\t\t\t\t    {# set items = doc.items|sort(attribute='item_code') #}\r\n                    {% set items = doc.items %}\r\n                    \r\n                    {% set count_pg_items_row = {'rows':0,'total_rows':0} %}\r\n                   \r\n                    {%- for row in items -%}\r\n\r\n                        {% if loop.index % 2 == 0 -%}\r\n                        <!-- Do Something / Alternative Rows -->\t   \r\n                        {%- endif %}\r\n\r\n                        <div style=\"min-height: {{ row_height }};height: {{ row_height }};border-bottom:1px solid #eee;overflow:hidden;display:flex;width:100%;\">\r\n                            <div style=\"width: {{ column_widths.serial_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;display:table-cell;\">\r\n                            \t\t{{ loop.index }} \r\n                            </div>\r\n                            <div style=\"width: {{ column_widths.hsn_no_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\">\r\n                            \t\t{{ row.gst_hsn_code }} \r\n                            </div>                            \r\n                            <div style=\"width: {{ column_widths.description_column_width }};padding-left:1px !important;padding-top:3px !important;overflow:hidden;float:left;border-left:1px solid gray;display:table-cell;\"> \r\n                            \t<div style=\"height: {{ row_height }};\">\r\n                                    {% if row.brand %}\r\n\t                                <div style=\"display:inline;\">\r\n\t                                    {{ row.brand }} \r\n\t                                </div>\r\n                                    {% endif %}\r\n\t                                <div style=\"display:inline;\">\r\n\t                                \t{{ row.item_name }}\r\n\t\t                            </div>\r\n                                    <div style=\"display:inline;\">\r\n                                    \t<div class=\"description_div\" style=\"color:blue;margin-left:5px;\">\r\n                                    \t\t<I>{{ row.description }}</I>\r\n                                        </div>\r\n                                    </div>\r\n                                                                       \r\n                                    <!-- SALES INVOICE ROW SERIAL NO -->\r\n                                    {{ print_serialno(row.item_code, row.serial_no) }}\r\n                                    <!-- SALES INVOICE ROW SERIAL NO -->\r\n                                    \r\n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\r\n                                    {% if doc.packed_items %}\r\n                                       <div style=\"margin-left:10px;\">\r\n                                    \t{% for packs in doc.packed_items %}\r\n                                        \t{% if packs.parent_item == row.item_code %}\r\n                                            <div>\r\n\t\t\t\t                                <div style=\"display:inline;\">\r\n\t\t\t\t                                \t{{ packs.item_name }}\r\n\t\t\t\t\t                            </div>\r\n\t\t\t                                    <div style=\"display:inline;\">\r\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.description }} </span></I>\r\n\t\t\t                                    </div>\r\n\t\t\t                                    <div style=\"display:inline;\">\r\n\t\t\t                                    \t<I><span style=\"color:blue;\">&nbsp - &nbsp {{ packs.get_formatted(\"qty\", doc) }} {{ packs.uom or packs.stock_uom }} </span></I>\r\n\t\t\t                                    </div>          \r\n                                                {{ print_serialno(packs.item_code, packs.serial_no) }}\r\n\t\t                                    </div>\t\r\n                                            {% endif %}\r\n                                        {% endfor %}\r\n                                      </div>\r\n                                    {% endif %}\r\n                                    <!-- SALES INVOICE PACKED ITEM SERIAL NO -->\r\n                                    \r\n                                    <!-- PRINT REMARKS -->\r\n                                    {% if row.remarks %}\r\n                                    <span style=\"font-size:9px;\">                                    \r\n                                        <div style=\"width:100%;\">\r\n                                        \t<div style=\"float:left;margin-left:5px;\">\r\n                                        \t\tRemarks:\r\n                                            </div>\r\n                                            <div style=\"width:85%;float:left;\">\r\n                                            \t{{ row.remarks }}\r\n                                            </div>\r\n                                       </div>\r\n                                    </span>                                       \r\n                                    {% endif %}\r\n                                    \r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div style=\"width: {{ column_widths.qty_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n                                \t{{ row.get_formatted(\"qty\", doc) }} {{ row.uom or row.stock_uom }}\r\n                            </div>\r\n                            <div style=\"width: {{ column_widths.rate_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n                                \t{{ frappe.utils.fmt_money(row.net_rate) }}\r\n                            </div>\r\n                            <div style=\"width: {{ column_widths.amount_column_width }}; text-align: right;padding-right:1px !important;padding-left:1px !important;padding-top:3px !important;overflow:hidden;border-left:1px solid gray;float:left;display:table-cell;\">\r\n                                \t{{ frappe.utils.fmt_money(row.net_amount) }}\r\n                            </div>     \r\n            \t\t\t\t{% if taxes_as_columns %}\r\n            \t\t\t\t\t{{ attach_tax_columns(row,current_item,loop.first) }}\r\n            \t\t\t\t{% endif %}                                                                                    \r\n                            <div style=\"clear:both;\"></div>\r\n                        </div>\r\n\r\n\t                <!-- Page Break Logic Here -->\r\n\t                {% if ((count_pg_items_row.rows % display_rows_per_page == 0  and count_pg_items_row.total_rows < doc.items|length and count_pg_items_row.rows != 0) or row.page_break) and total_pages|length < total_pages_as_per_rows  %}\r\n\t\t                <!-- Fill Empty Space -->\r\n                        {{ insert_vertical_lines(false) }}\r\n                        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\r\n                        \r\n\t\t\t\t\t\t<!-- Need to Inner Body Container Used Above -->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<!-- Page Break -->\r\n\t\t\t\t\t\t\t{{ insert_page_break(true) }}\r\n                            \r\n\t\t\t\t\t\t\t<!-- Inner Body Container -->\r\n                            <div style=\"width: 100%;height: 100%;font-size:12px;display:flex;flex-direction:column;flex:1;\">\r\n                            \r\n                            {% if (count_pg_items_row.update({\"rows\":0})) %} {% endif %}\r\n                            \r\n\t                {% endif %}\r\n                    <!-- End Page Break Logic -->\r\n                    \r\n                    {% if (count_pg_items_row.update({\"rows\":count_pg_items_row.rows+1})) %} {% endif %}\r\n                    {% if (count_pg_items_row.update({\"total_rows\":count_pg_items_row.total_rows+1})) %} {% endif %}\r\n                \r\n                {% endfor %}\r\n\r\n                <!-- Fill Empty Space -->\r\n                {{ insert_vertical_lines(true) }}\r\n\t\t\t\t<div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\r\n                \r\n                <!-- End Inner Body Container -->\r\n                </div>\r\n{%- endmacro %}\r\n\r\n<!--------------------------------------------------------------------------------------------------->\r\n<!-- Don't Edit the Following Blocks -->\r\n<!-- Instead Use The Macros Above -->\r\n<!--------------------------------------------------------------------------------------------------->\r\n\r\n\r\n{% macro insert_page_break(test_condition) -%}\r\n\t{% if test_condition %} \r\n\r\n\t\t                <!-- Fill Empty Space -->\r\n\t\t                <!-- <div style=\"height: 100%\"></div> -->\r\n\r\n\t\t\t<!-- End Body Container -->\r\n\t\t        </div>\r\n\r\n\t\t    <!-- End Main Body Div -->  \r\n\t\t    </div>\r\n\r\n\t\t    <!-- Set Footer -->\r\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\r\n\t\t\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \r\n\t\t\t\t\t{{ setfooter(false) }}\r\n\t\t\t\t</div>\r\n\t\t    </div>\r\n\r\n\r\n\t\t<!-- End Main Div -->\r\n\t\t</div>\r\n\r\n\r\n\t\t<!-- PAGE BREAK -->\r\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\r\n\r\n\t\t<!-- Logic to Count Total Number of Pages -->\r\n\t\t{% if total_pages.append('1') %} {% endif %}\t\r\n\r\n\t\t<!-- Start Another Main Div Tag -->\r\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">    \r\n\r\n\t\t    <!-- Set New Header -->\r\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\r\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\r\n\t\t\t\t\t{{ setheader() }}\r\n\t\t\t\t</div>\r\n\t\t    </div>\r\n\r\n\r\n\t\t    <!-- Start a New Body -->\r\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \r\n\r\n\t\t\t\t<!-- New Body Container -->\r\n\t\t\t\t<div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\r\n\r\n\t{% endif %}\r\n{%- endmacro %}\r\n\r\n<!-- Set Global Default font -->\r\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\r\n\r\n<!-- Main Div Tag -->\r\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\r\n\t<!-- Logic to Count Total Number of Pages -->\r\n\t{% set total_pages = [1] %}\r\n\r\n    <!-- Set Header -->\r\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;order:1;\">\r\n\t\t<div style=\"width: 100%;height:100%;\">\r\n\t\t\t{{ setheader() }}\r\n\t\t</div>\r\n    </div>\r\n\r\n    <!-- Set Body -->\r\n    <!-- Main Body Tag -->\r\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;order:2;\"> \r\n        <!-- Body Container -->\r\n        <div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\r\n        \r\n        \t{{ do_body() }}\r\n\t\r\n        <!-- End Body Container Div -->\r\n        </div>\r\n\r\n        <!-- End Main Body Div -->            \r\n    </div>\r\n\r\n\r\n    <!-- Set last Footer -->\r\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};display:flex;flex-direction:column;overflow: hidden;min-height:200px;order:3;\">\r\n\t\t<div style=\"width: 100%;height: 100%;display:flex;flex-direction:column;flex:1;\"> \r\n\t\t\t{{ setfooter(true) }}\r\n\t\t</div>\r\n    </div>\r\n\r\n</div>\r\n<!-- End Font -->\r\n</span>",
  "line_breaks": 0,
  "modified": "2022-04-15 19:51:33.193405",
  "module": "Accounts",
  "name": "Spares Invoice",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "",
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 57.0.2987.133 -->\n{% set display_rows_per_page = 8 %}\n{% set row_height = \"auto\" %}\n<!-- Make Main Div to Height a of 5.5in and Let the Page Height be 8.9in -->\n{% set div_page_height = \"100%\" %}\n{% set div_max_page_height = \"100%\" %}\n{% set min_page_height = \"100%\" %}\n<!-- This will print a Landscape A5 page on a Portrait A4 Page -->\n{% set min_page_width = \"8.26in\" %}\n{% set max_page_height = \"11.69in\" %}\n{% set max_page_width = \"8.26in\" %}\n{% set preferred_page_height = \"11.69in\" %}\n{% set preferred_page_width = \"8.26in\" %}\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set header_height = \"initial\" %}\n{% set max_header_height = \"initial\" %}\n{% set footer_height = \"initial\" %}\n{% set max_footer_height = \"initial\" %}\n{% set body_height = \"initial\" %}\n{% set max_body_height = \"100%\" %}\n{% set screen_page_padding = \"1cm\" %}\n{% set print_page_padding = \"2cm\" %}\n{% set total_pages_as_per_rows = (doc.items|length / display_rows_per_page)|int %}\n{% if (doc.items|length % display_rows_per_page|int)|int != 0 %}\n    {% set total_pages_as_per_rows = total_pages_as_per_rows + 1 %}\n{% endif %}\n<!-- FLAG to Enable/Disable Tax Analysis -->\n{% set print_tax_analysis = true %}\n{% set global_default_font = \"Monospace\" %}\n{% set serial_no_column_width = \"4%\" %}\n{% set hsn_no_column_width = \"10%\" %}\n{% set description_column_width = \"48%\" %}\n{% set qty_column_width = \"10%\" %}\n{% set rate_column_width = \"14%\" %}\n{% set amount_column_width = \"14%\" %}        \n{% set tax_line_counter = {'tl':1} %}\n{% set tax_line_max_length = 8 %}\n{% set tax_analysis_div_width = \"50%\" %}\n{% set tax_analysis_row_left = \"60%\" %} \n{% set tax_analysis_row_right = \"40%\" %}\n\n\n<!-- DONT EDIT STYLE BELOW -->\n<style>\n    html{\n        height:100%;\n        position:relative\n    }\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    @-moz-document url-prefix() {\n    \t.print-format {\n\t        height: 99% !important;\n        }\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;        \n    }\n    .print-format-gutter {\n        height: 100%;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ min_page_height }} !important;\n            max-width: {{ max_page_width }} !important;\n            padding: {{ screen_page_padding }};\n            background-color: white;\n            box-shadow: 0px 0px 9px rgba(0,0,0,0.5);\n            margin: auto;\n            display: table !important;\n            width: 100%;\n        }\n    }\n    @media print {    \n    \t@page {\n            size: {{ preferred_page_width }} {{ preferred_page_height }} portrait;\n            margin: {{ page_padding }};\n        }    \n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            display: table;\n            padding-top: {{ print_page_padding }};\n            padding-bottom: {{ print_page_padding }};\n                        \n        }        \n    }\n    @media all {\n \t\ttable.body-table tbody tr td {\n    \t\tborder-left-style:solid !important;\n            border-left-color:gray !important;\n            border-left-width:1px !important;\n\t\t}\n        table.body-table tbody tr td:nth-child(1) {\n        \tborder: none !important;\n        }    \n    }\n</style>\n<!-- DONT EDIT STYLE ABOVE -->\n\n{% macro vehicle_letter_head() %}\n    <div style=\"width:100%;\">\n        {{ render_template(frappe.db.get_value(\"Letter Head\", \"Geeta Bhawan\", \"content\"),doc) }}\n    </div>\n{% endmacro %}\n\n\n<!-- Macro for Header -->\n{% macro setheader() -%}\n{% set header_column_width=20 %}\n{% set value_column_width=80 %}\n<div style=\"width: 100%;height:100%;\">\n\t<div style=\"width:100%;overflow: hidden\">\n    <table style=\"width: 100%;height:100%\">\n        {% if letter_head and not no_letterhead -%}\n        <tr>\n            <td colspan=\"100%\" style=\"width: 100%;padding-bottom: 3px !important;\">\n                {{ vehicle_letter_head() }}\t\n            </td>\n        </tr>\n        <tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></td></tr>\n        {%- endif %}\n        <tr style=\"height:100%;\">\n            <td colspan=\"100%\" style=\"width: 100%;padding: 1px !important;\">\n                <div style=\"height: 45px;max-height: 50px;overflow: hidden;background: #eee !important;\">\n                    <table style=\"width: 100%;height:100%;\">\n                        <tr>\n                            <td style=\"height: 100%;width: 30%;color: black;font-size: 9px;text-transform: uppercase;text-align: left;vertical-align: middle !important; padding-left: 5px !important;\">\n                                Page {{ total_pages|length }} of {{ total_pages_as_per_rows }}\n                            </td>\t\t\t\t\t\n                            <td style=\"width: 40%;color: black;text-align: center;vertical-align: middle !important;\" rowspan=\"100%\">\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>INVOICE</B></span>\n                            </td>\t\t\t\t\t\n                            <td style=\"height: 100%;width: 30%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important; padding-right: 5px !important;font-weight:700;\">\n                            \t<div id=\"bill_no\" style=\"width:100%;\">\n                                \t<!-- <B>NO: {{ doc.reporting_name[-4:] or doc.name }} -->\n                                </div>\n                                <div style=\"width:100%;\">\n                                \tDate: {{ doc.get_formatted(\"posting_date\") }}\n                                </div>\n                            </td>\t\t\t\t\t\n                        </tr>\n                    </table>\n                </div>\n                <table style=\"border-collapse: collapse;width: 100%;line-height:15px;\">\n                    <tr>\n                        <td style=\"width: 50%;vertical-align: middle !important;\">\n                            <table style=\"width: 100%;font-size:14px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%;padding-top:5px !important;color:red;\">\n                                        Name\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%;padding-top:5px !important;\">\n                                        <span style=\"text-align: left;text-transform:uppercase;\"><B>{{ doc.customer_name }}</B></span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                \t<td style=\"width: {{ header_column_width }}%;\">\n                                    \t<!-- Intentionally Left Blank -->\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%;\">\n                                    \t{% set coname = frappe.db.get_value(\"Customer\", doc.customer, \"company_name\") %}\n                                        {% if coname %}\n                                    \t\t<span style=\"font-size:12px;text-align: left;\"><B>C/O {{ coname }}</B></span>\n                                        {% endif %}\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    \t<td style=\"vertical-align:middle !important;\">\n                    \t\t<table style=\"width:100%;font-size:12px;\">\n                    \t\t\t{% set pan_no = frappe.db.get_value(\"Customer\", doc.customer, \"pan\") %}\n                    \t\t\t{% set tax_id = frappe.db.get_value(\"Customer\", doc.customer, \"tax_id\") %}\n                    \t\t\t{% if pan_no %}\n\t                    \t\t\t<tr>\n\t                    \t\t\t\t<td style=\"width: {{ header_column_width }}%;color:red;\">\n\t                        \t\t\t\tPAN \n\t                        \t\t\t</td>\n\t                    \t\t\t\t<td style=\"width: {{ value_column_width }}%;\">\n\t                        \t\t\t\t<b>{{ pan_no }}</b>\n\t                        \t\t\t</td>                        \n\t                    \t\t\t</tr>\n                    \t\t\t{% endif %}\n                    \t\t\t{% if tax_id %}\n\t                    \t\t\t<tr>\n\t                    \t\t\t\t<td style=\"width: {{ header_column_width }}%;color:red;\">\n\t                        \t\t\t\tVAT \n\t                        \t\t\t</td>\n\t                    \t\t\t\t<td style=\"width: {{ value_column_width }}%;\">\n\t\t\t\t                        \t<b>{{ tax_id }}</b>\n\t\t\t\t                        </td>                        \n\t\t\t\t                    </tr>\n\t\t\t                    {% endif %}   \n\t\t                    </table>\n\t                    </td>                        \n                    </tr>\n                    <tr>                    \t\n                    \t{% if doc.shipping_address_name and doc.shipping_address_name != doc.customer_address %}\n                        \t<td style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                        {% else %}                        \n                        \t<td style=\"width: 100%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                        {% endif %}\n                            <table style=\"width: 100%;font-size:12px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%\">\n                                        <span style=\"color:red;\">Billing Address\n                                        {% if not doc.shipping_address_name %}\n                                        \t<br>cum Delivery Address</br>\n                                        {% endif %}\n                                        </span>\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%;padding-bottom:3px !important;\">\n                                        <B>{{ doc.address_display }}</B>\n                                    </td>\n                                </tr>\n\t\t\t                    <tr>\n\t\t\t                    \t<td style=\"width: {{ header_column_width }}%;\">\n\t\t\t\t                        \t<span style=\"color:red;\">Contact No</span>\n\t\t\t                        </td>\n\t\t\t                        <td style=\"width: {{ value_column_width }}%;\">\n\t\t\t                            {% if not doc.contact_person %}\n\t\t\t                                {% set contact_filters = [\n                                                    [\"Dynamic Link\", \"link_doctype\", \"=\", \"Customer\"],\n                                                    [\"Dynamic Link\", \"link_name\", \"=\", doc.customer],\n                                                    [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                            %}\n                                        \t{% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t{% for c in contact_list %}\n                                        \t    {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t    <b>{{ p.phone }}</b>\n                                    \t        {% endfor %}\n                                    \t    {% endfor %}\n                                    \t{% else %}\n                                        \t{% for p in frappe.get_list(\"Contact Phone\", {\"parent\":doc.contact_person}, \"phone\") %}\n                                            \t<b>{{ p.phone }}</b>\n                                    \t    {% endfor %}\n                                    \t{% endif %}\n\t\t\t                        </td>\n\t\t\t                    </tr>                    \n                            </table>\n                        </td>\n                        {% if doc.shipping_address_name and doc.shipping_address_name != doc.customer_address %}                        \n                        <td style=\"width: 50%;padding-bottom: 3px !important;padding-top: 3px !important;\">\n                            <table style=\"width: 100%;font-size:12px;\">\n                                <tr> \n                                    <td style=\"width: {{ header_column_width }}%\">\n                                        <span style=\"color:red;\">Delivery Address</span>\n                                    </td>\n                                    <td style=\"width: {{ value_column_width }}%\">\n                                        <B>{{ doc.shipping_address }}</B>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                        {%- endif %}\n                    </tr>\n                <tr><td colspan=\"100%\"><hr style=\"margin-top: 0px;margin-bottom: 0px;padding-bottom:3px !important;\"></hr></td></tr>\t\t\n                </table> \n            </td>\n        </tr>\n    </table>\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;position:relative;display: flex;flex-direction:column;\">\n     {% set lower_header_height = \"60%\" %}\n     {% if not (islast and doc.taxes|length > 0) %}\n         {% set lower_header_height = \"60%\" %}\n     {% endif %}\n     <div style=\"width: 100%;bottom:0px;position:absolute;font-size:12px;flex:1;display:contents;\">    \n        <div><hr style=\"margin-top:0 !important;margin-bottom:0 !important;border-top:1px solid gray;\"></hr></div>\n     \t<table style=\"width:100%;min-height:60px;\">\n\t        <tr style=\"height: 35%;background: #eee !important;\">\n                <td style=\"height: 20%;width: 50%; text-align: left;vertical-align:middle !important;\" rowspan=\"2\">\n\t \t\t\t\t  {{ frappe.db.get_value(\"Company\", doc.company, \"registration_details\") or \"\" }}                             \t                      \n                </td>\n\t            <td style=\"height: 100%;width: 50%; text-align: right;padding-bottom:25px !important;\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </td>\n\t        </tr>\n\t        <tr style=\"background: #eee !important;padding-bottom:2px;\">\n\t            <!-- <td style=\"height: 20%;width: 50%; text-align: left;padding-left: 10px !important;\">\n\t                <!-- Intentionally Left Black  #####NOT REQD AS FIRST COLUMN IN FIRST ROW SPANS 2 ROWS#####\n\t            </td>            -->\n\t            <td style=\"height: 20%;width: 50%; text-align: right;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Manager</span>\n\t            </td>\n\t        </tr>\n         </table>\n     </div>\n    \n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n{% macro print_serialno(itemcode, serialnos) %}\n       {% if serialnos != None -%}\n           \t<div style=\"color:brown;font-size:11px;margin-left:5px;\">\n           \t{% set item_is_vehicle = frappe.db.get_value(\"Item\",itemcode,\"is_vehicle\") %}\n            {% if item_is_vehicle %}\n                  \tChassis No: \n            {% else %}\n                    Serial No:\n            {% endif %}                                                                                                \n            {%- for serial in serialnos.split('\\n') -%}   \n                {% if serial != '' %}\n                   {% set serialdoc = frappe.get_doc(\"Serial No\",serial) %}\n\t               <p style=\"display:inline;\">\n\t                      \t{{ serialdoc.serial_no }}\n\t               </p>\n\t               {% if serialdoc.is_vehicle %}\n                   \t\t <br/>\n                   \t\t Engine No: {{ serialdoc.engine_no }} \n\t\t\t\t\t\t <br/>                   \n\t\t               \t Key No: {{ serialdoc.key_no }}                         \n\t\t\t\t   {% endif %}\n\t\t        {%- endif %}\n\t\t    {%- endfor %}\n            </div>\n\t\t{%- endif %}\t\n{% endmacro %}\n\n\n{% macro do_body() -%}\n<script>\nconsole.log(\"Hello From I Frame\");\nvar function_run = 0;\nfunction convertNumberToWords(amount) {\n\tvar words = new Array();\n\twords[0] = '';\n\twords[1] = 'One';\n\twords[2] = 'Two';\n\twords[3] = 'Three';\n\twords[4] = 'Four';\n\twords[5] = 'Five';\n\twords[6] = 'Six';\n\twords[7] = 'Seven';\n\twords[8] = 'Eight';\n\twords[9] = 'Nine';\n\twords[10] = 'Ten';\n\twords[11] = 'Eleven';\n\twords[12] = 'Twelve';\n\twords[13] = 'Thirteen';\n\twords[14] = 'Fourteen';\n\twords[15] = 'Fifteen';\n\twords[16] = 'Sixteen';\n\twords[17] = 'Seventeen';\n\twords[18] = 'Eighteen';\n\twords[19] = 'Nineteen';\n\twords[20] = 'Twenty';\n\twords[30] = 'Thirty';\n\twords[40] = 'Forty';\n\twords[50] = 'Fifty';\n\twords[60] = 'Sixty';\n\twords[70] = 'Seventy';\n\twords[80] = 'Eighty';\n\twords[90] = 'Ninety';\n\tamount = amount.toString();\n\tvar atemp = amount.split(\".\");\n\tvar number = atemp[0].split(\",\").join(\"\");\n\tvar n_length = number.length;\n\tvar words_string = \"\";\n\tif (n_length <= 9) {\n\t\tvar n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);\n\t\tvar received_n_array = new Array();\n\t\tfor (var i = 0; i < n_length; i++) {\n\t\t\treceived_n_array[i] = number.substr(i, 1);\n\t\t}\n\t\tfor (var i = 9 - n_length, j = 0; i < 9; i++, j++) {\n\t\t\tn_array[i] = received_n_array[j];\n\t\t}\n\t\tfor (var i = 0, j = 1; i < 9; i++, j++) {\n\t\t\tif (i == 0 || i == 2 || i == 4 || i == 7) {\n\t\t\t\tif (n_array[i] == 1) {\n\t\t\t\t\tn_array[j] = 10 + parseInt(n_array[j]);\n\t\t\t\t\tn_array[i] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvalue = \"\";\n\t\tfor (var i = 0; i < 9; i++) {\n\t\t\tif (i == 0 || i == 2 || i == 4 || i == 7) {\n\t\t\t\tvalue = n_array[i] * 10;\n\t\t\t} else {\n\t\t\t\tvalue = n_array[i];\n\t\t\t}\n\t\t\tif (value != 0) {\n\t\t\t\twords_string += words[value] + \" \";\n\t\t\t}\n\t\t\tif ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {\n\t\t\t\twords_string += \"Crores \";\n\t\t\t}\n\t\t\tif ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {\n\t\t\t\twords_string += \"Lakhs \";\n\t\t\t}\n\t\t\tif ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {\n\t\t\t\twords_string += \"Thousand \";\n\t\t\t}\n\t\t\tif (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {\n\t\t\t\twords_string += \"Hundred and \";\n\t\t\t} else if (i == 6 && value != 0) {\n\t\t\t\twords_string += \"Hundred \";\n\t\t\t}\n\t\t}\n\t\twords_string = words_string.split(\"  \").join(\" \");\n\t}\n\treturn words_string;\n}\n\nour_custom_function = function () {\n\n\tif (function_run == 1) return;\n\n\tvar rate = prompt(\"Please Enter Amount\", \"750\");\n    var bill_no = prompt(\"Please Desired Bill No\", \"{{ doc.reporting_name[-4:] or doc.name }}\");\n\tvar tax_rate = .18;\n\tvar qty = 1;\n\tvar taxable_rate = (parseFloat(rate) / (1 + parseFloat(tax_rate))).toFixed(2);\n\tvar taxable_amount = (qty * (parseFloat(rate) / (1 + parseFloat(tax_rate)))).toFixed(2);\n\tvar cgst_sgst = ((qty * parseFloat(taxable_amount)) * (parseFloat(tax_rate) / 2)).toFixed(2);\n\tvar total = (parseFloat(cgst_sgst) * 2) + parseFloat(taxable_amount);\n\tvar round_total = ((parseFloat(cgst_sgst) * 2) + parseFloat(taxable_amount)).toFixed(0);\n\tvar round_off = round_total - total;\n\n\tdocument.getElementById('bill_no').append(\"NO: \"+bill_no);\n\tdocument.getElementById('taxable_amount').append(parseFloat(taxable_amount).toFixed(2));\n\tdocument.getElementById('taxable_rate').append(parseFloat(taxable_rate).toFixed(2));\n\tdocument.getElementById('cgst_value').append(parseFloat(cgst_sgst).toFixed(2));\n\tdocument.getElementById('sgst_value').append(parseFloat(cgst_sgst).toFixed(2));\n\tdocument.getElementById('roundoff').append(parseFloat(round_off).toFixed(2));\n\tdocument.getElementById('total').append(parseFloat(round_total).toFixed(2));\n\tdocument.getElementById('words').append(\"INR \"+convertNumberToWords(round_total)+ \"Only\");\n    if (round_off == 0) {\n    \tdocument.getElementById('roundoff_wrapper').style.display = 'none';\n    }\n\tfunction_run = 1;\n}\n//window.onload = our_custom_function();\n//document.getElementById('total').ready(our_custom_function());\n//$(document).ready(our_custom_function());\nvar existCondition = setInterval(function() {\n if (document.getElementById('total')!=null) {\n    //console.log(\"Exists!\");\n    clearInterval(existCondition);\n    our_custom_function();\n }\n}, 100); // check every 100ms\n\nvar _print = window.print;\nwindow.print = function() {\n  var printCondition = setInterval(function() {\n      if (function_run == 1) {\n         clearInterval(printCondition);\n  \t\t _print();\n      }\n  }, 500);\n  // do stuff\n  //_print();\n}\n</script>\n\n{% set serial_no = frappe.get_doc(\"Serial No\", doc.items[0].serial_no|trim) %}\n{% set item = frappe.get_doc(\"Item\", doc.items[0].item_code) %}\n{% set rate = ([400, 500, 750]|random) %}\n{% set tax_rate = \".18\"|float %}\n{% set qty = 1 %}\n{% set taxable_amount = (qty * (rate / (1+tax_rate)))|round(2) %}\n{% set cgst_sgst = ((qty * taxable_amount) * (tax_rate / 2))|round(2) %}\n{% set total = (cgst_sgst * 2) + taxable_amount %}\n{% set round_total = ((cgst_sgst * 2) + taxable_amount)|round %}\n\n<div style=\"width:100%;height:100%;font-size:12px;flex:1;display:flex;flex-direction:column;\">\n\t<div style = \"width:100%;height:100%;flex:1;display:flex;flex-direction:column;font-size:15px;\">\n    \t<div style=\"font-weight:700;height:25px;background:#eee !important;display:flex;\">\n        \t<div style=\"flex:1;align-self:center;text-align:center;\">\n            \tQty\n            </div>\n        \t<div style=\"flex:5;align-self:center;text-align:center;\">\n            \tParticulars\n            </div>\n            <div style=\"flex:2;align-self:center;text-align:center;\">\n            \tRate\n            </div>\n            <div style=\"flex:2;align-self:center;text-align:center;\">\n            \tAmount\n            </div>\n            \n       </div>\n       <div style=\"flex:1; display:flex;padding-top:25px;\">\n\t\t\t<div style=\"flex:1;text-align:center;border-right:1px solid gray;\">\n        \t\t{{ qty }}\n\t\t\t</div>\n\t\t\t<div style=\"flex:5;border-right:1px solid gray;\">\n            \t&nbsp&nbsp&nbsp Helmet\n            </div>\n\t\t\t<div id = \"taxable_rate\" style = \"flex:2;float:left;text-align:right;border-right:1px solid gray;\">\n            \t<!-- {{ frappe.format((rate / (1 + tax_rate))|round(2), 'Currency') }} -->\n            </div>\n            <div id = \"taxable_amount\" style = \"flex:2;float:left;text-align:right;border-right:initial !important;\">            \t\n            \t<!-- {{ frappe.format((taxable_amount)|round(2), 'Currency') }} -->\n            </div>            \n       </div>\n       <div style=\"display:flex;\">\n\t\t\t<div style=\"flex:1;text-align:center;border-right:1px solid gray;\">\n        \t\t<!-- Intentionally Left Blank -->\n\t\t\t</div>\n\t\t\t<div id=\"sgst\" style=\"flex:5;border-right:1px solid gray;\">\n            \t&nbsp&nbsp&nbsp SGST ({{ ((tax_rate / 2)*100)|int }}%)\n            </div>\n\t\t\t<div style = \"flex:2;float:left;text-align:right;border-right:1px solid gray;\">\n            \t<!-- Intentionally Left Blank -->\n            </div>\n            <div id=\"sgst_value\" style = \"flex:2;float:left;text-align:right;border-right:initial !important;\">\n            \t<!-- {{ frappe.format(cgst_sgst, 'Currency') }} -->\n            </div>            \n       </div>       \n       <div style=\"display:flex;\">\n\t\t\t<div style=\"flex:1;text-align:center;border-right:1px solid gray;\">\n        \t\t<!-- Intentionally Left Blank -->\n\t\t\t</div>\n\t\t\t<div id=\"cgst\" style=\"flex:5;border-right:1px solid gray;\">\n            \t&nbsp&nbsp&nbsp CGST ({{ ((tax_rate / 2)*100)|int }}%)\n            </div>\n\t\t\t<div style = \"flex:2;float:left;text-align:right;border-right:1px solid gray;\">\n            \t<!-- Intentionally Left Blank -->\n            </div>\n            <div id=\"cgst_value\" style = \"flex:2;float:left;text-align:right;border-right:initial !important;\">\n            \t<!-- {{ frappe.format(cgst_sgst, 'Currency') }} -->\n            </div>            \n       </div>         \n       {# if total % 10 != 0 #}\n       <div id=\"roundoff_wrapper\" style=\"display:flex;\">\n\t\t\t<div style=\"flex:1;text-align:center;border-right:1px solid gray;\">\n        \t\t<!-- Intentionally Left Blank -->\n\t\t\t</div>\n\t\t\t<div style=\"flex:5;border-right:1px solid gray;\">\n            \t&nbsp&nbsp&nbsp Round Off\n            </div>\n\t\t\t<div style = \"flex:2;float:left;text-align:right;border-right:1px solid gray;\">\n            \t<!-- Intentionally Left Blank -->\n            </div>\n            <div id=\"roundoff\" style = \"flex:2;float:left;text-align:right;border-right:initial !important;\">\n            \t<!-- {{ frappe.format(round_total-total, 'Currency') }} -->\n            </div>            \n       </div>                \n       {# endif #}\n       <div style=\"font-weight:700;display:flex;background:#eee !important;height:30px;\">\n\t\t\t<div id = \"words\" style=\"flex:6;text-align:left;align-self:center;\">\n            \t<!-- {{ frappe.utils.money_in_words(round_total) }} -->\n            </div>\n\t\t\t<div style = \"flex:2;float:left;text-align:right;align-self:center;border-right:1px solid gray;\">\n            \tTotal (Rounded)\n            </div>\n            <div id = \"total\" style = \"flex:2;float:left;text-align:right;align-self:center;\">\n            \t<!-- {{ frappe.format(round_total, 'Currency') }} -->\n            </div>            \n       </div>                       \n   </div>    \n</div>\n\n\n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <div style=\"height: 100%\"></div>\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;display:grid;min-height:75px;\">\n\t\t\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t\t\t{{ setfooter(false) }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:grid;\"> \n\n\t\t        <!-- New Body Container -->\n\t\t        <div style=\"width:100%;height: 100%;\">\t\n\n\t{% endif %}\n{%- endmacro %}\n\n{% if doc.items[0].is_vehicle == 1%}\n\n<!-- Set Global Default font -->\n<span style=\"font-family:{{ global_default_font }};font-size:10px;\">\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n    <!-- Set Header -->\n    <div style=\"max-height: {{ max_header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ max_body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex:1;display:flex;flex-direction:column;\"> \n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;flex:1;display:flex;flex-direction:column;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ max_footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;display:grid;\">\n\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n\n</div>\n<!-- End Font -->\n</span>\n\n{% endif %}",
  "line_breaks": 0,
  "modified": "2022-02-06 18:19:37.058050",
  "module": "Accounts",
  "name": "Helmet Dummy Invoice",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Payment Entry",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "{% set display_rows_per_page = 3 %}\n{% set row_height = 40 %}\n{% set div_page_height = \"5.25in\" %}\n{% set div_max_page_height = \"5.25in\" %}\n{% set min_page_height = \"5.25in\" %}\n{% set min_page_width = \"8.3in\" %}\n{% set max_page_height = \"11.69in\" %}\n{% set max_page_width = \"8.3in\" %}\n{% set preferred_page_height = \"11.69in\" %}\n{% set preferred_page_width = \"8.3in\" %}\n{% set footer_background = \"transparent\" %}\n{% set header_background = \"transparent\" %}\n{% set body_background = \"transparent\" %}\n{% set header_height = \"45%\" %}\n{% set footer_height = \"20%\" %}\n{% set body_height = \"initial\" %}\n{% set page_padding = \"1cm\" %}\n\n\n\n<style>\n    body{\n        min-height:100% /* force the BODY element to match the height of the HTML element */\n    }\n    .print-format td {\n        padding: 0px !important;\n    }\n    .print-format {\n        height: 100%;\n        background-color: initial;\n        box-shadow: initial;\n        max-width: initial;\n        min-height: initial;\n        margin: initial;\n        padding: initial !important;        \n    }\n    .print-format-gutter {\n        height: 100%;\n    }\n    @media screen {\n        .page-preview {\n            min-height: {{ min_page_height }} !important;\n            max-width: {{ max_page_width }} !important;\n            padding: {{ page_padding }};\n            background-color: white;\n            box-shadow: 0px 0px 9px rgba(0,0,0,0.5);\n            margin: auto;\n            display: table !important;\n            width: 100%;\n        }\n        .print-format.print-format-preview > .page-preview {\n            position: absolute;\n        }        \n    }\n    @media print {   \n    \thtml{\n\t        height:100%;\n\t        position:relative\n\t    }    \n    \t@page {\n            //size: A5 landscape;\n            margin: {{ page_padding }};\n        }\n        body {\n            height: 100%;\n            -webkit-print-color-adjust: exact !important;\n        }\n        .page-preview {\n            height: 100%;\n            width: 100%;\n            max-height: {{ max_page_height }}\n            display: table;\n        }\n        body .img {\n            width: auto !important;\n            height: auto !important;\n            max-width: auto !important;\n        }\n    }\n</style>\n\n{% macro vehicle_letter_head() %}\n<div style=\"width:100%;\">\n    <div style=\"width:100%;\">\n        {{ render_template(frappe.db.get_value(\"Letter Head\", \"Geeta Bhawan\", \"content\"),doc) }}\n    </div>\n</div>\n{% endmacro %}\n\n\n<!-- Macro for Header -->\n{% macro setheader() -%}\n<div style=\"width: 100%;height:100%;\">\n    <div style=\"width: 100%;height:100%\">\n        {% if letter_head and not no_letterhead -%}\n        <div style=\"width: 100%;padding-bottom: 3px !important;background:white !important;\">\n                {{ vehicle_letter_head() }}\t\n        </div>\n        <div><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></div>\n        {%- endif %}\n        <div style=\"height:100%;width: 100%;padding: 0px !important;\">\n                <div style=\"height:65px;max-height: 65px;overflow: hidden;padding-top:3px;background: #eee !important;padding-bottom: 3px;\">\n                    <table style=\"width: 100%;height:100%;\">\n                        <tr>\n                            <td style=\"height: 100%;width: 20%;color: black;font-size: 12px;text-transform: uppercase;text-align: left;vertical-align: middle !important;padding-left:5px !important;\">\n                                <B>{{ doc.reporting_name or doc.name }}</B>\n                            </td>\t\t\t\t\t\n                            <td style=\"width: 60%;color: black;text-align: center;vertical-align: middle !important;\">\n                                <span style=\"font-size: 22px;text-transform:uppercase;\"><B>{{ doc.select_print_heading or \"Receipt\" }}</B></span>\n                            </td>\t\t\t\t\t\n                            <td style=\"height: 100%;width: 20%;color: black;font-size: 12px;text-transform: uppercase;text-align: right;vertical-align: middle !important;padding-right:5px !important;\">\n                                <B>Date: {{ doc.get_formatted(\"posting_date\") }}</B>\n                            </td>\t\t\t\t\t\n                        </tr>\n                    </table>\n                </div>\n                <table style=\"border-collapse: collapse;width: 100%;margin-top:10px;margin-left:5px;margin-right:5px;\">\n                    <tr>\n                        <td style=\"width: 40%;vertical-align: center;\">\n                            <table style=\"width: 100%;font-size:13px;\">\n                                <tr> \n                                    <td style=\"width: 14%;\">\n                                        <span style=\"color:red;font-size: 13px;\">Name</span>\n                                    </td>\n                                    <td style=\"width: 100%\">\n                                        <span style=\"font-size: 13px;text-align: left;\"><B> {{ doc.party_name }} </B></span>\n                                    \t{% set coname = frappe.db.get_value(\"Customer\", doc.party, \"company_name\") %}\n                                        {% if coname %}\n                                    \t\t<span style=\"font-size:12px;text-align: left;\"><br/><B>C/O {{ coname }}</B></span>\n                                        {% endif %}                                        \n                                        <span style=\"font-size: 13px;text-align: left;\">\n                                            <br/>Phone:\n\t\t\t                                        {% set contact_filters = [\n                                                            [\"Dynamic Link\", \"link_doctype\", \"=\", doc.party_type],\n                                                            [\"Dynamic Link\", \"link_name\", \"=\", doc.party],\n                                                            [\"Dynamic Link\", \"parenttype\", \"=\", \"Contact\"]]\n                                                    %}\n                                        \t        {% set contact_list = frappe.get_list('Contact', filters=contact_filters,fields=['name']) %}\n                                        \t        {% for c in contact_list %}\n                                        \t            {% for p in frappe.get_list(\"Contact Phone\", {\"parent\":c.name}, \"phone\") %}\n                                            \t            <b>{{ p.phone }}</b>\n                                    \t                {% endfor %}\n                                    \t            {% endfor %}\n                                        </span>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                        <td style=\"width: 100%;\" rowspan=\"100%\">\n                            {% if doc.party_address -%}\n                            <table style=\"width: 100%;font-size:13px;\">\n                                <tr> \n                                    <td style=\"width: 15%\">\n                                        <span style=\"color:red;\">Address</span>\n                                    </td>\n                                    <td style=\"width: 100%\">\n                                        <B>{{ doc.address }}</B>\n                                    </td>\n                                </tr>\n                            </table>\n                            {%- endif %}\n                        </td>                        \n                    </tr>\n                </table>\n        </div>\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n<!-- Footer Macro -->\n{% macro setfooter(islast) -%}\n<!-- Important Note: Using Position Relative Here and Position Absolute in Table \n Would Anchor Table to the Bottom of DIV -->\n<div style=\"height:100%;width:100%;position:relative;\">       \n     <div style=\"width: 100%;background: #eee !important;height:60%;max-height:60%;bottom:0px;position:absolute;\">\n\t     <table style=\"width: 100%;height: 100%;\">\n         \t<tr><td colspan=\"100%\"><hr style=\"margin-top:0px;margin-bottom:0px;border:none;color:black;background:black;height:1px;\"></hr></td></tr>\n\t        <tr style=\"height: 35%;\">\n                <td style=\"width:50%;text-align:left;\"><span style=\"padding-left:10px;\">Cheque Payment(s) are Subject to Realization</span></td> \n\t            <td style=\"height: 100%;width: 100%; text-align: right;\">\n\t                <span style=\"padding-right:10px;\">For {{ doc.company }}</span>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td style=\"height: 20%;width: 100%; text-align: right;\" colspan=\"100%\">\n\t                <span style=\"padding-right:10px;\">Manager</span>\n\t            </td>\n\t        </tr>\n\t    </table>\n    </div>\n</div>\n{%- endmacro %}\n<!-- End Macro -->\n\n\n{% macro do_body() -%}\t\t\n<div style=\"width:100%;height:100%;margin-top:20px;margin-left:5px;margin-right:5px;\">\n    <div style=\"width:100%;padding-bottom: 20px !important;float: left;\">\n        <div style=\"width:100%;float:left;\">\n            Received with Thanks <b> {{ doc.in_words }} </b>\n        </div>\n    </div>\n    <div style=\"width:30%;vertical-align:middle !important;text-align:right;padding-right:20px !important;float:right;\">\n        <span style=\"font-size:16px;font-weight:800;\"> {{ doc.get_formatted(\"paid_amount\") }} </span>\n    </div>\n    {% if print_settings.print_finance_details_in_receipt and doc.hypothecation %}\n        <div style=\"width:40%;clear:both;float:right;\">\n            <hr style=\"margin-bottom: 3px;\" />\n            Hypothecation: {{ doc.hypothecation }}\n        </div>\n    {% endif %}\n    <div style=\"width:100%;\">\n        {% set base_mode = frappe.db.get_value(\"Mode of Payment\", doc.mode_of_payment, \"base_mode\") %}\n        <div style=\"padding-top:40px !important;\">Mode of Payment: <b>{{ base_mode }}</b></div>\n        {% if doc.base_mode != \"Cash\" %}\n            {% if doc.reference_no %}\n                <div>Instrument/Batch No: {{ doc.reference_no }}</div>\n            {% endif %}\n            {% if doc.cheque_bank %}\n                <div>Instrument Bank : {{ doc.cheque_bank }}</div>\n            {% endif %}\n            {% if doc.reference_date %}\n                <div>Instrument Date: {{ doc.get_formatted(\"reference_date\") }}</div>\n            {% endif %}\n        {% endif %}\n    </div>\n    <div style=\"clear:both;\"></div>\n</div>\n{%- endmacro %}\n\n<!--------------------------------------------------------------------------------------------------->\n<!-- Don't Edit the Following Blocks -->\n<!-- Instead Use The Macros Above -->\n<!--------------------------------------------------------------------------------------------------->\n\n\n{% macro insert_page_break(test_condition) -%}\n\t{% if test_condition %} \n\n\t\t                <!-- Fill Empty Space -->\n\t\t                <div style=\"height: 100%\"></div>\n\n\t\t\t<!-- End Body Container -->\n\t\t        </div>\n\n\t\t    <!-- End Main Body Div -->  \n\t\t    </div>\n\n\t\t    <!-- Set Footer -->\n\t\t    <div style=\"max-height: {{ footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;\">\n\t\t        {{ setfooter(false) }}\n\t\t    </div>\n\n\n\t\t<!-- End Main Div -->\n\t\t</div>\n\n\n\t\t<!-- PAGE BREAK -->\n\t\t<div class=\"page-break\"></div> <!-- Seems to be working in Chrome Ver: 38.0.2125.111 & Chrome 43 -->\n\n\t\t<!-- Logic to Count Total Number of Pages -->\n\t\t{% if total_pages.append('1') %} {% endif %}\t\n\n\t\t<!-- Start Another Main Div Tag -->\n\t\t<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};\">    \n\n\t\t    <!-- Set New Header -->\n\t\t    <div style=\"max-height: {{ header_height }};height: {{ header_height }};background: {{ header_background }};overflow: hidden;\">\n\t\t\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t\t\t{{ setheader() }}\n\t\t\t\t</div>\n\t\t    </div>\n\n\n\t\t    <!-- Start a New Body -->\n\t\t    <div style=\"max-height: {{ body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;\">\n\n\t\t        <!-- New Body Container -->\n\t\t        <div style=\"width:100%;height: 100%;\">\t\n\n\t{% endif %}\n{%- endmacro %}\n\n\n<!-- Main Div Tag -->\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\n\n\t<!-- Logic to Count Total Number of Pages -->\n\t{% set total_pages = [1] %}\n\n\t<!-- Dummy Div for Background -->\n    <div style=\"height:100%;width:100%;display:flex;flex-direction:column;flex:1;\">\n\n    <!-- Set Header -->\n    <div style=\"background: {{ header_background }};padding-bottom:20px;\">\n\t\t<div style=\"width: 100%;height:100%;\">\n\t\t\t{{ setheader() }}\n\t\t</div>\n    </div>\n\n    <!-- Set Body -->\n    <!-- Main Body Tag -->\n    <div style=\"max-height: {{ body_height }};height: {{ body_height }};background: {{ body_background }};overflow: hidden;flex-grow:1;\">\n\n        <!-- Body Container -->\n        <div style=\"width:100%;height: 100%;\">\n        \n        \t{{ do_body() }}\n\t\n        <!-- End Body Container Div -->\n        </div>\n\n        <!-- End Main Body Div -->            \n    </div>\n\n\n    <!-- Set last Footer -->\n    <div style=\"max-height: {{ footer_height }};height: {{ footer_height }};background: {{ footer_background }};;overflow: hidden;\">\n\t\t<div style=\"width: 100%;height: 100%;\"> \n\t\t\t{{ setfooter(true) }}\n\t\t</div>\n    </div>\n    \n    </div>\n\n</div>\n",
  "line_breaks": 0,
  "modified": "2022-02-28 18:20:37.981626",
  "module": "Accounts",
  "name": "Vehicle Receipt Format",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 1,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Salary Slip",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": "Default",
  "format_data": null,
  "html": "<!-- TESTED ON CHROME VER 63.0.3239.84 -->\r\n{% set orientation = \"Portrait\" %}\r\n{% set display_rows_per_page = 8 %}\r\n\r\n{% set row_height = \"auto\" %}\r\n{% set div_page_height = \"100%\" %}\r\n{% set div_max_page_height = \"100%\" %}\r\n{% set page_size = {} %}\r\n{% if page_size.update({\"min_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% if page_size.update({\"min_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"max_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% if page_size.update({\"max_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"preferred_page_width\":\"11.69in\"}) %}{% endif %}\r\n{% if page_size.update({\"preferred_page_height\":\"8.26in\"}) %}{% endif %}\r\n{% set header_height = \"initial\" %}\r\n{% set max_header_height = \"initial\" %}\r\n{% set footer_height = \"initial\" %}\r\n{% set max_footer_height = \"initial\" %}\r\n{% set body_height = \"initial\" %}\r\n{% set max_body_height = \"100%\" %}\r\n\r\n{% set footer_background = \"transparent\" %}\r\n{% set header_background = \"transparent\" %}\r\n{% set body_background = \"transparent\" %}\r\n{% set page_padding = \"1cm\" %}\r\n\r\n{% set global_default_font = \"Monospace\" %}\r\n\r\n{% macro set_orientation_size() %}\r\n\t{% if orientation != \"Landscape\" %}\r\n\t\t{% if page_size.update({\"min_page_height\":\"11.69in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"min_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"max_page_height\":\"11.69in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"max_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"preferred_page_width\":\"8.26in\"}) %}{% endif %}\r\n\t\t{% if page_size.update({\"preferred_page_height\":\"11.69in\"}) %}{% endif %}\r\n    {% endif %} \r\n{% endmacro %}\r\n\r\n{{ set_orientation_size() }}\r\n\r\n<!-- DONT EDIT STYLE BELOW -->\r\n<style>\r\n    body{\r\n        min-height:100% /* force the BODY element to match the height of the HTML element */\r\n    }\r\n    .print-format td {\r\n        padding: 0px !important;\r\n    }\r\n    @-moz-document url-prefix() {\r\n    \t.print-format {\r\n\t        height: 99% !important;\r\n        }\r\n    }\r\n    .print-format {\r\n        height: 100%;\r\n        background-color: initial;\r\n        box-shadow: initial;\r\n        max-width: initial;\r\n        min-height: initial;\r\n        margin: initial;\r\n        padding: initial !important;        \r\n    }\r\n    \r\n    .print-format-gutter {\r\n        height: 100%;\r\n    }\r\n    \r\n\t.attendance-header {\r\n\t\tbackground:#eee;\r\n\t\tpadding:2px;\r\n\t\tfont-weight:bold;\r\n\t\ttext-align:center;\r\n\t\tflex:.4;\r\n\t\tborder-bottom:0.1em dotted black;\r\n\t}\r\n\r\n\t.attendance-column {\r\n\t\tpadding:2px;\r\n\t\ttext-align:center;\r\n\t\tflex:.4;\r\n\t\tborder-right:0.1em dotted black;\r\n\t\tborder-bottom:0.1em dotted black;\r\n\t}\r\n    \r\n\t.main-attendance {\r\n\t\twidth:100%;\r\n\t\tdisplay:flex;\r\n\t\tflex-direction:row;\r\n\t\tpadding:10px;\r\n\t}    \r\n    \r\n    @media screen {\r\n        .page-preview {\r\n            min-height: {{ page_size.min_page_height }} !important;\r\n            max-width: {{ page_size.max_page_width }} !important;\r\n            padding: {{ page_padding }};\r\n            background-color: white;\r\n            margin: auto;\r\n            display: flex;\r\n\t\t\tflex-direction: column;\r\n            width: 100%;\r\n        }\r\n    }\r\n    @media print {    \r\n    \thtml{\r\n\t        height:100%;\r\n\t        position:relative\r\n\t    }    \r\n    \t@page {\r\n            size: {{ page_size.preferred_page_width }} {{ page_size.preferred_page_height }} {{ orientation }};\r\n            margin: {{ page_padding }};\r\n        }    \r\n        body {\r\n            height: 100%;\r\n            -webkit-print-color-adjust: exact !important;\r\n        }\r\n        .page-preview {\r\n            height: 100%;\r\n            width: 100%;\r\n            display: flex;\r\n\t\t\tflex-direction: column;\r\n        }\r\n    }\r\n    @media all {\r\n \t\tcolcell {\r\n    \t\tborder-left-style:solid !important;\r\n            border-left-color:gray !important;\r\n            border-left-width:1px !important;\r\n\t\t}\r\n    }\r\n</style>\r\n<!-- DONT EDIT STYLE ABOVE -->\r\n\r\n{% macro print_biometric_attendance() %}\r\n\t{% set no_of_days = (frappe.utils.getdate(doc.end_date) - frappe.utils.getdate(doc.start_date)).days+1 %}\r\n\t{% set biometric_user = frappe.get_doc(\"Biometric Users\", {'employee':doc.employee}) %}\r\n\t{% set biometric_attendance = frappe.get_all(\"Biometric Attendance\", fields = ['name', 'timestamp'], filters = { \r\n    \t\t\t\t\t\t\t'user_id': ('=', biometric_user.name[3:]|int), \r\n                                'timestamp': ('>=', doc.start_date), \r\n                                'timestamp': ('<', frappe.utils.add_days(doc.end_date,1)) \r\n                                })|sort(attribute=\"timestamp\") %}  \r\n                                \r\n\t{% for ba in biometric_attendance %}\r\n    \t{% if ba.update({'date':frappe.utils.getdate(ba.timestamp)}) %} {% endif %}\r\n    {% endfor %}\r\n    \r\n    {% set entry_exit_time = {} %}\r\n    {% if biometric_user.differ_timings == 1 %}\r\n    \t{% if entry_exit_time.update({'entry_time':frappe.utils.get_time(biometric_user.allowed_entry_time), 'exit_time':frappe.utils.get_time(biometric_user.allowed_exit_time)}) %} {% endif %}\r\n    {% else %}\r\n    \t{% set branch = frappe.get_doc(\"Branch Settings\", biometric_user.branch) %}\r\n        {% if entry_exit_time.update({'entry_time':frappe.utils.get_time(branch.opening_time), 'exit_time':frappe.utils.get_time(branch.closing_time)}) %} {% endif %}\r\n\t{% endif %}        \r\n    {% if biometric_attendance|len > 0 %}\r\n\t\t<section id=\"attendance\" style=\"font-size:10px;overflow:hidden;\">\r\n\t\t\t<div class=\"main-attendance\">    \r\n\t    \t{% set loopdt = {'date':frappe.utils.getdate(doc.start_date)} %}\r\n\t\r\n\t\t\t<!-- Start Header -->\r\n\t\t\t<div style=\"display:flex;flex:1;flex-direction:column;\">\r\n\t\t\t\t<div style=\"flex:1;flex-direction:row;display:flex\">\r\n\t\t\t\t\t<div class=\"attendance-header\" style=\"flex:1\"> Date </div>\r\n\t\t\t\t\t<div class=\"attendance-header\"> In Time </div>\r\n\t\t\t\t\t<div class=\"attendance-header\"> Out Time </div>\r\n\t\t\t\t</div>        \r\n\t            \r\n\t    \t{% for i in range(33) %}\r\n\t\t\t\t{% if (( i % 11)==0 and i>0) %}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:column;\">\r\n\t\t\t\t\t\t<div style=\"flex-direction:row;display:flex;\">\r\n\t\t\t\t\t\t\t<div class=\"attendance-header\" style=\"flex:1;\"> Date </div>\r\n\t\t\t\t\t\t\t<div class=\"attendance-header\"> In Time </div>\r\n\t\t\t\t\t\t\t<div class=\"attendance-header\"> Out Time </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t{% endif %}       \r\n\t            \r\n\t\t\t\t<div style=\"flex:1;flex-direction:row;display:flex\">\r\n\t\t\t\t\t{% if(i<11) %}\r\n\t\t\t\t\t\t<div class=\"attendance-column\" style=\"flex:1;border-left:0.1em dotted black;\"> \r\n\t\t\t\t\t{% else %}\r\n\t\t\t\t\t\t<div class=\"attendance-column\" style=\"flex:1;\"> \r\n\t\t\t\t\t{% endif %}            \r\n\t            \r\n\t            \t{% if i < no_of_days %}\r\n                    \t{{ loopdt.date.strftime('%a %d-%m-%Y') }}\r\n\t                    </div>\r\n\t                    \r\n\t\t        \t\t{% set parted_ba = biometric_attendance|selectattr(\"date\", \"equalto\",  loopdt.date)|sort(attribute=\"timestamp\") %}    \t\t            \r\n\t\t\t                {% if parted_ba|len > 0 %}\r\n                            \t{% set t1 = parted_ba[0].timestamp.time() %}\r\n\t\t\t\t\t\t\t\t{% set t2 = entry_exit_time.entry_time %}\r\n                                {% set t1 = ((t1.hour * 60 + t1.minute) * 60 + t1.second)|int %}\r\n                                {% set t2 = ((t2.hour * 60 + t2.minute) * 60 + t2.second)|int %}\r\n                                \r\n                            \t{% if ((t1-t2)/60)|abs>60 %}\r\n                                \t<div class=\"attendance-column\" style=\"background:lightcyan !important;\"> {{ parted_ba[0].timestamp.strftime('%R') }} </div>\r\n                                {% else %}\r\n                                \t<div class=\"attendance-column\"> {{ parted_ba[0].timestamp.strftime('%R') }} </div>\r\n                                {% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                            \t{% set t1 = parted_ba[-1].timestamp.time() %}\r\n\t\t\t\t\t\t\t\t{% set t2 = entry_exit_time.exit_time %}\t\t\t\t\t\t\t\t\r\n                                {% set t1 = ((t1.hour * 60 + t1.minute) * 60 + t1.second)|int %}\r\n                                {% set t2 = ((t2.hour * 60 + t2.minute) * 60 + t2.second)|int %}\r\n                                \r\n                                {% if ((t1-t2)/60)|abs>60 %}\r\n\t\t\t\t\t\t\t\t\t<div class=\"attendance-column\" style=\"background:lightcyan !important;\"> {{ parted_ba[-1].timestamp.strftime('%R') }} </div>                        \r\n                                {% else %}\r\n                                \t<div class=\"attendance-column\"> {{ parted_ba[-1].timestamp.strftime('%R') }} </div>                        \r\n                                {% endif %}\r\n                                \r\n\t                        {% else %}\r\n\t\t\t\t\t\t\t\t<div class=\"attendance-column\" style=\"background:lightpink;font-weight:700;\"> Absent </div>\r\n\t\t\t\t\t\t\t\t<div class=\"attendance-column\" style=\"background:lightpink;font-weight:700;\"> Absent </div>                        \r\n\t\t                \t{% endif %}\r\n\t                {% else %}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"attendance-column\"> </div>\r\n\t\t\t\t\t\t<div class=\"attendance-column\"> </div>                \r\n\t    \t\t\t{% endif %}\r\n\t            </div>\r\n\t            \t{% if loopdt.update({'date':frappe.utils.add_days(loopdt.date,1)}) %} {% endif %}\r\n\t        {% endfor %}\r\n\t        </div>\r\n\t \t</div>\r\n\t</section>       \r\n\t{% endif %}\r\n\r\n{% endmacro %}   \r\n\r\n<div class=\"page-preview\" style=\"height: {{ div_page_height }};max-height: {{ div_max_page_height }};display:flex !important;flex-direction:column;\">\r\n<section id=\"salary-slip-section\" style=\"font-size:13px;font-family:calibri;\">\r\n\t{% set monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"] %}\r\n\r\n\t{% set dt = doc.start_date %}\r\n\t{% set no_of_days = (frappe.utils.getdate(doc.end_date) - frappe.utils.getdate(doc.start_date)).days+1 %}\r\n\t{% set days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}\r\n    {% set ss = frappe.get_doc(\"Salary Structure\", doc.salary_structure) %}\r\n    {% set base = frappe.db.get_value(\"Salary Structure Assignment\", filters={'salary_structure':ss.name, 'employee':doc.employee, 'docstatus':1}, fieldname='base') %}\r\n\r\n\t<div class=\"salary-slip-main\" style=\"width:100%;\">\r\n\r\n\t\t{% set hra = (frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'House Rent Allowance'}, fieldname='amount') or 0)*no_of_days/doc.payment_days %}\r\n\t\t{% set cdu = (frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Children Education Allowance'}, fieldname='amount') or 0)*no_of_days/doc.payment_days %}\r\n\t\t{% set mal = (frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Medical Allowance'}, fieldname='amount') or 0)*no_of_days/doc.payment_days %}\r\n\t\t{% set con = (frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Conveyance'}, fieldname='amount') or 0)*no_of_days/doc.payment_days %}\r\n\r\n\t\t<!-- Letter Head -->\r\n\t\t<div style=\"width:100%;\">\r\n\t\t    {{ render_template(frappe.db.get_value(\"Letter Head\", \"Geeta Bhawan\", \"content\"),doc) }}\r\n\t\t</div>\r\n\r\n\t\t<hr style=\"margin-top:2px !important;margin-bottom:2px !important;\">\r\n\t\t<div style=\"width:100%;background:#eee !important;font-size:20px;font-weight:bolder;padding:3px;display:flex;flex-direction:row;\"> \r\n\t\t\t<div style=\"flex:1;\"> SALARY SLIP </div>\r\n\t\t\t<div style=\"flex:1;text-align:right;\"> {{ doc.employee_name }} </div>\r\n\t\t</div>\r\n\t\t<hr style=\"margin-top:2px !important;margin-bottom:2px !important;\">\r\n\r\n\t\t<div style=\"display:flex;flex-direction:row;\">\r\n\t\t\t<div style = \"flex:1;display:flex;flex-direction:column;padding:3px;\">\r\n\t\t\t\t<div style=\"background:#eee !important;font-size:large;font-weight:bolder;\"> Salary Structure </div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Branch </div>\r\n\t\t\t\t\t<div style=\"flex:.6;font-weight:bolder;text-align:right;\"> {{ doc.branch }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Base </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> {{ frappe.utils.fmt_money(base) }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> House Rent Allowance </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(hra)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Conveyance Allowance </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(con)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Child Education Allowance </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(cdu)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Medical Allowance </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(mal)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div> <hr style=\"margin-top:2px !important;margin-bottom:2px !important;\"></div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Sub Total </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{% set sub_total = base + hra + mal + con + cdu %}\r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(sub_total)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Company's P.F. Contribution </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n                    \t{% set cpf =  {'value':(base + mal + con + cdu)*12/100} %}\r\n                    \t{% if not frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'P.F. Contr.'}, fieldname='amount') %}\r\n\t\t\t\t\t\t\t{% if cpf.update({'value':0}) %} {% endif %}\r\n                        {% endif %}\r\n                        {{ frappe.utils.fmt_money(frappe.utils.rounded(cpf.value)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Cost to Company (Excl. Bonus) </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money((cpf.value + sub_total)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> \r\n\t\t\t\t\t\t<div> Yearly Bonus (Per Month) </div>\r\n\t\t\t\t\t\t<!-- <div style=\"font-size:9px;\"> \r\n\t\t\t\t\t\t\tVarries According to Total Yearly Attendance\r\n\t\t\t\t\t\t</div> -->\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded((base*12*(8.33/100))/12)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div> <hr style=\"margin-top:2px !important;margin-bottom:2px !important;\"></div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Total Cost To Company (Per Month) </div>\r\n\t\t\t\t\t<div style=\"flex:.5;font-weight:bolder;text-align:right;\"> \r\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded((base/12) + cpf.value + sub_total)) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div style = \"flex:1;display:flex;flex-direction:column;padding:3px;\">\r\n\t\t\t\t<div style=\"background:#eee !important;font-size:large;font-weight:bolder;\"> Attendance </div>\r\n\t\t\t\t<div style=\"font-size:16px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Salary for the Month </div> \r\n\t\t\t\t\t<div style=\"flex:.6;font-weight:bolder;text-align:right;\"> {{ frappe.utils.getdate(doc.start_date).strftime('%B, %Y') }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> No of Working Days </div> \r\n\t\t\t\t\t<div style=\"flex:.25;font-weight:bolder;text-align:right;\"> {{ no_of_days }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Present Days </div>\r\n\t\t\t\t\t<div style=\"flex:.25;font-weight:bolder;text-align:right;\"> {{ frappe.format_value(doc.payment_days - doc.leave_availed,{'fieldtype':'int'}) }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Leave Availed </div> \r\n\t\t\t\t\t<div style=\"flex:.25;font-weight:bolder;text-align:right;\"> {{ frappe.format_value(doc.leave_availed,{'fieldtype':'int'}) }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Absent </div>\r\n\t\t\t\t\t<div style=\"flex:.25;font-weight:bolder;text-align:right;\"> {{ frappe.format_value(doc.leave_without_pay + doc.leave_availed,{'fieldtype':'int'}) }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> Payment Days </div>\r\n\t\t\t\t\t<div style=\"flex:.25;font-weight:bolder;text-align:right;\"> {{ frappe.format_value(doc.payment_days,{'fieldtype':'int'}) }} </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div> <hr style=\"margin-top:2px !important;margin-bottom:2px !important;\"> </div>\r\n\t\t\t\t<div style=\"font-size:14px;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"flex:1;\"> <!-- Total Leaves Availed in this Year, Till Date --> </div>\r\n\t\t\t\t\t<div style=\"flex:.25;font-weight:bolder;text-align:right;\"> <!--  --> </div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr style=\"margin-top:2px !important;margin-bottom:2px !important;\">\r\n\t\t<div style=\"width:100%;display:flex;flex-direction:row;\">\r\n\t\t\t<div style=\"flex:1;display:flex;flex-direction:column;padding:3px;\">\r\n\t\t\t\t<div style=\"width:100%;background:#eee !important;;font-size:large;text-align:center;text-transform:uppercase;padding:3px;font-weight:bolder;\"> Earnings </div>\r\n\t\t\t\t<div style=\"display:flex;flex-direction:row;width:100%;\">\r\n\t\t\t\t\t<div style=\"flex:1;display:flex;flex-direction:column;\">\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;background:#eee !important;padding:3px;text-align:left;font-weight:800;\">\r\n\t\t\t\t\t\t\t\tComponent\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;background:#eee !important;padding:3px;text-align:center;font-weight:800;\">\r\n\t\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tBasic\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Basic'}, fieldname='amount'))) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tHouse Rent Allowance\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'House Rent Allowance'}, fieldname='amount') or 0)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tChildren Education Allowance\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Children Education Allowance'}, fieldname='amount') or 0)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tConveyance Allowance\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Conveyance'}, fieldname='amount') or 0)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tMedical Allowance\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'Medical Allowance'}, fieldname='amount') or 0)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"flex:1;display:flex;flex-direction:column;padding:3px;\">\r\n\t\t\t\t<div style=\"width:100%;background:#eee !important;font-size:large;text-align:center;text-transform:uppercase;padding:3px;font-weight:bolder;\"> Deductions </div>\r\n\t\t\t\t<div style=\"display:flex;flex-direction:row;width:100%;\">\r\n\t\t\t\t\t<div style=\"flex:1;display:flex;flex-direction:column;\">\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;background:#eee !important;padding:3px;text-align:left;font-weight:800;\">\r\n\t\t\t\t\t\t\t\tComponent\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;background:#eee !important;padding:3px;text-align:center;font-weight:800;\">\r\n\t\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tP.F. Contribution\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'P.F. Contr.'}, fieldname='amount') or 0.00)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"display:flex;flex:1;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tESI Contribution\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;text-align:right;\">\r\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(frappe.db.get_value(\"Salary Detail\", filters={'parent':doc.name,'salary_component':'ESI Contr.'}, fieldname='amount') or 0.00)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div style=\"width:100%;display:flex;flex-direction:row;\">\r\n\t\t\t<div style=\"flex:1;display:flex;flex-direction:row;padding:3px;\">\r\n\t\t\t\t<div style=\"width:100%;background:#eee !important;flex:1;padding:3px;\">\r\n\t\t\t\t\tTotal\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"width:100%;padding:3px;flex:.25;text-align:right;background:#eee !important;\">\r\n\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(doc.gross_pay)) }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"flex:1;display:flex;flex-directin:row;padding:3px;\">\r\n\t\t\t\t<div style=\"width:100%;background:#eee !important;flex:1;padding:3px;\">\r\n\t\t\t\t\tTotal\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"width:100%;padding:3px;flex:.25;text-align:right;background:#eee !important;\">\r\n\t\t\t\t\t{{ frappe.utils.fmt_money(frappe.utils.rounded(doc.total_deduction)) }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n        {% set advances = {'salary_advance':0,'loan':0} %}\r\n        {% for adv in doc.loans %}\r\n        \t{% if \"salary advance\" in adv.loan_type.lower() %}\r\n            \t{% if advances.update({'salary_advance':advances.salary_advance+adv.total_payment}) %} {% endif %}\r\n            {% endif %}\r\n            {% if \"loan\" in adv.loan_type.lower() %}\r\n                {% if advances.update({'loan':advances.loan+adv.total_payment}) %} {% endif %}\r\n            {% endif %}\r\n        {% endfor %}\r\n\t\t<div style=\"display:flex;flex-direction:row;width:100%;\">\r\n\t\t\t<div style=\"display:flex;flex-direction:column;margin-top:5px;flex:1;\">\r\n\t\t\t\t<div style=\"background:#eee !important;text-align:center;text-transform:uppercase;padding:3px;font-size:large;font-weight:bolder;\"> Advances </div>\r\n\t\t\t\t<div style=\"display:flex;flex-direction:row;flex:1;\">\r\n\t\t\t\t\t<div style=\"flex:1;display:flex;flex-direction:column;\">\r\n\t\t\t\t\t\t<div style=\"flex:1;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;background:#eee !important;padding:3px;text-align:left;font-weight:800;\">\r\n\t\t\t\t\t\t\t\tComponent\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;background:#eee !important;padding:3px;text-align:center;font-weight:800;\">\r\n\t\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"flex:1;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tSalary Advance\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;flex:.25;text-align:right;\">                            \r\n                            \t{{ frappe.utils.fmt_money(frappe.utils.rounded(advances.salary_advance)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"flex:1;display:flex;flex-direction:row;\">\r\n\t\t\t\t\t\t\t<div style=\"flex:1;padding:3px;\">\r\n\t\t\t\t\t\t\t\tLoan\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"flex:.25;padding:3px;flex:.25;text-align:right;\">\r\n                            \t{{ frappe.utils.fmt_money(frappe.utils.rounded(advances.loan)) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"display:flex;flex-direction:row;\">\r\n\t\t\t\t\t<div style=\"width:100%;background:#eee !important;flex:1;padding:3px;\">\r\n\t\t\t\t\t\tTotal\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"width:100%;padding:3px;flex:.25;text-align:right;background:#eee !important;\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"flex:1;display:flex;flex-direction:column;margin-top:5px;font-size:15px;font-weight:bolder;margin-left:20px;text-align:right;text-transform:uppercase;align-items:flex-end;\">\r\n\t\t\t\t<div style=\"flex:1;\">\r\n\t\t\t\t\t<div> Total Earnings : {{ frappe.utils.fmt_money(frappe.utils.rounded(doc.gross_pay)) }} </div>\r\n\t\t\t\t\t<div> Total Deductions : {{ frappe.utils.fmt_money(frappe.utils.rounded(doc.total_deduction)) }} </div>\r\n\t\t\t\t\t<div> <hr style=\"margin-top:2px !important;margin-bottom:2px !important;\"> </div>\r\n\t\t\t\t\t<div> Salary Payable : {{ frappe.utils.fmt_money(frappe.utils.rounded(doc.gross_pay - doc.total_deduction)) }} </div>\r\n\t\t\t\t\t<div> Less Advances : {{ frappe.utils.fmt_money(frappe.utils.rounded(doc.total_loan_repayment)) }} </div>\r\n\t\t\t\t\t<div> <hr style=\"margin-top:2px !important;margin-bottom:2px !important;\"> </div>\r\n\t\t\t\t\t<div style=\"font-size:18px;\"> Net Payable : {{ frappe.utils.fmt_money(frappe.utils.rounded(doc.net_pay)) }} </div> \t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>        \r\n\t\t</div>\r\n\t\t<hr style=\"width:100%;margin-top:2px;margin-bottom:2px;\">\r\n\t\t<div style=\"display:flex;flex-direction:row;width:100%;padding-top:5px;\">\r\n\t\t\t<div style=\"background:#eee;margin-right:5px;\"> Bank Account Details </div>\r\n\t\t\t<div style=\"margin-right:5px;\"> Bank Name </div> <div style=\"flex:1;border:1px black dotted;\"> {{ doc.bank_name }}</div>\r\n\t\t\t<div style=\"margin-right:5px;margin-left:5px;\"> IFSC Code </div> <div style=\"flex:1;border:1px black dotted;\"> {{ doc.ifsc_code }} </div>\r\n\t\t\t<div style=\"margin-right:5px;margin-left:5px;\"> Account No </div> <div style=\"flex:1;border:1px black dotted;\"> {{ doc.bank_account_no }} </div>\r\n\t\t</div>\r\n\t\t<div style=\"display:flex;flex-direction:row;width:100%;\">\r\n\t\t\t<div style=\"margin-bottom:5px;flex:1;margin-top:30px;margin-left:50px;margin-right:50px;\">\r\n\t\t\t\t<div style=\"border-bottom:1px solid black;\">\r\n\t\t\t\t\t&nbsp\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"text-align:center;\">\r\n\t\t\t\t\tCheque No\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"margin-bottom:5px;flex:1;margin-top:30px;margin-left:50px;margin-right:50px;\">\r\n\t\t\t\t<div style=\"border-bottom:1px solid black;\">\r\n\t\t\t\t\t&nbsp\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"text-align:center;\">\r\n\t\t\t\t\tPrepared By\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"margin-bottom:5px;flex:1;margin-top:30px;margin-left:50px;margin-right:50px;\">\r\n\t\t\t\t<div style=\"border-bottom:1px solid black;\">\r\n\t\t\t\t\t&nbsp\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"text-align:center;\">\r\n\t\t\t\t\tEmployee's Signature\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</section>\r\n{% if table_exists(\"Biometric Machine\") and doc_exists(\"Biometric Users\", {'employee':doc.employee}) %}\r\n    {{ print_biometric_attendance() }}\r\n{% endif %}\r\n</div>",
  "line_breaks": 0,
  "modified": "2023-01-31 20:20:10.597389",
  "module": "HR",
  "name": "Custom Salary Slip",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": null,
  "custom_format": 0,
  "default_print_language": null,
  "disabled": 0,
  "doc_type": "Journal Entry",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2>Journal Entry<br><small>{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"voucher_type\", \"print_hide\": 0, \"label\": \"Entry Type\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"posting_date\", \"print_hide\": 0, \"label\": \"Posting Date\"}, {\"fieldname\": \"finance_book\", \"print_hide\": 0, \"label\": \"Finance Book\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"accounts\", \"print_hide\": 0, \"label\": \"Accounting Entries\", \"visible_columns\": [{\"fieldname\": \"account\", \"print_width\": \"250px\", \"print_hide\": 0}, {\"fieldname\": \"bank_account_no\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"party_type\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"party\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"debit_in_account_currency\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"credit_in_account_currency\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"reference_type\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"reference_name\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"reference_due_date\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"project\", \"print_width\": \"\", \"print_hide\": 0}]}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"cheque_no\", \"print_hide\": 0, \"label\": \"Reference Number\"}, {\"fieldname\": \"cheque_date\", \"print_hide\": 0, \"label\": \"Reference Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"get_balance\", \"print_hide\": 0, \"label\": \"Make Difference Entry\"}, {\"fieldname\": \"total_amount\", \"print_hide\": 0, \"label\": \"Total Amount\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Reference\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"clearance_date\", \"print_hide\": 0, \"label\": \"Clearance Date\"}, {\"fieldname\": \"remark\", \"print_hide\": 0, \"label\": \"Remark\"}, {\"fieldname\": \"inter_company_journal_entry_reference\", \"print_hide\": 0, \"label\": \"Inter Company Journal Entry Reference\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"due_date\", \"print_hide\": 0, \"label\": \"Due Date\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Printing Settings\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"pay_to_recd_from\", \"print_hide\": 0, \"label\": \"Pay To / Recd From\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"letter_head\", \"print_hide\": 0, \"label\": \"Letter Head\"}, {\"fieldtype\": \"Section Break\", \"label\": \"More Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"mode_of_payment\", \"print_hide\": 0, \"label\": \"Mode of Payment\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"stock_entry\", \"print_hide\": 0, \"label\": \"Stock Entry\"}]",
  "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header -%}\n\n<div class=\"page-break\">\n    {%- if not doc.get(\"print_heading\") and not doc.get(\"select_print_heading\") \n        and doc.set(\"select_print_heading\", _(\"Credit Note\")) -%}{%- endif -%}\n    {{ add_header(0, 1, doc, letter_head, no_letterhead) }}\n\n    {%- for label, value in (\n        (_(\"Credit To\"), doc.pay_to_recd_from),\n        (_(\"Date\"), frappe.utils.formatdate(doc.voucher_date)),\n        (_(\"Amount\"), \"<strong>\" + doc.get_formatted(\"total_amount\") + \"</strong><br>\" + (doc.total_amount_in_words or \"\") + \"<br>\"),\n        (_(\"Remarks\"), doc.remark)\n    ) -%}\n\n    <div class=\"row\">\n        <div class=\"col-xs-3\"><label class=\"text-right\">{{ label }}</label></div>\n        <div class=\"col-xs-9\">{{ value }}</div>\n    </div>\n\n    {%- endfor -%}\n\n    <hr>\n    <br>\n    <p class=\"strong\">\n        {{ _(\"For\") }} {{ doc.company }},<br>\n        <br>\n        <br>\n        <br>\n        {{ _(\"Authorized Signatory\") }}\n    </p>\n</div>\n\n\n",
  "line_breaks": 0,
  "modified": "2019-04-18 12:10:14.732269",
  "module": "Accounts",
  "name": "Credit Note",
  "parent": null,
  "parentfield": "__print_formats",
  "parenttype": null,
  "print_format_builder": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "Yes"
 }
]